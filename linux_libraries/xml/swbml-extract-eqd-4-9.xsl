<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fpml="http://www.fpml.org/2010/FpML-4-9" xmlns:common="http://exslt.org/common" xmlns:mwrpt="http://www.markitserv.com/swbml-extract-reporting.xsl" exclude-result-prefixes="fpml common mwrpt" version="1.0"><xsl:import href="swbml-extract-reporting.xsl"/><xsl:output method="xml"/><xsl:variable name="SWBML" select="//fpml:SWBML"/><xsl:variable name="swbHeader" select="$SWBML/fpml:swbHeader"/><xsl:variable name="isPrimeBrokered"><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbGiveUp">1</xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyA"><xsl:choose><xsl:when test="$idm140368531915472-5/fpml:buyerPartyReference"><xsl:value-of select="$idm140368531915472-5/fpml:buyerPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:equitySwapTransactionSupplement/fpml:buyerPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:equitySwapTransactionSupplement/fpml:buyerPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:receiverPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:receiverPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:legIdentifier/fpml:legId='0'"><xsl:value-of select="$idm140368531915472-4/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:receiverPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:payerPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:payerPartyReference/@href"/></xsl:when><xsl:when test="boolean($swbHeader/fpml:swbRecipient[1]/fpml:partyReference/@href)"><xsl:value-of select="$swbHeader/fpml:swbRecipient[1]/fpml:partyReference/@href"/></xsl:when><xsl:otherwise>partyA</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyB"><xsl:choose><xsl:when test="$idm140368531915472-5/fpml:sellerPartyReference"><xsl:value-of select="$idm140368531915472-5/fpml:sellerPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:equitySwapTransactionSupplement/fpml:sellerPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:equitySwapTransactionSupplement/fpml:sellerPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:payerPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:payerPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:legIdentifier/fpml:legId='0'"><xsl:value-of select="$idm140368531915472-4/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:payerPartyReference/@href"/></xsl:when><xsl:when test="$idm140368531915472-4/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:receiverPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:receiverPartyReference/@href"/></xsl:when><xsl:when test="boolean($swbHeader/fpml:swbRecipient[2]/fpml:partyReference/@href)"><xsl:value-of select="$swbHeader/fpml:swbRecipient[2]/fpml:partyReference/@href"/></xsl:when><xsl:otherwise>partyB</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="reportingData.rtf"><xsl:apply-templates select="$idm140368531918256-1/fpml:swbTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:variable><xsl:variable name="brokerPrivateData.rtf"><xsl:variable name="broker1"><xsl:choose><xsl:when test="$idm140368531915472-4/fpml:otherPartyPayment[1]/fpml:receiverPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:otherPartyPayment[1]/fpml:receiverPartyReference/@href"/></xsl:when><xsl:otherwise>broker1</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="broker2"><xsl:choose><xsl:when test="$idm140368531915472-4/fpml:otherPartyPayment[2]/fpml:receiverPartyReference"><xsl:value-of select="$idm140368531915472-4/fpml:otherPartyPayment[2]/fpml:receiverPartyReference/@href"/></xsl:when><xsl:otherwise>broker2</xsl:otherwise></xsl:choose></xsl:variable><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$broker1]"><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$broker1]/node()" mode="mapReportingData"/></xsl:when><xsl:when test="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$broker2]"><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$broker2]/node()" mode="mapReportingData"/></xsl:when><xsl:when test="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href='broker']"><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href='broker']/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyAPrivateData.rtf"><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$partyA]"><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$partyA]/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyBPrivateData.rtf"><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$partyB]"><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails[fpml:swbPartyReference/@href=$partyB]/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="$idm140368531918256-1/fpml:swbPrivatePartyTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="extendedTradeDetails.rtf"><xsl:apply-templates select="$idm140368531869200-3/node()" mode="mapReportingData"/></xsl:variable><xsl:variable name="partyIdentifiers.rtf"><xsl:apply-templates select="$idm140368531915472-3/node()" mode="mapReportingData"/></xsl:variable><xsl:variable name="idm140368531918256-1" select="/fpml:SWBML"/><xsl:variable name="idm140368531915472-2" select="$idm140368531918256-1/fpml:swbStructuredTradeDetails"/><xsl:variable name="idm140368531915472-3" select="$idm140368531915472-2/fpml:FpML"/><xsl:variable name="idm140368531869200-3" select="$idm140368531915472-2/fpml:swbExtendedTradeDetails"/><xsl:variable name="idm140368531182240-3" select="$idm140368531918256-1/fpml:swbGiveUp/fpml:swbInterDealerTransaction"/><xsl:variable name="idm140368531181152-3" select="$idm140368531918256-1/fpml:swbGiveUp/fpml:swbCustomerTransaction"/><xsl:variable name="idm140368531176736-3" select="$idm140368531918256-1//fpml:swbStructuredTradeDetails"/><xsl:variable name="idm140368531915472-4" select="$idm140368531915472-3/fpml:trade"/><xsl:variable name="idm140368531782656-4" select="$idm140368531869200-3/fpml:swbTradeHeader"/><xsl:variable name="idm140368531176736-4" select="$idm140368531176736-3/fpml:FpML"/><xsl:variable name="idm140368531915472-5" select="$idm140368531915472-4/fpml:equityOptionTransactionSupplement"/><xsl:template match="/|comment()|processing-instruction()" mode="mapReportingData"><xsl:copy><xsl:apply-templates mode="mapReportingData"/></xsl:copy></xsl:template><xsl:template match="*" mode="mapReportingData"><xsl:element name="{local-name()}"><xsl:apply-templates select="@*|node()" mode="mapReportingData"/></xsl:element></xsl:template><xsl:template match="@*" mode="mapReportingData"><xsl:attribute name="{local-name()}"><xsl:value-of select="."/></xsl:attribute></xsl:template><xsl:template match="/"><xsl:apply-templates select="fpml:SWBML" mode="get-reporting-data"/></xsl:template><xsl:template match="/fpml:SWBML[function-available('common:node-set')]" mode="get-reporting-data"><xsl:apply-templates select="."><xsl:with-param name="reportingData" select="common:node-set($reportingData.rtf)"/><xsl:with-param name="brokerPrivateData" select="common:node-set($brokerPrivateData.rtf)"/><xsl:with-param name="partyAPrivateData" select="common:node-set($partyAPrivateData.rtf)"/><xsl:with-param name="partyBPrivateData" select="common:node-set($partyBPrivateData.rtf)"/><xsl:with-param name="extendedTradeDetails" select="common:node-set($extendedTradeDetails.rtf)"/></xsl:apply-templates></xsl:template><xsl:template match="/fpml:SWBML[not(function-available('common:node-set'))]" mode="get-reporting-data"><xsl:apply-templates select="."><xsl:with-param name="reportingData" select="$reportingData.rtf"/><xsl:with-param name="brokerPrivateData" select="$brokerPrivateData.rtf"/><xsl:with-param name="partyAPrivateData" select="$partyAPrivateData.rtf"/><xsl:with-param name="partyBPrivateData" select="$partyBPrivateData.rtf"/><xsl:with-param name="extendedTradeDetails" select="$extendedTradeDetails.rtf"/></xsl:apply-templates></xsl:template><xsl:variable name="docsType"><xsl:value-of select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:documentation/fpml:brokerConfirmation/fpml:brokerConfirmationType)"/><xsl:value-of select="$idm140368531915472-4/fpml:documentation/fpml:contractualMatrix/fpml:matrixTerm"/></xsl:variable><xsl:variable name="productType" select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbProductType)"/><xsl:template match="fpml:SWBML"><xsl:param name="reportingData"/><xsl:param name="brokerPrivateData"/><xsl:param name="partyAPrivateData"/><xsl:param name="partyBPrivateData"/><xsl:param name="extendedTradeDetails"/><Trade version="4-9"><SWBMLVersion><xsl:value-of select="@version"/></SWBMLVersion><xsl:variable name="universalType"><xsl:choose><xsl:when test="($productType= 'Equity Share Option Universal' or $productType= 'Equity Index Option Universal')">Equity Option Universal</xsl:when><xsl:otherwise>Non Universal</xsl:otherwise></xsl:choose></xsl:variable><BrokerSubmitted>true</BrokerSubmitted><BrokerTradeId><xsl:value-of select="fpml:swbHeader/fpml:swbBrokerTradeId"/></BrokerTradeId><TotalLegs><xsl:value-of select="fpml:swbHeader/fpml:swbTotalLegs"/></TotalLegs><BrokerLegId><xsl:value-of select="fpml:swbHeader/fpml:swbBrokerLegId"/></BrokerLegId><ReplacementTradeId/><ReplacementTradeIdType/><ReplacementReason/><StrategyType><xsl:value-of select="fpml:swbHeader/fpml:swbStrategyType"/></StrategyType><StrategyComment><xsl:value-of select="fpml:swbHeader/fpml:swbStrategyComment"/></StrategyComment><BrokerTradeVersionId><xsl:value-of select="fpml:swbHeader/fpml:swbBrokerTradeVersionId"/></BrokerTradeVersionId><LinkedTradeId/><TradeSource><xsl:choose><xsl:when test="fpml:swbHeader/fpml:swbTradeSource"><xsl:value-of select="fpml:swbHeader/fpml:swbTradeSource"/></xsl:when><xsl:otherwise>Voice</xsl:otherwise></xsl:choose></TradeSource><xsl:for-each select="$idm140368531918256-1/fpml:swbHeader/fpml:swbVenueId"><VenueId><xsl:value-of select="."/></VenueId><xsl:for-each select="@swbVenueIdScheme"><xsl:call-template name="mwrpt:mapVenueIdScheme"/></xsl:for-each></xsl:for-each><MessageText><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbMessageText"/></MessageText><AllocatedTrade><xsl:value-of select="string(boolean(/fpml:SWBML/fpml:swbAllocations))"/></AllocatedTrade><xsl:if test="$idm140368531918256-1/fpml:swbAllocations"><xsl:call-template name="fpml:swbAllocations"/></xsl:if><EmptyBlockTrade><xsl:value-of select="string(boolean(/fpml:SWBML/fpml:swbBlockTrade))"/></EmptyBlockTrade><PrimeBrokerTrade/><ReversePrimeBrokerLegalEntities/><xsl:apply-templates select="fpml:swbHeader/fpml:swbRecipient"/><xsl:variable name="partyAnode" select="$idm140368531915472-3/fpml:party[@id=$partyA]"/><PartyAId id="{$partyA}"><xsl:value-of select="$partyAnode/fpml:partyId"/></PartyAId><PartyAIdType><xsl:value-of select="$partyAnode/fpml:partyId/@partyIdScheme"/></PartyAIdType><PartyAName><xsl:value-of select="$partyAnode/fpml:partyName"/></PartyAName><xsl:variable name="partyBnode" select="$idm140368531915472-3/fpml:party[@id=$partyB]"/><PartyBId id="{$partyB}"><xsl:value-of select="$partyBnode/fpml:partyId"/></PartyBId><PartyBIdType><xsl:value-of select="$partyBnode/fpml:partyId/@partyIdScheme"/></PartyBIdType><PartyBName><xsl:value-of select="$partyBnode/fpml:partyName"/></PartyBName><PartyCId/><PartyCIdType/><PartyCName/><PartyDId><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbGiveUp"><xsl:attribute name="id"><xsl:value-of select="$partyD"/></xsl:attribute><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=$partyD]/fpml:partyId"/></xsl:when><xsl:when test="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:attribute name="id"><xsl:value-of select="$partyD"/></xsl:attribute><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:if test="fpml:partyReference/@href= /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:if></xsl:for-each></xsl:when></xsl:choose></PartyDId><PartyDIdType><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbGiveUp"><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=$partyD]/fpml:partyId/@partyIdScheme"/></xsl:when><xsl:when test="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:if test="fpml:partyReference/@href= /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId/@partyIdScheme"/></xsl:if></xsl:for-each></xsl:when></xsl:choose></PartyDIdType><PartyDName><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbGiveUp"><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=$partyD]/fpml:partyName"/></xsl:when><xsl:when test="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:if test="fpml:partyReference/@href= /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyName"/></xsl:if></xsl:for-each></xsl:when></xsl:choose></PartyDName><PartyGId/><PartyGIdType/><PartyGName/><BrokerAId><xsl:variable name="broker1" select="$idm140368531915472-4/fpml:otherPartyPayment[1]/fpml:receiverPartyReference/@href"/><xsl:attribute name="id"><xsl:value-of select="$broker1"/></xsl:attribute><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=$broker1]/fpml:partyId"/></BrokerAId><BrokerBId><xsl:variable name="broker2" select="$idm140368531915472-4/fpml:otherPartyPayment[2]/fpml:receiverPartyReference/@href"/><xsl:attribute name="id"><xsl:value-of select="$broker2"/></xsl:attribute><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=$broker2]/fpml:partyId"/></BrokerBId><NominalTerm/><FixedRatePayer>A</FixedRatePayer><FloatingRatePayer/><OptionBuyer><xsl:choose><xsl:when test="$idm140368531915472-5/fpml:buyerPartyReference/@href='partyA'">A</xsl:when><xsl:otherwise>B</xsl:otherwise></xsl:choose></OptionBuyer><TradeDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:tradeHeader/fpml:tradeDate)"/></xsl:call-template></TradeDate><StartDate/><FirstFixedPeriodStartDate/><FirstFloatPeriodStartDate/><FirstFloatPeriodStartDate_2/><EndDate/><FixedPaymentFreq/><FloatPaymentFreq/><FloatPaymentFreq_2/><FloatRollFreq/><FloatRollFreq_2/><RollsType/><RollsMethod/><RollDay/><MonthEndRolls/><FirstPeriodStartDate/><FirstPaymentDate/><LastRegularPaymentDate/><FixedRate/><initialPoints/><quotationStyle/><RecoveryRate/><FixedSettlement/><Strike><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:strike/fpml:strikePrice"/></xsl:if></Strike><StrikePercentage><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:strike/fpml:strikePercentage"/></xsl:if></StrikePercentage><StrikeDate><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:strike/fpml:strikeDeterminationDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if><xsl:if test="($productType='Equity Share Swap' or $productType='Equity Index Swap') and (fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:strikeDate/fpml:adjustableDate/fpml:unadjustedDate)"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:strikeDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></StrikeDate><Currency><xsl:choose><xsl:when test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:strike/fpml:currency"/></xsl:when><xsl:when test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:strike/fpml:currency"/></xsl:when><xsl:when test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:settlementCurrency"/></xsl:when></xsl:choose></Currency><Currency_2/><Notional/><NotionalFloating/><Notional_2/><InitialNotional/><FixedAmount/><FixedAmountCurrency/><FixedDayBasis/><FloatDayBasis/><FloatDayBasis_2/><FixedConvention/><FixedCalcPeriodDatesConvention/><FixedTerminationDateConvention/><FloatConvention/><FloatCalcPeriodDatesConvention/><FloatTerminationDateConvention/><FloatConvention_2/><FloatTerminationDateConvention_2/><FloatingRateIndex/><FloatingRateIndex_2/><InflationLag/><IndexSource/><InterpolationMethod/><InitialIndexLevel/><RelatedBond/><IndexTenor1/><LinearInterpolation/><NoStubLinearInterpolation/><NoStubLinearInterpolation2/><IndexTenor2/><SpreadOverIndex/><SpreadOverIndex_2/><FirstFixingRate/><FirstFixingRate_2/><FixingDaysOffset/><FixingDaysOffset_2/><FixingHolidayCentres/><FixingHolidayCentres_2/><ResetInArrears/><ResetInArrears_2/><FirstFixingDifferent/><FirstFixingDifferent_2/><FirstFixingDaysOffset/><FirstFixingDaysOffset_2/><FirstFixingHolidayCentres/><FirstFixingHolidayCentres_2/><PaymentHolidayCentres/><PaymentHolidayCentres_2/><PaymentLag/><PaymentLag_2/><RollHolidayCentres/><RollHolidayCentres_2/><AdjustFixedStartDate/><AdjustFloatStartDate/><AdjustFloatStartDate_2/><AdjustRollEnd/><AdjustFloatRollEnd/><AdjustFloatRollEnd_2/><AdjustFixedFinalRollEnd/><AdjustFinalRollEnd/><AdjustFinalRollEnd_2/><CompoundingMethod/><CompoundingMethod_2/><AveragingMethod/><AveragingMethod_2/><FloatingRateMultiplier/><FloatingRateMultiplier_2/><DesignatedMaturity/><DesignatedMaturity_2/><ResetFreq/><ResetFreq_2/><WeeklyRollConvention/><WeeklyRollConvention_2/><RateCutOffDays/><RateCutOffDays_2/><InitialExchange/><FinalExchange/><MarkToMarket/><IntermediateExchange/><FallbackBondApplicable/><CalculationMethod/><CalculationStyle/><FinalPriceExchangeCalc/><SpreadCalculationMethod/><CouponRate/><Maturity/><RelatedBondValue/><RelatedBondID/><MTMRateSource/><MTMRateSourcePage/><MTMFixingDate/><MTMFixingHolidayCentres/><MTMFixingTime/><MTMLocation/><MTMCutoffTime/><CalculationPeriodDays/><FraDiscounting/><NoBreak/><HasBreak/><BreakType/><BreakFirstDate/><BreakFrequency/><BreakOverride/><BreakDate/><ExchangeUnderlying/><SpreadCurrency/><SwapSpread/><BondId1/><BondName1/><BondAmount1/><BondPriceType1/><BondPrice1/><BondId2/><BondName2/><BondAmount2/><BondPriceType2/><BondPrice2/><StubAt/><FixedStub/><FloatStub/><FloatStub_2/><FrontAndBackStubs/><FixedBackStub/><FloatBackStub/><NoBackStubLinearInterpolation/><FirstFixedRegPdStartDate/><FirstFloatRegPdStartDate/><LastFixedRegPdEndDate/><LastFloatRegPdEndDate/><MasterAgreement/><ProductType><xsl:choose><xsl:when test="$productType='Index Variance Swap'">Equity Index Variance Swap</xsl:when><xsl:when test="$productType='Share Variance Swap'">Equity Share Variance Swap</xsl:when><xsl:when test="$productType='Index Dividend Swap'">Equity Index Dividend Swap</xsl:when><xsl:when test="$productType='Share Dividend Swap'">Equity Share Dividend Swap</xsl:when><xsl:when test="$productType='Dispersion Variance Swap'">Equity Dispersion Variance Swap</xsl:when><xsl:otherwise><xsl:value-of select="$productType"/></xsl:otherwise></xsl:choose></ProductType><OptionType><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:optionType"/></xsl:if></OptionType><OptionExpirationDate><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:call-template name="formatDate"><xsl:with-param name="date"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:equityAmericanExercise/fpml:expirationDate/fpml:adjustableDate/fpml:unadjustedDate"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:equityEuropeanExercise/fpml:expirationDate/fpml:adjustableDate/fpml:unadjustedDate"/></xsl:with-param></xsl:call-template></xsl:if></OptionExpirationDate><OptionExpirationDateConvention><xsl:if test="$productType='Equity Index Option'"><xsl:variable name="optionExpiryConvention"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:expirationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessDayConvention"/></xsl:variable><xsl:choose><xsl:when test="$optionExpiryConvention = 'NotApplicable'"/><xsl:otherwise><xsl:value-of select="substring($optionExpiryConvention,1,4)"/></xsl:otherwise></xsl:choose></xsl:if></OptionExpirationDateConvention><OptionHolidayCentres/><OptionEarliestTime/><OptionExpiryTime><xsl:choose><xsl:when test="($productType='Equity Share Option' or $productType='Equity Share Option Strategy') and ($docsType='ISDA2005EquityJapaneseInterdealer' or $docsType='ISDA2008EquityJapanese')"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType = 'AsSpecifiedInMasterConfirmation'">Close</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType = 'MorningClose' ">Morning Close</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType"/></xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType = 'AsSpecifiedInMasterConfirmation' ">Per Master Confirm</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType = 'SpecificTime' ">Specific Time</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType"/></xsl:otherwise></xsl:choose></xsl:when></xsl:choose></OptionExpiryTime><ValuationTime><xsl:if test="($productType='Equity Share Option' and ($docsType = 'EquityOptionAEJPrivate' or $docsType = 'EquityOptionAmericasPrivate' or $docsType = 'EquityOptionEMEAPrivate'))"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType = 'AsSpecifiedInMasterConfirmation' ">Per Master Confirm</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTimeType"/></xsl:otherwise></xsl:choose></xsl:if></ValuationTime><OptionSpecificExpiryTime><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise//fpml:equityExpirationTime/fpml:hourMinuteTime"/></OptionSpecificExpiryTime><OptionLocation/><OptionAutomaticExercise/><OptionThreshold/><ManualExercise/><OptionWrittenExerciseConf/><OptionSettlement><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:settlementType"/></xsl:if></OptionSettlement><OptionCashSettlementMethod/><OptionCashSettlementQuotationRate/><OptionCashSettlementRateSource/><OptionCashSettlementReferenceBanks/><xsl:if test="($productType='Equity Share Option' or $productType='Equity Index Option')"><BarrierType><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn">Knock In</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut">Knock Out</xsl:when></xsl:choose></BarrierType><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn"><KnockInTriggerType><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn/fpml:trigger/fpml:triggerType"/></KnockInTriggerType><KnockInPrice><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn/fpml:trigger/fpml:level"/></KnockInPrice><KnockInPeriodStartDate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn/fpml:schedule/fpml:startDate"/></KnockInPeriodStartDate><KnockInPeriodEndDate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn/fpml:schedule/fpml:endDate"/></KnockInPeriodEndDate><KnockInValuationTime><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn/fpml:trigger/fpml:triggerTimeType = 'Closing'">Close</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockIn/fpml:trigger/fpml:triggerTimeType = 'Anytime'">Continuous Observation</xsl:when></xsl:choose></KnockInValuationTime></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut"><KnockOutTriggerType><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:trigger/fpml:triggerType"/></KnockOutTriggerType><KnockOutPrice><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:trigger/fpml:level"/></KnockOutPrice><KnockOutPeriodStartDate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:schedule/fpml:startDate"/></KnockOutPeriodStartDate><KnockOutPeriodEndDate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:schedule/fpml:endDate"/></KnockOutPeriodEndDate><KnockOutValuationTime><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:trigger/fpml:triggerTimeType = 'Closing'">Close</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:trigger/fpml:triggerTimeType = 'Anytime'">Continuous Observation</xsl:when></xsl:choose></KnockOutValuationTime><Rebate><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:featurePayment">true</xsl:when><xsl:otherwise>false</xsl:otherwise></xsl:choose></Rebate><RebateAmount><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:featurePayment/fpml:amount"/></RebateAmount><RebateAmountPaymentDate><xsl:choose><xsl:when test="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:featurePayment/fpml:featurePaymentDate/fpml:relativeDate/fpml:dateRelativeTo/@href)=string('observationDate')">Immediate</xsl:when><xsl:otherwise>Delayed</xsl:otherwise></xsl:choose></RebateAmountPaymentDate><RebateAmountPaymentLag><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:knock/fpml:knockOut/fpml:featurePayment/fpml:featurePaymentDate/fpml:relativeDate/fpml:periodMultiplier"/></RebateAmountPaymentLag></xsl:if></xsl:if><ClearedPhysicalSettlement/><Premium><Currency><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityPremium/fpml:paymentAmount/fpml:currency"/></Currency><Amount><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityPremium/fpml:paymentAmount/fpml:amount"/></xsl:if></Amount><Date><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityPremium/fpml:paymentDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></Date></Premium><PremiumHolidayCentres/><DocsType><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType='Equity Share Option Strategy' or $productType='Equity Index Option Strategy'"><xsl:choose><xsl:when test="$docsType='2004EquityEuropeanInterdealer'">European Master</xsl:when><xsl:when test="$docsType='ISDA2007EquityEuropean'">European Master</xsl:when><xsl:when test="$docsType='EquityOptionEuropePrivate'">European Master</xsl:when><xsl:when test="$docsType='Equity Options (Europe)'">European Master</xsl:when><xsl:when test="$docsType='ISDA2005EquityJapaneseInterdealer'">Japanese Master</xsl:when><xsl:when test="$docsType='ISDA2008EquityJapanese'">Japanese Master</xsl:when><xsl:when test="$docsType='Equity Options (Japan)'">Japanese Master</xsl:when><xsl:when test="$docsType='ISDA2005EquityAsiaExcludingJapanInterdealer'">AEJ Master</xsl:when><xsl:when test="$docsType='ISDA2008EquityAsiaExcludingJapan'">AEJ Master</xsl:when><xsl:when test="$docsType='Equity Options (AEJ)'">AEJ Master</xsl:when><xsl:when test="$docsType='EquityOptionAEJPrivate'">AEJ Master</xsl:when><xsl:when test="$docsType='ISDA2004EquityAmericasInterdealer'">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2008EquityAmericas'">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2009EquityAmericas'">Americas Master</xsl:when><xsl:when test="$docsType='EquityOptionAmericasPrivate'">Americas Master</xsl:when><xsl:when test="$docsType='Equity Options (Americas)'">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2010EquityEMEAInterdealer'">EMEA Master</xsl:when><xsl:when test="$docsType='EquityOptionEMEAPrivate'">EMEA Master</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:choose><xsl:when test="$docsType='VolatilitySwapAsiaExcludingJapanPrivate'">AEJ Master</xsl:when><xsl:when test="$docsType='VolatilitySwapAmericasPrivate'">Americas Master</xsl:when><xsl:when test="$docsType='VolatilitySwapEuropeanPrivate'">European Master</xsl:when><xsl:when test="$docsType='VolatilitySwapJapanesePrivate'">Japanese Master</xsl:when><xsl:when test="$docsType='IVS1OpenMarkets'">IVS1 OpenMarkets</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Share Dividend Swap' or $productType='Index Dividend Swap'"><xsl:choose><xsl:when test="$docsType='2006DividendSwapEuropeanInterdealer' ">European Master</xsl:when><xsl:when test="$docsType='DividendSwapEuropeanPrivate' ">European Master</xsl:when><xsl:when test="$docsType='DividendSwapAmericasPrivate' ">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2008DividendSwapJapan' ">Japanese Master</xsl:when><xsl:when test="$docsType='ISDA2008DividendSwapJapaneseRev1' ">Japanese Master</xsl:when><xsl:when test="$docsType='DividendSwapAsiaExcludingJapanPrivate' ">AEJ Master</xsl:when><xsl:when test="$docsType='2014DividendSwapAsiaExcludingJapanInterdealer' ">AEJ Master</xsl:when><xsl:when test="$docsType='2013DividendSwapAmericasInterdealer' ">Americas Master</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Dispersion Variance Swap'"><xsl:if test="$docsType='ISDA2007DispersionVarianceSwapEuropean'">European Master</xsl:if></xsl:if><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:variable name="docsType" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:documentation/fpml:brokerConfirmation/fpml:brokerConfirmationType)"/><xsl:choose><xsl:when test="$docsType='2005VarianceSwapEuropeanInterdealer'">European Master</xsl:when><xsl:when test="$docsType='ISDA2007VarianceSwapEuropean'">European Master</xsl:when><xsl:when test="$docsType='ISDA2006VarianceSwapJapaneseInterdealer'">Japanese Master</xsl:when><xsl:when test="$docsType='ISDA2004EquityAmericasInterdealer'">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2008EquityAmericas'">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2007VarianceSwapAmericas'">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2007VarianceSwapAsiaExcludingJapan'">AEJ Master</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:choose><xsl:when test="$docsType='EquitySwapAEJPrivate' ">AEJ Master</xsl:when><xsl:when test="$docsType='ISDA2005EquitySwapAsiaExcludingJapanInterdealer' ">AEJ Master</xsl:when><xsl:when test="$docsType='ISDA2008EquityFinanceSwapAsiaExcludingJapan'">AEJ Master</xsl:when><xsl:when test="$docsType='ISDA2009EquityFinanceSwapAsiaExcludingJapan'">AEJ Master</xsl:when><xsl:when test="$docsType='ISDA2007EquityFinanceSwapEuropean' ">European Master</xsl:when><xsl:when test="$docsType='ISDA2007EquityEuropean' ">European Master</xsl:when><xsl:when test="$docsType='EquitySwapEuropePrivate' ">European Master</xsl:when><xsl:when test="$docsType='EquitySwapAmericasPrivate' ">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2004EquityAmericasInterdealer' ">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2009EquitySwapAmericas' ">Americas Master</xsl:when><xsl:when test="$docsType='ISDA2009EquitySwapPanAsia' ">PanAsia Master</xsl:when><xsl:when test="$docsType='EquitySwapPanAsiaPrivate' ">PanAsia Master</xsl:when><xsl:when test="$docsType='ISDA2009EquityEuropeanInterdealer' ">European Master</xsl:when><xsl:when test="$docsType='EmergingEquitySwapIndustry' ">Emerging Master</xsl:when><xsl:when test="$docsType='EmergingEquitySwapEMEA' ">Emerging Master</xsl:when><xsl:when test="$docsType='EmergingEquitySwapLATAM' ">Emerging Master</xsl:when><xsl:when test="$docsType='EquitySwapGlobalPrivate' ">Global Master</xsl:when><xsl:when test="$docsType='ISDA2010FairValueShareSwapEuropeanInterdealer' ">European Master</xsl:when></xsl:choose></xsl:if></DocsType><DocsSubType><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType='Equity Share Option Strategy' or $productType='Equity Index Option Strategy'"><xsl:choose><xsl:when test="$docsType='2004EquityEuropeanInterdealer'">2004 Interdealer</xsl:when><xsl:when test="$docsType='ISDA2007EquityEuropean'">2007 ISDA</xsl:when><xsl:when test="$docsType='EquityOptionEuropePrivate'">Private</xsl:when><xsl:when test="$docsType='ISDA2005EquityJapaneseInterdealer'">2005 ISDA</xsl:when><xsl:when test="$docsType='ISDA2008EquityJapanese'">2008 ISDA</xsl:when><xsl:when test="$docsType='ISDA2005EquityAsiaExcludingJapanInterdealer'">2006 ISDA</xsl:when><xsl:when test="$docsType='ISDA2008EquityAsiaExcludingJapan'">2008 ISDA</xsl:when><xsl:when test="$docsType='EquityOptionAEJPrivate'">Private</xsl:when><xsl:when test="$docsType='ISDA2004EquityAmericasInterdealer'">2004 Interdealer</xsl:when><xsl:when test="$docsType='ISDA2008EquityAmericas'">2008 ISDA</xsl:when><xsl:when test="$docsType='ISDA2009EquityAmericas'">2009 ISDA</xsl:when><xsl:when test="$docsType='EquityOptionAmericasPrivate'">Private</xsl:when><xsl:when test="$docsType='ISDA2010EquityEMEAInterdealer'">2010 ISDA</xsl:when><xsl:when test="$docsType='EquityOptionEMEAPrivate'">Private</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:choose><xsl:when test="$docsType='2005VarianceSwapEuropeanInterdealer'">2005 Interdealer</xsl:when><xsl:when test="$docsType='ISDA2007VarianceSwapEuropean'">2007 ISDA</xsl:when><xsl:when test="$docsType='ISDA2006VarianceSwapJapaneseInterdealer'">2006 ISDA</xsl:when><xsl:when test="$docsType='ISDA2004EquityAmericasInterdealer'">2004 Interdealer</xsl:when><xsl:when test="$docsType='ISDA2008EquityAmericas'">2008 ISDA</xsl:when><xsl:when test="$docsType='ISDA2007VarianceSwapAmericas'">2007 ISDA</xsl:when><xsl:when test="$docsType='ISDA2007VarianceSwapAsiaExcludingJapan'">2007 ISDA</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:choose><xsl:when test="$docsType='EquitySwapAEJPrivate'">Private</xsl:when><xsl:when test="$docsType='ISDA2005EquitySwapAsiaExcludingJapanInterdealer'">2005 ISDA</xsl:when><xsl:when test="$docsType='ISDA2007EquityFinanceSwapEuropean'">2007 ISDA</xsl:when><xsl:when test="$docsType='ISDA2007EquityEuropean'">2007 ISDA</xsl:when><xsl:when test="$docsType='EquitySwapEuropePrivate'">Private</xsl:when><xsl:when test="$docsType='EquitySwapAmericasPrivate'">Private</xsl:when><xsl:when test="$docsType='ISDA2009EquitySwapAmericas'">2009 ISDA</xsl:when><xsl:when test="$docsType='ISDA2004EquityAmericasInterdealer'">2004 Interdealer</xsl:when><xsl:when test="$docsType='ISDA2008EquityFinanceSwapAsiaExcludingJapan'">2008 ISDA</xsl:when><xsl:when test="$docsType='ISDA2009EquityFinanceSwapAsiaExcludingJapan'">2009 ISDA</xsl:when><xsl:when test="$docsType='ISDA2009EquitySwapPanAsia'">2009 ISDA</xsl:when><xsl:when test="$docsType='ISDA2009EquityEuropeanInterdealer'">2009 ISDA</xsl:when><xsl:when test="$docsType='EmergingEquitySwapIndustry'">Industry</xsl:when><xsl:when test="$docsType='EmergingEquitySwapEMEA' ">EMEA</xsl:when><xsl:when test="$docsType='EmergingEquitySwapLATAM' ">LATAM</xsl:when><xsl:when test="$docsType='EquitySwapGlobalPrivate'">Private</xsl:when><xsl:when test="$docsType='EquitySwapPanAsiaPrivate'">Private</xsl:when><xsl:when test="$docsType='ISDA2010FairValueShareSwapEuropeanInterdealer' ">2009 ISDA (FVSS)</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Share Dividend Swap' or $productType='Index Dividend Swap'"><xsl:choose><xsl:when test="$docsType='2006DividendSwapEuropeanInterdealer' ">2006 Interdealer</xsl:when><xsl:when test="$docsType='DividendSwapEuropeanPrivate' ">Private</xsl:when><xsl:when test="$docsType='DividendSwapAmericasPrivate' ">Private</xsl:when><xsl:when test="$docsType='ISDA2008DividendSwapJapan' ">2008 ISDA</xsl:when><xsl:when test="$docsType='ISDA2008DividendSwapJapaneseRev1' ">2008 ISDA (Rev 1)</xsl:when><xsl:when test="$docsType='DividendSwapAsiaExcludingJapanPrivate'">Private</xsl:when><xsl:when test="$docsType='2014DividendSwapAsiaExcludingJapanInterdealer'">2014 Interdealer</xsl:when><xsl:when test="$docsType='2013DividendSwapAmericasInterdealer'">2013 Interdealer</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Dispersion Variance Swap'"><xsl:if test="$docsType='ISDA2007DispersionVarianceSwapEuropean'">2007 ISDA</xsl:if></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:choose><xsl:when test="$docsType='VolatilitySwapAsiaExcludingJapanPrivate'">Private</xsl:when><xsl:when test="$docsType='VolatilitySwapAmericasPrivate'">Private</xsl:when><xsl:when test="$docsType='VolatilitySwapEuropeanPrivate'">Private</xsl:when><xsl:when test="$docsType='VolatilitySwapJapanesePrivate'">Private</xsl:when><xsl:when test="$docsType='IVS1OpenMarkets'">ISDA</xsl:when></xsl:choose></xsl:if></DocsSubType><OptionsComponentSecurityIndexAnnex><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:componentSecurityIndexAnnexFallback"/></OptionsComponentSecurityIndexAnnex><OptionHedgingDisruption><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:hedgingDisruption"/></OptionHedgingDisruption><OptionLossOfStockBorrow><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:lossOfStockBorrow"/></OptionLossOfStockBorrow><OptionMaximumStockLoanRate><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:maximumStockLoanRate"/></OptionMaximumStockLoanRate><OptionIncreasedCostOfStockBorrow><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:increasedCostOfStockBorrow"/></OptionIncreasedCostOfStockBorrow><OptionInitialStockLoanRate><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:initialStockLoanRate"/></OptionInitialStockLoanRate><OptionIncreasedCostOfHedging><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:increasedCostOfHedging"/></OptionIncreasedCostOfHedging><OptionForeignOwnershipEvent><xsl:value-of select="//fpml:equityOptionTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:foreignOwnershipEvent"/></OptionForeignOwnershipEvent><OptionEntitlement><xsl:if test="$productType='Equity Share Option' or $productType='Equity Share Option Strategy' or $universalType = 'Equity Option Universal'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:optionEntitlement"/></xsl:if></OptionEntitlement><FxFeature><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:fxFeature">true</xsl:if></FxFeature><ContractualDefinitions/><RestructuringCreditEvent/><CalculationAgentCity/><CalculationAgent><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:calculationAgent/fpml:calculationAgentPartyReference"><CalculationAgentOccurrence><xsl:value-of select="./@href"/></CalculationAgentOccurrence></xsl:for-each></CalculationAgent><RefEntName/><RefEntStdId/><REROPairStdId/><RefOblRERole/><RefOblSecurityIdType/><RefOblSecurityId/><BloombergID/><RefOblMaturity/><RefOblCoupon/><RefOblPrimaryObligor/><BorrowerNames/><FacilityType/><CreditAgreementDate/><IsSecuredList/><DesignatedPriority/><OptionalEarlyTermination/><ReferencePrice/><ReferencePolicy/><PaymentDelay/><StepUpProvision/><WACCapInterestProvision/><InterestShortfallCapIndicator/><InterestShortfallCompounding/><InterestShortfallCapBasis/><InterestShortfallRateSource/><MortgagePaymentFrequency/><MortgageFinalMaturity/><MortgageOriginalAmount/><MortgageInitialFactor/><MortgageSector/><IndexName/><IndexId/><IndexSeries/><IndexVersion/><IndexAnnexDate/><IndexTradedRate/><UpfrontFee/><UpfrontFeeAmount/><UpfrontFeeDate/><UpfrontFeePayer/><AttachmentPoint/><ExhaustionPoint/><EquityRic><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:underlyer/fpml:singleUnderlyer//fpml:instrumentId"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:instrumentId"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:instrumentId"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:instrumentId"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:instrumentId"/></EquityRic><OptionQuantity><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:numberOfOptions"/></OptionQuantity><OptionExpiryMonth/><OptionExpiryYear/><Price><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityPremium/fpml:pricePerOption/fpml:amount"/></Price><OptionStyle><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:equityAmericanExercise">American</xsl:when><xsl:otherwise>European</xsl:otherwise></xsl:choose></xsl:if></OptionStyle><ExchangeLookAlike><xsl:if test="$productType='Equity Share Option'"><xsl:value-of select="string(boolean(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:exchangeLookAlike='true'))"/></xsl:if><xsl:if test="$productType='Equity Index Option' and ($docsType='ISDA2010EquityEMEAInterdealer' or $docsType='EquityOptionEMEAPrivate' or $docsType='ISDA2008EquityAmericas' or $docsType='ISDA2009EquityAmericas' or $docsType='EquityOptionAmericasPrivate')"><xsl:value-of select="string(boolean(/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:exchangeTradedContractNearest='true'))"/></xsl:if></ExchangeLookAlike><AdjustmentMethod><xsl:variable name="adjustmentMethod" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:methodOfAdjustment)"/><xsl:choose><xsl:when test="$adjustmentMethod='CalculationAgent'">CAA</xsl:when><xsl:when test="$adjustmentMethod='OptionsExchange'">OEA</xsl:when><xsl:otherwise/></xsl:choose></AdjustmentMethod><RelatedExchange><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"/></xsl:when><xsl:otherwise/></xsl:choose></xsl:if><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"/></xsl:when><xsl:otherwise/></xsl:choose></xsl:if><xsl:if test="$productType='Share Dividend Swap' or $productType='Index Dividend Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"/></xsl:when><xsl:otherwise/></xsl:choose></xsl:if><xsl:if test="$productType='Dispersion Variance Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"/></xsl:when><xsl:otherwise/></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId = 'NotApplicable'">Not Applicable</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"/></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise/></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId = 'AsSpecifiedInMasterConfirmation'">Per Master Confirm</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"/></xsl:otherwise></xsl:choose></xsl:if></RelatedExchange><MasterConfirmationDate><xsl:variable name="Date"><xsl:choose><xsl:when test="$docsType='IVS1OpenMarkets'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:documentation/fpml:masterAgreement/fpml:masterAgreementDate"/></xsl:when></xsl:choose></xsl:variable><xsl:if test="$docsType='IVS1OpenMarkets'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string($Date)"/></xsl:call-template></xsl:if></MasterConfirmationDate><Multiplier><xsl:if test="$productType ='Equity Index Option' or $productType='Equity Index Option Strategy'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:multiplier"/></xsl:if><xsl:if test="$productType ='Equity Index Swap' or $productType='Equity Share Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbMultiplier"/></xsl:if></Multiplier><SettlementCurrency><xsl:choose><xsl:when test="$productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:amount/fpml:paymentCurrency/fpml:currency"/></xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:settlementCurrency"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:settlementCurrency"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:paymentCurrency/fpml:currency"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:settlementCurrency"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:settlementCurrency"/></xsl:otherwise></xsl:choose></SettlementCurrency><SettlementCurrency_2/><SettlementDateOffset><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:settlementDate/fpml:relativeDate/fpml:periodMultiplier"/></xsl:if><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:cashSettlementPaymentDate/fpml:relativeDate/fpml:periodMultiplier"/></xsl:if><xsl:if test="$productType='Share Dividend Swap' or $productType='Index Dividend Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg//fpml:paymentDate/fpml:relativeDate/fpml:periodMultiplier"/></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:settlementDate/fpml:relativeDate/fpml:periodMultiplier"/></xsl:if></SettlementDateOffset><SettlementType><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option'"><xsl:choose><xsl:when test="not(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:fxFeature)">Vanilla</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:fxFeature/fpml:composite">Composite</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:fxFeature/fpml:crossCurrency">Cross-Currency</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:fxFeature/fpml:quanto">Quanto</xsl:when></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:settlementType"/></xsl:if></SettlementType><FxDeterminationMethod><xsl:value-of select="//fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbFxDeterminationMethod"/><xsl:value-of select="//fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVarianceSwapDetails/fpml:swbFxDeterminationMethod"/><xsl:value-of select="//fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVolatilitySwapDetails/fpml:swbFxDeterminationMethod"/></FxDeterminationMethod><ReferencePriceSource><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType = 'Share Variance Swap' or $productType = 'Index Variance Swap' or $productType = 'Equity Share Volatility Swap' or $productType = 'Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:fxFeature//fpml:fxSpotRateSource/fpml:primaryRateSource/fpml:rateSource"/></xsl:if></ReferencePriceSource><ReferencePricePage><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType = 'Share Variance Swap' or $productType = 'Index Variance Swap' or $productType = 'Equity Share Volatility Swap' or $productType = 'Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:fxFeature//fpml:fxSpotRateSource/fpml:primaryRateSource/fpml:rateSourcePage"/></xsl:if></ReferencePricePage><ReferencePriceTime><xsl:if test="($productType='Equity Share Option' or $productType='Equity Index Option' or $productType = 'Share Variance Swap' or $productType = 'Index Variance Swap' or $productType = 'Equity Share Volatility Swap' or $productType = 'Equity Index Volatility Swap') and fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:fxFeature//fpml:fxSpotRateSource/fpml:fixingTime"><xsl:call-template name="formatTime"><xsl:with-param name="time" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:fxFeature//fpml:fxSpotRateSource/fpml:fixingTime/fpml:hourMinuteTime)"/></xsl:call-template></xsl:if></ReferencePriceTime><ReferencePriceCity><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType = 'Share Variance Swap' or $productType = 'Index Variance Swap' or $productType = 'Equity Share Volatility Swap' or $productType = 'Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:fxFeature//fpml:fxSpotRateSource/fpml:fixingTime/fpml:businessCenter"/></xsl:if></ReferencePriceCity><ReferenceCurrency><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:fxFeature/fpml:referenceCurrency"/></ReferenceCurrency><ReferenceCurrency_2/><DcRequired><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:value-of select="string(boolean(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross))"/></xsl:if></DcRequired><DcEventTypeA><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross"><xsl:variable name="buyer" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:buyerPartyReference/@href)"/><xsl:if test="not($productType='Equity Share Swap' or $productType='Equity Index Swap')"><xsl:choose><xsl:when test="$buyer=$partyA">A</xsl:when><xsl:otherwise>B</xsl:otherwise></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:choose><xsl:when test="$buyer=$partyA">Buy</xsl:when><xsl:otherwise>Sell</xsl:otherwise></xsl:choose></xsl:if></xsl:if></DcEventTypeA><DcRic><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross//fpml:instrumentId"/></xsl:if></DcRic><DcDescription><xsl:if test="$productType='Equity Index Option' or $productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross//fpml:description"/></xsl:if></DcDescription><DcExpiryMonth><xsl:if test="$productType='Equity Index Option'"><xsl:value-of select="substring(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:future/fpml:maturity,6,2)"/></xsl:if></DcExpiryMonth><DcExpiryYear><xsl:if test="$productType='Equity Index Option'"><xsl:value-of select="substring(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:future/fpml:maturity,1,4)"/></xsl:if></DcExpiryYear><DcQuantity><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbQuantity"/></DcQuantity><DcPrice><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbPrice/fpml:amount"/></DcPrice><DcCurrency><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbPrice/fpml:currency"/></DcCurrency><DcDelta><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbDelta"/></DcDelta><DcExpiryDate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:future/fpml:maturity"/></DcExpiryDate><DcFuturesCode><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:future/fpml:instrumentId"/></DcFuturesCode><DcOffshoreCross><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:value-of select="string(boolean(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbOffshoreCross))"/></xsl:if></DcOffshoreCross><DcOffshoreCrossLocation><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbOffshoreCross/fpml:swbOffshoreCrossLocation"/></xsl:if></DcOffshoreCrossLocation><DcExchangeID><xsl:if test="$productType='Equity Share Option' or $productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbCrossExchangeId"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbCrossExchangeId"/></xsl:when><xsl:otherwise/></xsl:choose></xsl:if></DcExchangeID><DcDeltaOptionQuantity><xsl:if test="$productType='Equity Share Option' or $productType='Equity Index Option' or $productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDeltaCross/fpml:swbDeltaOptionQuantity"/></xsl:if></DcDeltaOptionQuantity><AveragingInOut><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:asian/fpml:averagingInOut"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2/fpml:averagingInOut"/></AveragingInOut><AveragingDateTimes><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:asian/fpml:averagingPeriodOut/fpml:averagingDateTimes/fpml:dateTime"><AveragingDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></AveragingDate></xsl:for-each><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2/fpml:averagingDateTimes/fpml:dateTime"><AveragingDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></AveragingDate></xsl:for-each></AveragingDateTimes><MarketDisruption><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:feature/fpml:asian/fpml:averagingPeriodOut/fpml:marketDisruption"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2/fpml:marketDisruption"/></MarketDisruption><AveragingFrequency><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbAveragingDates/fpml:swbAveragingFrequency"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2/fpml:swbAveragingFrequency"/></AveragingFrequency><AveragingStartDate><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2/fpml:swbAveragingStart)"/></xsl:call-template></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbAveragingDates"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbAveragingDates/fpml:swbAveragingStart)"/></xsl:call-template></xsl:if></AveragingStartDate><AveragingEndDate><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDates2/fpml:swbAveragingEnd)"/></xsl:call-template></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbAveragingDates"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbAveragingDates/fpml:swbAveragingEnd)"/></xsl:call-template></xsl:if></AveragingEndDate><ReferenceFXRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbReferenceFXRate"/></ReferenceFXRate><HedgeLevel><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbEquityOptionPercentInput/fpml:swbHedgeLevel"/></HedgeLevel><Basis><xsl:if test="$productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbEquityOptionPercentInput/fpml:swbBasis"/></xsl:if></Basis><ImpliedLevel><xsl:if test="$productType='Equity Index Option'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbEquityOptionPercentInput/fpml:swbImpliedLevel"/></xsl:if></ImpliedLevel><PremiumPercent><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbEquityOptionPercentInput/fpml:swbPremiumPercentage"/></PremiumPercent><StrikePercent><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbEquityOptionPercentInput/fpml:swbStrikePercentage"/></StrikePercent><BaseNotional><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbEquityOptionPercentInput/fpml:swbNotional/fpml:amount"/></BaseNotional><BreakOutTrade><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDividendSwapDetails/fpml:swbBreakOutTrade"/></BreakOutTrade><SplitCollateral><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDividendSwapDetails/fpml:swbSplitCollateral"/></SplitCollateral><OpenUnits><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:underlyer/fpml:singleUnderlyer/fpml:openUnits"/></OpenUnits><DeclaredCashDividendPercentage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:declaredCashDividendPercentage"/></DeclaredCashDividendPercentage><DeclaredCashEquivalentDividendPercentage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:declaredCashEquivalentDividendPercentage"/></DeclaredCashEquivalentDividendPercentage><DividendPayer><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:payerPartyReference/@href"/></DividendPayer><DividendReceiver><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:receiverPartyReference/@href"/></DividendReceiver><DividendPeriods><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:dividendPeriod"><DividendPeriod><DividendPeriodId><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:dividendPeriod/@id"/><xsl:value-of select="@id"/></DividendPeriodId><UnadjustedStartDate><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg//fpml:unadjustedStartDate"/><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:unadjustedStartDate)"/></xsl:call-template></UnadjustedStartDate><UnadjustedEndDate><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg//fpml:unadjustedEndDate"/><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:unadjustedEndDate)"/></xsl:call-template></UnadjustedEndDate><PaymentDateReference><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:dividendPeriod/fpml:paymentDate/@id"/><xsl:value-of select="fpml:paymentDate/@id"/></PaymentDateReference><FixedStrike><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg//fpml:fixedStrike"/><xsl:value-of select="fpml:fixedStrike"/></FixedStrike><DividendValuationDateReference><xsl:for-each select="fpml:swLongFormTrade/fpml:swStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:dividendPeriod/fpml:valuationDate/@id"/><xsl:value-of select="fpml:valuationDate/@id"/></DividendValuationDateReference><DividendValuationDate><xsl:for-each select="fpml:swLongFormTrade/fpml:swStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:dividendPeriod/fpml:valuationDate/fpml:adjustableDate/fpml:unadjustedDate"/><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:valuationDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></DividendValuationDate></DividendPeriod></xsl:for-each></DividendPeriods><SpecialDividends><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:specialDividends"/></SpecialDividends><MaterialDividend><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:dividendLeg/fpml:materialDividend"/></MaterialDividend><FixedPayer><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:fixedLeg/fpml:payerPartyReference/@href"/></FixedPayer><FixedReceiver><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:fixedLeg/fpml:receiverPartyReference/@href"/></FixedReceiver><FixedPeriods><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:fixedLeg/fpml:fixedPayment"><FixedPayment><DivSwapFixedAmount><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:fixedLeg/fpml:fixedPayment/fpml:paymentAmount/fpml:amount"/><xsl:value-of select="fpml:paymentAmount/fpml:amount"/></DivSwapFixedAmount><DivSwapFixedDateOffset><xsl:for-each select="fpml:swLongFormTrade/fpml:swStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:fixedLeg/fpml:fixedPayment/fpml:paymentDate/fpml:periodMultiplier"/><xsl:value-of select="fpml:paymentDate/fpml:periodMultiplier"/></DivSwapFixedDateOffset><DivSwapFixedDateRelativeTo><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:dividendSwapTransactionSupplement/fpml:fixedLeg/fpml:fixedPayment/fpml:paymentDate/fpml:dateRelativeTo/@href"/><xsl:value-of select="fpml:paymentDate/fpml:dateRelativeTo/@href"/></DivSwapFixedDateRelativeTo></FixedPayment></xsl:for-each></FixedPeriods><VegaNotional><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:vegaNotionalAmount"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swVegaNotionalAmount"/></VegaNotional><ExpectedN><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:expectedN"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swExpectedN"/></ExpectedN><ExpectedNOverride><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVarianceSwapDetails/fpml:swbExpectedNOverride"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVarianceSwapDetails/fpml:swbExpectedNOverride"/></xsl:when><xsl:otherwise>false</xsl:otherwise></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVolatilitySwapDetails/fpml:swbExpectedNOverride"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVolatilitySwapDetails/fpml:swbExpectedNOverride"/></xsl:when><xsl:otherwise>false</xsl:otherwise></xsl:choose></xsl:if></ExpectedNOverride><VarianceAmount><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:varianceAmount/fpml:amount"/></VarianceAmount><VarianceStrikePrice><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:varianceStrikePrice"/></xsl:if></VarianceStrikePrice><VolatilityStrikePrice><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVarianceSwapDetails/fpml:volatilityStrikePrice"/></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swVolatilityStrikePrice"/></xsl:if></VolatilityStrikePrice><VarianceCapIndicator><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:value-of select="string(boolean(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:varianceCap='true'))"/></xsl:if></VarianceCapIndicator><VolatilityCapIndicator><xsl:value-of select="string(boolean(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swVolatilityCap='true'))"/></VolatilityCapIndicator><VarianceCapFactor><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:unadjustedVarianceCap"/></VarianceCapFactor><TotalVolatilityCap><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVolatilitySwapDetails/fpml:swTotalVolatilityCap"/></TotalVolatilityCap><VolatilityCapFactor><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swVolatilityCapFactor"/></VolatilityCapFactor><ObservationStartDate><xsl:if test="$productType = 'Share Variance Swap' or $productType='Index Variance Swap'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:observationStartDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if><xsl:if test="$productType = 'Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:observationStartDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></ObservationStartDate><ValuationDate><xsl:if test="$productType = 'Share Variance Swap' or $productType='Index Variance Swap'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityValuation/fpml:valuationDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if><xsl:if test="$productType = 'Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:valuation/fpml:valuationDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></ValuationDate><InitialSharePriceOrIndexLevel><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:initialLevel"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swInitialLevel"/></InitialSharePriceOrIndexLevel><ClosingSharePriceOrClosingIndexLevelIndicator><xsl:if test="$productType='Share Variance Swap' or $productType='Index Variance Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:closingLevel='true'">Closing</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:variance/fpml:expiringLevel='true'">Expiring</xsl:when><xsl:otherwise>Specified</xsl:otherwise></xsl:choose></xsl:if><xsl:if test="$productType='Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swInitialLevelSource='ClosingPrice'">Closing</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swInitialLevelSource='ExpiringContractLevel'">Expiring</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swInitialLevelSource='OSPPricing' and $docsType='IVS1OpenMarkets'">OSPPricing</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:swVolatility/fpml:swInitialLevelSource='IndexClosePricing' and $docsType='IVS1OpenMarkets'">IndexClosePricing</xsl:when><xsl:otherwise>Specified</xsl:otherwise></xsl:choose></xsl:if></ClosingSharePriceOrClosingIndexLevelIndicator><FuturesPriceValuation><xsl:choose><xsl:when test="$productType = 'Share Variance Swap' or $productType='Index Variance Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityValuation/fpml:futuresPriceValuation"/></xsl:when><xsl:when test="($productType='Equity Index Option' and ($docsType='ISDA2005EquityAsiaExcludingJapanInterdealer' or $docsType= 'EquityOptionAEJPrivate' or $docsType='ISDA2008EquityAsiaExcludingJapan' or $docsType='Equity Options (AEJ)' or $docsType='ISDA2004EquityAmericasInterdealer' or $docsType='ISDA2008EquityAmericas' or $docsType='ISDA2009EquityAmericas' or $docsType='EquityOptionAmericasPrivate' or $docsType='Equity Options (Americas)' or $docsType='ISDA2010EquityEMEAInterdealer' or $docsType='EquityOptionEMEAPrivate' or $docsType='2004EquityEuropeanInterdealer' or $docsType='ISDA2007EquityEuropean' or $docsType='EquityOptionEuropePrivate' or $docsType='ISDA2008EquityJapanese' or $docsType='ISDA2005EquityJapaneseInterdealer')) or ($productType='Equity Share Option' and ($docsType = 'EquityOptionAEJPrivate' or $docsType = 'EquityOptionAmericasPrivate' or $docsType = 'EquityOptionEMEAPrivate' or $docsType = 'EquityOptionEuropePrivate'))"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:equityValuation/fpml:futuresPriceValuation"/></xsl:when><xsl:when test="$productType = 'Equity Share Volatility Swap' or $productType='Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:valuation/fpml:futuresPriceValuation"/></xsl:when></xsl:choose></FuturesPriceValuation><AllDividends><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:varianceLeg/fpml:equityAmount/fpml:allDividends"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:swAmount/fpml:allDividends"/></AllDividends><SettlementCurrencyVegaNotional><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVarianceSwapDetails/fpml:swbSettlementCurrencyVegaNotionalAmount"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVolatilitySwapDetails/fpml:swbSettlementCurrencyVegaNotionalAmount"/></SettlementCurrencyVegaNotional><VegaFxRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVarianceSwapDetails/fpml:swbVegaFxSpotRate"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVolatilitySwapDetails/fpml:swbVegaFxSpotRate"/></VegaFxRate><HolidayDates><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbVolatilitySwapDetails/fpml:swbVolatilitySwapHolidayDate"><HolidayDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></HolidayDate></xsl:for-each></HolidayDates><IndependentAmount><Payer><xsl:variable name="payer"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:collateral/fpml:independentAmount/fpml:payerPartyReference/@href"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbIndependentAmountPercentage/fpml:payerPartyReference/@href"/></xsl:variable><xsl:choose><xsl:when test="$payer=$partyA">A</xsl:when><xsl:when test="$payer=$partyB">B</xsl:when></xsl:choose></Payer><Currency><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:fxFeature/fpml:referenceCurrency"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:fxFeature/fpml:referenceCurrency"/></xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:swVolatilitySwapTransactionSupplement/fpml:swVolatilityLeg/fpml:settlementCurrency"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:collateral/fpml:independentAmount/fpml:paymentDetail/fpml:paymentAmount/fpml:currency"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbIndependentAmountPercentage/fpml:currency"/></xsl:otherwise></xsl:choose></Currency><Amount><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:collateral/fpml:independentAmount/fpml:paymentDetail/fpml:paymentAmount/fpml:amount"/></Amount><IndependentAmountPercentage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbIndependentAmountPercentage/fpml:swIAPercentage"/></IndependentAmountPercentage></IndependentAmount><xsl:apply-templates select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:otherPartyPayment"/><SettlementRateOption/><SettlementRateOption_2/><FxFixingAdjustableDate/><FxFixingPeriod/><FxFixingDayConvention/><FxFixingCentres/><FxFixingPeriod_2/><FxFixingDayConvention_2/><FxFixingCentres_2/><CalcAgentA/><DefaultSettlementMethod><xsl:if test="$productType='Equity Share Option'"><xsl:variable name="settlementType" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:settlementType)"/><xsl:if test="$settlementType='Election'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbDefaultSettlementMethod"/></xsl:if></xsl:if></DefaultSettlementMethod><SettlementPriceDefaultElectionMethod><xsl:if test="$productType='Equity Share Option' or $productType='Equity Share Option Strategy'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquityOptionDetails/fpml:swbSettlementPriceDefaultElection"/></xsl:if></SettlementPriceDefaultElectionMethod><SettlementMethodElectionDate><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:settlementMethodElectionDate/fpml:adjustableDate/fpml:unadjustedDate or fpml:swShortFormTrade/fpml:swEquityOptionParameters/fpml:swSettlementMethodElectionDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:settlementMethodElectionDate/fpml:adjustableDate/fpml:unadjustedDate )"/></xsl:call-template></xsl:if></SettlementMethodElectionDate><SettlementMethodElectingParty><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equityOptionTransactionSupplement/fpml:equityExercise/fpml:settlementMethodElectingPartyReference/@href"/></SettlementMethodElectingParty><NotionalFutureValue/><DispLegs><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg"><DispLeg><DispLegId><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//legId"/><xsl:value-of select="fpml:legIdentifier/fpml:legId"/></DispLegId><DispLegVersionId><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//version"/><xsl:value-of select="fpml:legIdentifier/fpml:version"/></DispLegVersionId><DispLegPayer><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg"/><xsl:value-of select="fpml:payerPartyReference/@href"/></DispLegPayer><DispLegReceiver><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg"/><xsl:value-of select="fpml:receiverPartyReference/@href"/></DispLegReceiver><DispEquityRic><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:instrumentId"/><xsl:value-of select="fpml:underlyer/fpml:singleUnderlyer//fpml:instrumentId"/></DispEquityRic><DispEquityRelEx><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:relatedExchangeId"/><xsl:value-of select="fpml:underlyer/fpml:singleUnderlyer//fpml:relatedExchangeId"/></DispEquityRelEx><DispVegaNotional><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:vegaNotionalAmount"/><xsl:value-of select="fpml:amount/fpml:variance/fpml:vegaNotionalAmount"/></DispVegaNotional><DispExpectedN><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:expectedN"/><xsl:value-of select="fpml:amount/fpml:variance/fpml:expectedN"/></DispExpectedN><DispSettlementDateOffset><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:periodMultiplier"/><xsl:value-of select="fpml:settlementDate/fpml:relativeDate/fpml:periodMultiplier"/></DispSettlementDateOffset><DispVarianceAmount><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:amount/fpml:variance/fpml:varianceAmount/fpml:amount"/><xsl:value-of select="fpml:amount/fpml:variance/fpml:varianceAmount/fpml:amount"/></DispVarianceAmount><DispShareVarCurrency><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:amount/fpml:variance/fpml:varianceAmount/fpml:currency"/><xsl:value-of select="fpml:amount/fpml:variance/fpml:varianceAmount/fpml:currency"/></DispShareVarCurrency><DispVarianceStrikePrice><xsl:for-each select="//fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:varianceStrikePrice"/><xsl:value-of select="fpml:amount/fpml:variance/fpml:varianceStrikePrice"/></DispVarianceStrikePrice><DispVarianceCapIndicator><xsl:value-of select="string(boolean(fpml:amount/fpml:variance/fpml:varianceCap='true'))"/></DispVarianceCapIndicator><DispVarianceCapFactor><xsl:value-of select="fpml:amount/fpml:variance/fpml:unadjustedVarianceCap"/></DispVarianceCapFactor><DispVegaNotionalAmount><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:vegaNotionalAmount"/><xsl:value-of select="fpml:amount/fpml:variance/fpml:vegaNotionalAmount"/></DispVegaNotionalAmount><DispObservationStartDate><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg"/><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:amount/fpml:observationStartDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></DispObservationStartDate><DispValuationDate><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg"/><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:valuation/fpml:valuationDate//fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></DispValuationDate><DispInitialLevel><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg/fpml:amount/fpml:variance//fpml:initialLevel"/><xsl:value-of select="fpml:amount/fpml:variance/fpml:initialLevel"/></DispInitialLevel><DispClosingLevelIndicator><xsl:choose><xsl:when test="fpml:amount/fpml:variance/fpml:closingLevel='true'">Closing</xsl:when><xsl:when test="fpml:amount/fpml:variance/fpml:expiringLevel='true'">Expiring</xsl:when><xsl:otherwise>Specified</xsl:otherwise></xsl:choose></DispClosingLevelIndicator><DispFuturesPriceValuation><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:futuresPriceValuation"/><xsl:value-of select="fpml:valuation/fpml:futuresPriceValuation"/></DispFuturesPriceValuation><DispAllDividends><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:varianceSwapTransactionSupplement/fpml:varianceLeg//fpml:allDividends"/><xsl:value-of select="fpml:amount/fpml:allDividends"/></DispAllDividends></DispLeg></xsl:for-each></DispLegs><DispLegsSW><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDispersionVarianceSwapDetails/fpml:swbLegComponentDetails"><DispLegSW><DispCorrespondingLeg><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDispersionVarianceSwapDetails/fpml:swbLegComponentDetails/@id"/><xsl:value-of select="@id"/></DispCorrespondingLeg><DispVolatilityStrikePrice><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDispersionVarianceSwapDetails/fpml:swbLegComponentDetails/fpml:volatilityStrikePrice"/><xsl:value-of select="fpml:volatilityStrikePrice"/></DispVolatilityStrikePrice><DispHolidayDates><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDispersionVarianceSwapDetails/fpml:swbLegComponentDetails"/><xsl:for-each select="fpml:swbVarianceSwapHolidayDate"><HolidayDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></HolidayDate></xsl:for-each></DispHolidayDates><DispExpectedNOverride><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDispersionVarianceSwapDetails/fpml:swbLegComponentDetails//fpml:swbExpectedNOverride"/><xsl:value-of select="fpml:swbExpectedNOverride"/></DispExpectedNOverride><DispShareWeight><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbDispersionVarianceSwapDetails/fpml:swbLegComponentDetails//fpml:swbComponentWeighting"/><xsl:value-of select="fpml:swbComponentWeighting"/></DispShareWeight></DispLegSW></xsl:for-each></DispLegsSW><BalanceOfPeriod/><BulletIndicator><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbBulletIndicator"/></BulletIndicator><BulletFirstContractMonth/><BulletLastContractMonth/><BulletContractYear/><BulletContractTradingDay/><ClearingVenue/><ClientClearing><xsl:value-of select="$idm140368531782656-4/fpml:swbClientClearing"/></ClientClearing><ExternalInteropabilityId><xsl:value-of select="$idm140368531782656-4/fpml:swbExternalInteropabilityId"/></ExternalInteropabilityId><InteropNettingString><xsl:value-of select="$idm140368531782656-4/fpml:swbInteropNettingString"/></InteropNettingString><AutoSendForClearing><xsl:value-of select="$idm140368531782656-4/fpml:swbAutoSendForClearing"/></AutoSendForClearing><ASICMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ASIC']/fpml:swbMandatoryClearingIndicator"/></ASICMandatoryClearingIndicator><PBEBTradeASICMandatoryClearingIndicator><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ASIC']/fpml:swbMandatoryClearingIndicator"/></PBEBTradeASICMandatoryClearingIndicator><PBClientTradeASICMandatoryClearingIndicator><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ASIC']/fpml:swbMandatoryClearingIndicator"/></PBClientTradeASICMandatoryClearingIndicator><CANMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbMandatoryClearingIndicator"/></CANMandatoryClearingIndicator><CANClearingExemptIndicator1PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></CANClearingExemptIndicator1PartyId><CANClearingExemptIndicator1Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></CANClearingExemptIndicator1Value><CANClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531176736-4/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></CANClearingExemptIndicator2PartyId><CANClearingExemptIndicator2Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></CANClearingExemptIndicator2Value><PBEBTradeCANMandatoryClearingIndicator><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbMandatoryClearingIndicator"/></PBEBTradeCANMandatoryClearingIndicator><PBEBTradeCANClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeCANClearingExemptIndicator1PartyId><PBEBTradeCANClearingExemptIndicator1Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBEBTradeCANClearingExemptIndicator1Value><PBEBTradeCANClearingExemptIndicator2PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeCANClearingExemptIndicator2PartyId><PBEBTradeCANClearingExemptIndicator2Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBEBTradeCANClearingExemptIndicator2Value><PBClientTradeCANMandatoryClearingIndicator><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbMandatoryClearingIndicator"/></PBClientTradeCANMandatoryClearingIndicator><PBClientTradeCANClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeCANClearingExemptIndicator1PartyId><PBClientTradeCANClearingExemptIndicator1Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBClientTradeCANClearingExemptIndicator1Value><PBClientTradeCANClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeCANClearingExemptIndicator2PartyId><PBClientTradeCANClearingExemptIndicator2Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='CAN']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBClientTradeCANClearingExemptIndicator2Value><ESMAMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbMandatoryClearingIndicator"/></ESMAMandatoryClearingIndicator><ESMAClearingExemptIndicator1PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></ESMAClearingExemptIndicator1PartyId><ESMAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></ESMAClearingExemptIndicator1Value><ESMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531176736-4/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></ESMAClearingExemptIndicator2PartyId><ESMAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></ESMAClearingExemptIndicator2Value><PBEBTradeESMAMandatoryClearingIndicator><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbMandatoryClearingIndicator"/></PBEBTradeESMAMandatoryClearingIndicator><PBEBTradeESMAClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeESMAClearingExemptIndicator1PartyId><PBEBTradeESMAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBEBTradeESMAClearingExemptIndicator1Value><PBEBTradeESMAClearingExemptIndicator2PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeESMAClearingExemptIndicator2PartyId><PBEBTradeESMAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBEBTradeESMAClearingExemptIndicator2Value><PBClientTradeESMAMandatoryClearingIndicator><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbMandatoryClearingIndicator"/></PBClientTradeESMAMandatoryClearingIndicator><PBClientTradeESMAClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeESMAClearingExemptIndicator1PartyId><PBClientTradeESMAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBClientTradeESMAClearingExemptIndicator1Value><PBClientTradeESMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeESMAClearingExemptIndicator2PartyId><PBClientTradeESMAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='ESMA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBClientTradeESMAClearingExemptIndicator2Value><FCAMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbMandatoryClearingIndicator"/></FCAMandatoryClearingIndicator><FCAClearingExemptIndicator1PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></FCAClearingExemptIndicator1PartyId><FCAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></FCAClearingExemptIndicator1Value><FCAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531176736-4/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></FCAClearingExemptIndicator2PartyId><FCAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></FCAClearingExemptIndicator2Value><PBEBTradeFCAMandatoryClearingIndicator><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbMandatoryClearingIndicator"/></PBEBTradeFCAMandatoryClearingIndicator><PBEBTradeFCAClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeFCAClearingExemptIndicator1PartyId><PBEBTradeFCAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBEBTradeFCAClearingExemptIndicator1Value><PBEBTradeFCAClearingExemptIndicator2PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeFCAClearingExemptIndicator2PartyId><PBEBTradeFCAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBEBTradeFCAClearingExemptIndicator2Value><PBClientTradeFCAMandatoryClearingIndicator><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbMandatoryClearingIndicator"/></PBClientTradeFCAMandatoryClearingIndicator><PBClientTradeFCAClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeFCAClearingExemptIndicator1PartyId><PBClientTradeFCAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBClientTradeFCAClearingExemptIndicator1Value><PBClientTradeFCAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeFCAClearingExemptIndicator2PartyId><PBClientTradeFCAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='FCA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBClientTradeFCAClearingExemptIndicator2Value><HKMAMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbMandatoryClearingIndicator"/></HKMAMandatoryClearingIndicator><HKMAClearingExemptIndicator1PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></HKMAClearingExemptIndicator1PartyId><HKMAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></HKMAClearingExemptIndicator1Value><HKMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531176736-4/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></HKMAClearingExemptIndicator2PartyId><HKMAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></HKMAClearingExemptIndicator2Value><PBEBTradeHKMAMandatoryClearingIndicator><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbMandatoryClearingIndicator"/></PBEBTradeHKMAMandatoryClearingIndicator><PBEBTradeHKMAClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeHKMAClearingExemptIndicator1PartyId><PBEBTradeHKMAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBEBTradeHKMAClearingExemptIndicator1Value><PBEBTradeHKMAClearingExemptIndicator2PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeHKMAClearingExemptIndicator2PartyId><PBEBTradeHKMAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBEBTradeHKMAClearingExemptIndicator2Value><PBClientTradeHKMAMandatoryClearingIndicator><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbMandatoryClearingIndicator"/></PBClientTradeHKMAMandatoryClearingIndicator><PBClientTradeHKMAClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeHKMAClearingExemptIndicator1PartyId><PBClientTradeHKMAClearingExemptIndicator1Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBClientTradeHKMAClearingExemptIndicator1Value><PBClientTradeHKMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeHKMAClearingExemptIndicator2PartyId><PBClientTradeHKMAClearingExemptIndicator2Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='HKMA']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBClientTradeHKMAClearingExemptIndicator2Value><JFSAMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='JFSA']/fpml:swbMandatoryClearingIndicator"/></JFSAMandatoryClearingIndicator><CFTCMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbMandatoryClearingIndicator"/></CFTCMandatoryClearingIndicator><CFTCClearingExemptIndicator1PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></CFTCClearingExemptIndicator1PartyId><CFTCClearingExemptIndicator1Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></CFTCClearingExemptIndicator1Value><CFTCClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531176736-4/fpml:party[@id=/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></CFTCClearingExemptIndicator2PartyId><CFTCClearingExemptIndicator2Value><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></CFTCClearingExemptIndicator2Value><CFTCInterAffiliateExemption><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbInterAffiliateExemption"/></CFTCInterAffiliateExemption><PBEBTradeCFTCMandatoryClearingIndicator><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbMandatoryClearingIndicator"/></PBEBTradeCFTCMandatoryClearingIndicator><PBEBTradeCFTCClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeCFTCClearingExemptIndicator1PartyId><PBEBTradeCFTCClearingExemptIndicator1Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBEBTradeCFTCClearingExemptIndicator1Value><PBEBTradeCFTCClearingExemptIndicator2PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbInterDealerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBEBTradeCFTCClearingExemptIndicator2PartyId><PBEBTradeCFTCClearingExemptIndicator2Value><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBEBTradeCFTCClearingExemptIndicator2Value><PBEBTradeCFTCInterAffiliateExemption><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbInterAffiliateExemption"/></PBEBTradeCFTCInterAffiliateExemption><PBClientTradeCFTCMandatoryClearingIndicator><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbMandatoryClearingIndicator"/></PBClientTradeCFTCMandatoryClearingIndicator><PBClientTradeCFTCClearingExemptIndicator1PartyId><xsl:value-of select=" /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[1]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeCFTCClearingExemptIndicator1PartyId><PBClientTradeCFTCClearingExemptIndicator1Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[1]/fpml:swbExemption"/></PBClientTradeCFTCClearingExemptIndicator1Value><PBClientTradeCFTCClearingExemptIndicator2PartyId><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=/fpml:SWBML/fpml:swbGiveUp/fpml:swbCustomerTransaction/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[2]/fpml:partyReference/@href]/fpml:partyId"/></PBClientTradeCFTCClearingExemptIndicator2PartyId><PBClientTradeCFTCClearingExemptIndicator2Value><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbPartyExemption[2]/fpml:swbExemption"/></PBClientTradeCFTCClearingExemptIndicator2Value><PBClientTradeCFTCInterAffiliateExemption><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='DoddFrank']/fpml:swbInterAffiliateExemption"/></PBClientTradeCFTCInterAffiliateExemption><MASMandatoryClearingIndicator><xsl:value-of select="$idm140368531782656-4/fpml:swbMandatoryClearing[fpml:swbJurisdiction='MAS']/fpml:swbMandatoryClearingIndicator"/></MASMandatoryClearingIndicator><PBEBTradeMASMandatoryClearingIndicator><xsl:value-of select="$idm140368531182240-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='MAS']/fpml:swbMandatoryClearingIndicator"/></PBEBTradeMASMandatoryClearingIndicator><PBClientTradeMASMandatoryClearingIndicator><xsl:value-of select="$idm140368531181152-3/fpml:swbMandatoryClearing[fpml:swbJurisdiction='MAS']/fpml:swbMandatoryClearingIndicator"/></PBClientTradeMASMandatoryClearingIndicator><ClearingHouseId><xsl:value-of select="$idm140368531782656-4/fpml:swbClearingHouse/fpml:partyId"/></ClearingHouseId><IntendedClearingHouse><xsl:value-of select="$idm140368531782656-4/fpml:swbClearingHouse/fpml:partyId"/></IntendedClearingHouse><TraderId/><TraderId_2/><xsl:if test="$idm140368531782656-4/fpml:swbExecutingBroker and /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient and /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClientClearing='true' and not(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbDisplayPartyLegalEntity) and $isPrimeBrokered='0'"><ExecutingBroker><xsl:value-of select="$partyA"/></ExecutingBroker><ClearingClient><xsl:value-of select="$partyB"/></ClearingClient></xsl:if><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:if test="fpml:partyReference/@href= /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><ClientClearingBroker><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></ClientClearingBroker></xsl:if></xsl:for-each><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:if test="fpml:partyReference/@href= /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbExecutingBroker/@href"><EBClearingBroker><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></EBClearingBroker></xsl:if></xsl:for-each><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:choose><xsl:when test="fpml:partyReference/@href = 'partyA'"><PartyAClearingBroker><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></PartyAClearingBroker></xsl:when></xsl:choose></xsl:for-each><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyClearingBroker"><xsl:choose><xsl:when test="fpml:partyReference/@href = 'partyB'"><PartyBClearingBroker><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></PartyBClearingBroker></xsl:when></xsl:choose></xsl:for-each><DisplayPartyLE_Party><xsl:if test="$idm140368531782656-4/fpml:swbDisplayPartyLegalEntity"><xsl:value-of select="$idm140368531782656-4/fpml:swbDisplayPartyLegalEntity/fpml:partyReference/@href"/></xsl:if></DisplayPartyLE_Party><DisplayPartyLE_Value><xsl:if test="$idm140368531782656-4/fpml:swbDisplayPartyLegalEntity"><xsl:value-of select="$idm140368531782656-4/fpml:swbDisplayPartyLegalEntity/fpml:swbDisplayLE/fpml:partyId"/></xsl:if></DisplayPartyLE_Value><ClearingNettingParty><xsl:if test="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbExecutingBroker/@href"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyA'"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></ClearingNettingParty><ClearingNettingString><xsl:if test="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbExecutingBroker/@href"><xsl:value-of select="fpml:swbNettingString"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyA'"><xsl:value-of select="fpml:swbNettingString"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></ClearingNettingString><ClearingNettingParty_2><xsl:if test="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyB'"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></ClearingNettingParty_2><ClearingNettingString_2><xsl:if test="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:swbNettingString"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyB'"><xsl:value-of select="fpml:swbNettingString"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></ClearingNettingString_2><CreditAcceptanceParty><xsl:if test="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbExecutingBroker/@href"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyA'"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></CreditAcceptanceParty><CreditAcceptanceIssuer><xsl:if test="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbExecutingBroker/@href"><xsl:value-of select="fpml:swbCreditIssuer"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyA'"><xsl:value-of select="fpml:swbCreditIssuer"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></CreditAcceptanceIssuer><CreditAcceptanceToken><xsl:if test="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbExecutingBroker/@href"><xsl:value-of select="fpml:swbToken"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyA'"><xsl:value-of select="fpml:swbToken"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></CreditAcceptanceToken><CreditAcceptanceParty_2><xsl:if test="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyB'"><xsl:value-of select="fpml:partyReference/@href"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></CreditAcceptanceParty_2><CreditAcceptanceIssuer_2><xsl:if test="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:swbCreditIssuer"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyB'"><xsl:value-of select="fpml:swbCreditIssuer"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></CreditAcceptanceIssuer_2><CreditAcceptanceToken_2><xsl:if test="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:swbToken"/></xsl:when><xsl:when test="fpml:partyReference/@href = 'partyB'"><xsl:value-of select="fpml:swbToken"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></CreditAcceptanceToken_2><CommodityReferencePrice/><CommodityReferencePrice_2/><CommonPricing/><DeliveryDates/><DeliveryDates_2/><DeliveryLocation/><FloatCalculationFrequency/><FloatCalculationFrequency_2/><PhysicalCommodity/><PhysicalElectricityProduct/><PhysicalElectricityForceMajeure/><PhysicalGasDeliveryType/><ForwardUnderlyer/><FuturesRollConvention/><FuturesRollConvention_2/><LoadShape/><LoadShape_2/><NotionalLots/><NotionalQuantity/><NotionalQuantity_2/><PricingDayType/><PricingDayType_2/><PricingFrequency/><PricingFrequency_2/><PricingHolidayCentres/><PricingHolidayCentres_2/><PricingLagInterval/><PricingLagInterval_2/><PricingLagSkipInterval/><PricingLagSkipInterval_2/><PricingRange/><PricingRange_2/><SettlementDaysConvention/><SettlementDaysType/><SpecifiedPrice/><SpecifiedPrice_2/><UnitFrequency/><Units/><Units_2/><ValueDate/><ModifiedEquityDelivery/><SettledEntityMatrixSource/><SettledEntityMatrixDate/><AdditionalTerms/><Rule15A-6><xsl:value-of select="fpml:swbComplianceElection/fpml:rule15A-6"/></Rule15A-6><xsl:call-template name="outputCommonReportingFields"><xsl:with-param name="reportingData" select="$reportingData"/><xsl:with-param name="brokerPrivateData" select="$brokerPrivateData"/><xsl:with-param name="partyAPrivateData" select="$partyAPrivateData"/><xsl:with-param name="partyBPrivateData" select="$partyBPrivateData"/></xsl:call-template><xsl:for-each select="$idm140368531915472-2/fpml:swbBusinessConductDetails/fpml:swbMidMarketPrice"><xsl:choose><xsl:when test="fpml:swbUnit | fpml:swbAmount | fpml:swbCurrency"><MidMarketPriceType><xsl:value-of select="fpml:swbUnit"/></MidMarketPriceType><MidMarketPriceValue><xsl:value-of select="fpml:swbAmount"/></MidMarketPriceValue><xsl:choose><xsl:when test="fpml:swbUnit='Price'"><MidMarketPriceCurrency><xsl:value-of select="fpml:swbCurrency"/></MidMarketPriceCurrency></xsl:when><xsl:otherwise><IntentToBlankMidMarketCurrency>true</IntentToBlankMidMarketCurrency></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><IntentToBlankMidMarketPrice>true</IntentToBlankMidMarketPrice></xsl:otherwise></xsl:choose></xsl:for-each><xsl:if test="$productType='Equity Share Swap' or $productType='Equity Index Swap'"><EffectiveDate><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:effectiveDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:effectiveDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></EffectiveDate><TerminationDate><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:terminationDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:terminationDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></TerminationDate><PaymentFrequency><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:period)"/></xsl:call-template></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSchedulingMethod = 'ListDateEntry'"><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swInterestLegPaymentDate/fpml:periodMultiplier"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swInterestLegPaymentDate/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swInterestLegPaymentDate/fpml:period)"/></xsl:call-template></xsl:if></xsl:if></PaymentFrequency></xsl:if><xsl:call-template name="brokerProvidedOrderDetails"><xsl:with-param name="extendedTradeDetails" select="$extendedTradeDetails"/></xsl:call-template><xsl:call-template name="brokerProvidedPackageDetails"><xsl:with-param name="extendedTradeDetails" select="$extendedTradeDetails"/></xsl:call-template><xsl:variable name="swbTradeHeader" select="$idm140368531782656-4"/><AutoProcessing><xsl:value-of select="$swbTradeHeader/fpml:swbAutoProcessing"/></AutoProcessing><AnonymousTrade><xsl:value-of select="$swbTradeHeader/fpml:swbAnonymousTrade"/></AnonymousTrade><GCOffsettingID><xsl:value-of select="$swbTradeHeader/fpml:swbOffsettingTradeId"/></GCOffsettingID><CompressionType><xsl:value-of select="$swbTradeHeader/fpml:swbCompressionType"/></CompressionType><xsl:for-each select="$swbTradeHeader/fpml:swbPartyExecutionMethod"><xsl:if test="fpml:partyReference/@href = 'partyA'"><GCExecutionMethodParty_1><xsl:value-of select="fpml:partyReference/@href"/></GCExecutionMethodParty_1><GCExecutionMethodToken_1><xsl:value-of select="fpml:swbExecutionMethod"/></GCExecutionMethodToken_1></xsl:if></xsl:for-each><xsl:for-each select="$swbTradeHeader/fpml:swbPartyExecutionMethod"><xsl:if test="fpml:partyReference/@href = 'partyB'"><GCExecutionMethodParty_2><xsl:value-of select="fpml:partyReference/@href"/></GCExecutionMethodParty_2><GCExecutionMethodToken_2><xsl:value-of select="fpml:swbExecutionMethod"/></GCExecutionMethodToken_2></xsl:if></xsl:for-each><OTVConfirmation><xsl:value-of select="$swbTradeHeader/fpml:swbOTVConfirmation"/></OTVConfirmation><IntroducingBroker><xsl:if test="$idm140368531782656-4/fpml:swbPartyIntroducingBroker"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyIntroducingBroker"><xsl:if test="fpml:partyReference/@href = 'partyA'"><xsl:value-of select="fpml:swbIntroducingBroker"/></xsl:if></xsl:for-each></xsl:if></IntroducingBroker><IntroducingBroker_2><xsl:if test="$idm140368531782656-4/fpml:swbPartyIntroducingBroker"><xsl:for-each select="$idm140368531782656-4/fpml:swbPartyIntroducingBroker"><xsl:if test="fpml:partyReference/@href = 'partyB'"><xsl:value-of select="fpml:swbIntroducingBroker"/></xsl:if></xsl:for-each></xsl:if></IntroducingBroker_2><OriginatingEvent><xsl:value-of select="$swbTradeHeader/fpml:swbOriginatingEvent"/></OriginatingEvent><xsl:if test="$productType='Equity Share Swap' or $productType='Equity Index Swap'"><xsl:call-template name="EquitySwapDetails"/></xsl:if><EswChinaConnectFlag><xsl:if test="//fpml:swbExtendedTradeDetails/fpml:swbChinaConnect"><xsl:choose><xsl:when test="//fpml:swbExtendedTradeDetails/fpml:swbChinaConnect">true</xsl:when><xsl:otherwise>false</xsl:otherwise></xsl:choose></xsl:if></EswChinaConnectFlag><xsl:if test="//fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swApplicableSideLetters/fpml:sw2021ISDADefs"><sw2021ISDADefs><xsl:value-of select="//fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swApplicableSideLetters/fpml:sw2021ISDADefs"/></sw2021ISDADefs></xsl:if><EswChinaConnect><xsl:if test="//fpml:swbExtendedTradeDetails/fpml:swbChinaConnect"><EswShareDisqualification><xsl:value-of select="//fpml:swbExtendedTradeDetails/fpml:swbChinaConnect/fpml:swbShareDisqualification"/></EswShareDisqualification><EswServiceTermination><xsl:value-of select="//fpml:swbExtendedTradeDetails/fpml:swbChinaConnect/fpml:swbServiceTermination"/></EswServiceTermination></xsl:if></EswChinaConnect></Trade></xsl:template><xsl:template match="additionalPayment"><xsl:variable name="paymentType" select="string(fpml:paymentType)"/><xsl:choose><xsl:when test="$paymentType='Premium'"><xsl:call-template name="premium"/></xsl:when><xsl:otherwise><xsl:apply-templates select="."/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="fpml:swbPartyClearingDetails"><PartyClearingDetails><Party><xsl:variable name="party" select="string(fpml:partyReference/@href)"/><xsl:choose><xsl:when test="$party='partyA'">A</xsl:when><xsl:when test="$party='partyB'">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Party><ClearingStatus><xsl:value-of select="fpml:swbClearingStatus"/></ClearingStatus><ClearingHouseTradeID><xsl:value-of select="fpml:swbClearingHouseTradeID"/></ClearingHouseTradeID><ClearingHouseUpfrontFeeSettlementDate><xsl:value-of select="fpml:swbClearingHouseUpfrontFeeSettlementDate"/></ClearingHouseUpfrontFeeSettlementDate><ClearingHousePreferredISIN><xsl:value-of select="fpml:swbClearingHousePreferredISIN"/></ClearingHousePreferredISIN><ClearedTimestamp><xsl:value-of select="fpml:swbClearedTimestamp"/></ClearedTimestamp><ClearedUSINamespace><xsl:value-of select="fpml:swbClearedUSI/fpml:swbIssuer"/></ClearedUSINamespace><ClearedUSI><xsl:value-of select="fpml:swbClearedUSI/fpml:swbTradeId"/></ClearedUSI><ClearedUTINamespace><xsl:value-of select="fpml:swbClearedUTI/fpml:swbIssuer"/></ClearedUTINamespace><ClearedUTI><xsl:value-of select="fpml:swbClearedUTI/fpml:swbTradeId"/></ClearedUTI></PartyClearingDetails></xsl:template><xsl:template match="fpml:swbRecipient"><Recipient><Id><xsl:value-of select="./@id"/></Id><xsl:variable name="party" select="string(fpml:partyReference/@href)"/><Party><xsl:choose><xsl:when test="$party=$partyA">A</xsl:when><xsl:when test="$party=$partyB">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Party><UserName><xsl:value-of select="$idm140368531915472-4/fpml:tradeHeader/fpml:partyTradeInformation[fpml:partyReference/@href=$party]/fpml:trader"/></UserName><TradingBook><xsl:value-of select="fpml:swbTradingBookId"/></TradingBook><ExecutionMode/></Recipient></xsl:template><xsl:template match="fpml:additionalPayment"><AdditionalPayment><Payer><xsl:variable name="payer" select="string(fpml:payerPartyReference/@href)"/><xsl:choose><xsl:when test="$payer=$partyA">A</xsl:when><xsl:when test="$payer=$partyB">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Payer><Reason><xsl:value-of select="fpml:paymentType"/></Reason><Currency><xsl:value-of select="fpml:paymentAmount/fpml:currency"/></Currency><Amount><xsl:value-of select="fpml:paymentAmount/fpml:amount"/></Amount><Date><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:paymentDate/fpml:unadjustedDate)"/></xsl:call-template></Date><Convention><xsl:value-of select="substring(fpml:paymentDate/fpml:dateAdjustments/fpml:businessDayConvention,1,4)"/></Convention><Holidays><xsl:apply-templates select="fpml:paymentDate/fpml:dateAdjustments/fpml:businessCenters"/></Holidays></AdditionalPayment></xsl:template><xsl:template name="premium"/><xsl:template match="fpml:otherPartyPayment"><Brokerage><Payer><xsl:variable name="payer" select="string(fpml:payerPartyReference/@href)"/><xsl:choose><xsl:when test="$payer=$partyA">A</xsl:when><xsl:when test="$payer=$partyB">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Payer><Currency><xsl:choose><xsl:when test="fpml:paymentAmount/fpml:currency='XXX' and fpml:paymentAmount/fpml:amount='0'"/><xsl:otherwise><xsl:value-of select="fpml:paymentAmount/fpml:currency"/></xsl:otherwise></xsl:choose></Currency><Amount><xsl:choose><xsl:when test="fpml:paymentAmount/fpml:currency='XXX' and fpml:paymentAmount/fpml:amount='0'"/><xsl:otherwise><xsl:value-of select="fpml:paymentAmount/fpml:amount"/></xsl:otherwise></xsl:choose></Amount><Broker><xsl:variable name="version" select="string(/fpml:SWBML/@version)"/><xsl:variable name="broker" select="string(fpml:receiverPartyReference/@href)"/><xsl:value-of select="$idm140368531915472-3/fpml:party[@id=$broker]/fpml:partyId"/></Broker><BrokerTradeId><xsl:variable name="version" select="string(/fpml:SWBML/@version)"/><xsl:variable name="party" select="string(fpml:payerPartyReference/@href)"/><xsl:value-of select="$idm140368531915472-4/fpml:tradeHeader/fpml:partyTradeIdentifier/fpml:partyReference[@href=$party]/../fpml:tradeId"/></BrokerTradeId></Brokerage></xsl:template><xsl:template match="fpml:allocatedNotional"><AllocatedNotional><Currency><xsl:value-of select="fpml:currency"/></Currency><Amount><xsl:value-of select="fpml:amount"/></Amount></AllocatedNotional></xsl:template><xsl:template match="fpml:independentAmount"><AllocationIndependentAmount><Payer><xsl:value-of select="fpml:payerPartyReference/@href"/></Payer><Currency><xsl:value-of select="fpml:paymentDetail/fpml:paymentAmount/fpml:currency"/></Currency><Amount><xsl:value-of select="fpml:paymentDetail/fpml:paymentAmount/fpml:amount"/></Amount></AllocationIndependentAmount></xsl:template><xsl:template match="fpml:swbAllocation/fpml:otherPartyPayment"><AllocationOtherPartyPayment><Payer><xsl:value-of select="fpml:payerPartyReference/@href"/></Payer><Receiver><xsl:value-of select="fpml:receiverPartyReference/@href"/></Receiver><Currency><xsl:choose><xsl:when test="fpml:paymentAmount/fpml:currency='XXX' and fpml:paymentAmount/fpml:amount='0'"/><xsl:otherwise><xsl:value-of select="fpml:paymentAmount/fpml:currency"/></xsl:otherwise></xsl:choose></Currency><Amount><xsl:choose><xsl:when test="fpml:paymentAmount/fpml:currency='XXX' and fpml:paymentAmount/fpml:amount='0'"/><xsl:otherwise><xsl:value-of select="fpml:paymentAmount/fpml:amount"/></xsl:otherwise></xsl:choose></Amount></AllocationOtherPartyPayment></xsl:template><xsl:template name="fpml:swbAllocations"><xsl:apply-templates select="$idm140368531918256-1/fpml:swbAllocations/fpml:swbAllocation"/></xsl:template><xsl:template match="fpml:swbAllocation"><xsl:variable name="reportingAllocationData.rtf"><xsl:apply-templates select="fpml:swbAllocationReportingDetails/node()" mode="mapReportingData"/></xsl:variable><Allocation><xsl:choose><xsl:when test="$idm140368531918256-1/fpml:swbAllocations/fpml:swbAllocation/fpml:payerPartyReference"><xsl:variable name="PayerRef" select="string(fpml:payerPartyReference/@href)"/><xsl:variable name="ReceiverRef" select="string(fpml:receiverPartyReference/@href)"/><xsl:variable name="PayerBIC" select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=$PayerRef]/fpml:partyId)"/><xsl:variable name="ReceiverBIC" select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=$ReceiverRef]/fpml:partyId)"/><Payer><xsl:value-of select="$PayerBIC"/></Payer><Receiver><xsl:value-of select="$ReceiverBIC"/></Receiver></xsl:when><xsl:otherwise><xsl:variable name="BuyerRef" select="string(fpml:buyerPartyReference/@href)"/><xsl:variable name="SellerRef" select="string(fpml:sellerPartyReference/@href)"/><xsl:variable name="BuyerBIC" select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=$BuyerRef]/fpml:partyId)"/><xsl:variable name="SellerBIC" select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:party[@id=$SellerRef]/fpml:partyId)"/><Payer><xsl:value-of select="$BuyerBIC"/></Payer><Receiver><xsl:value-of select="$SellerBIC"/></Receiver></xsl:otherwise></xsl:choose><swbStreamReference><xsl:value-of select="fpml:swbStreamReference/@href"/></swbStreamReference><xsl:apply-templates select="fpml:allocatedNotional"/><AllocatedNumberOfOptions><xsl:value-of select="fpml:swbAllocatedNumberOfOptions"/></AllocatedNumberOfOptions><AllocatedVegaNotional><xsl:value-of select="fpml:swbAllocatedVegaNotional"/></AllocatedVegaNotional><AllocatedVarianceAmount><xsl:value-of select="fpml:swbAllocatedVarianceAmount"/></AllocatedVarianceAmount><AllocatedUnits><xsl:value-of select="fpml:swbAllocatedUnits"/></AllocatedUnits><xsl:apply-templates select="fpml:independentAmount"/><swbBrokerTradeId><xsl:value-of select="fpml:swbBrokerTradeId"/></swbBrokerTradeId><xsl:apply-templates select="fpml:otherPartyPayment"/><AllocationClearingBroker><ClientClearingBroker><xsl:for-each select="fpml:swbPartyClearingBroker"><xsl:if test="fpml:PartyReference/@href= /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbClearingClient/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:if></xsl:for-each></ClientClearingBroker><EBClearingBroker><xsl:for-each select="fpml:swbPartyClearingBroker"><xsl:if test="fpml:PartyReference/@href= /fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbTradeHeader/fpml:swbExecutingBroker/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:if></xsl:for-each></EBClearingBroker></AllocationClearingBroker><AllocationPartyAClearingBroker><xsl:if test="fpml:swbPartyClearingBroker"><xsl:for-each select="fpml:swbPartyClearingBroker"><xsl:choose><xsl:when test="fpml:partyReference/@href = 'partyA'"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationPartyAClearingBroker><AllocationPartyBClearingBroker><xsl:if test="fpml:swbPartyClearingBroker"><xsl:for-each select="fpml:swbPartyClearingBroker"><xsl:choose><xsl:when test="fpml:partyReference/@href = 'partyB'"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationPartyBClearingBroker><AllocationPayerClearingBroker><xsl:if test="fpml:swbPartyClearingBroker"><xsl:for-each select="fpml:swbPartyClearingBroker"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:buyerPartyReference/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:when><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:payerPartyReference/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationPayerClearingBroker><AllocationReceiverClearingBroker><xsl:if test="fpml:swbPartyClearingBroker"><xsl:for-each select="fpml:swbPartyClearingBroker"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:sellerPartyReference/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:when><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:receiverPartyReference/@href"><xsl:value-of select="fpml:swbClearingBroker/fpml:partyId"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationReceiverClearingBroker><AllocationNettingParty><xsl:if test="fpml:swbPartyNettingString"><xsl:for-each select="fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:buyerPartyReference/@href"><xsl:variable name="NettingParty" select="string(fpml:partyReference/@href)"/><xsl:value-of select="$idm140368531915472-3//fpml:party[@id=$NettingParty]/fpml:partyId"/></xsl:when><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:payerPartyReference/@href"><xsl:variable name="NettingParty" select="string(fpml:partyReference/@href)"/><xsl:value-of select="$idm140368531915472-3//fpml:party[@id=$NettingParty]/fpml:partyId"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationNettingParty><AllocationNettingString><xsl:if test="fpml:swbPartyNettingString"><xsl:for-each select="fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:buyerPartyReference/@href"><xsl:value-of select="fpml:swbNettingString"/></xsl:when><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:payerPartyReference/@href"><xsl:value-of select="fpml:swbNettingString"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationNettingString><AllocationNettingParty_2><xsl:if test="fpml:swbPartyNettingString"><xsl:for-each select="fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:sellerPartyReference/@href"><xsl:variable name="NettingParty2" select="string(fpml:partyReference/@href)"/><xsl:value-of select="$idm140368531915472-3//fpml:party[@id=$NettingParty2]/fpml:partyId"/></xsl:when><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:receiverPartyReference/@href"><xsl:variable name="NettingParty2" select="string(fpml:partyReference/@href)"/><xsl:value-of select="$idm140368531915472-3//fpml:party[@id=$NettingParty2]/fpml:partyId"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationNettingParty_2><AllocationNettingString_2><xsl:if test="fpml:swbPartyNettingString"><xsl:for-each select="fpml:swbPartyNettingString"><xsl:choose><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:sellerPartyReference/@href"><xsl:value-of select="fpml:swbNettingString"/></xsl:when><xsl:when test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:receiverPartyReference/@href"><xsl:value-of select="fpml:swbNettingString"/></xsl:when></xsl:choose></xsl:for-each></xsl:if></AllocationNettingString_2><AllocationCreditAcceptanceParty><xsl:if test="fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="fpml:swbPartyCreditAcceptanceToken"><xsl:if test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:buyerPartyReference/@href"><xsl:variable name="CreditAcceptanceParty" select="string(fpml:partyReference/@href)"/><xsl:value-of select="$idm140368531915472-3//fpml:party[@id=$CreditAcceptanceParty]/fpml:partyId"/></xsl:if></xsl:for-each></xsl:if></AllocationCreditAcceptanceParty><AllocationCreditAcceptanceIssuer><xsl:if test="fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="fpml:swbPartyCreditAcceptanceToken"><xsl:if test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:buyerPartyReference/@href"><xsl:value-of select="fpml:swbCreditIssuer"/></xsl:if></xsl:for-each></xsl:if></AllocationCreditAcceptanceIssuer><AllocationCreditAcceptanceToken><xsl:if test="fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="fpml:swbPartyCreditAcceptanceToken"><xsl:if test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:buyerPartyReference/@href"><xsl:value-of select="fpml:swbToken"/></xsl:if></xsl:for-each></xsl:if></AllocationCreditAcceptanceToken><AllocationCreditAcceptanceParty_2><xsl:if test="fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="fpml:swbPartyCreditAcceptanceToken"><xsl:if test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:sellerPartyReference/@href"><xsl:variable name="CreditAcceptanceParty2" select="string(fpml:partyReference/@href)"/><xsl:value-of select="$idm140368531915472-3//fpml:party[@id=$CreditAcceptanceParty2]/fpml:partyId"/></xsl:if></xsl:for-each></xsl:if></AllocationCreditAcceptanceParty_2><AllocationCreditAcceptanceIssuer_2><xsl:if test="fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="fpml:swbPartyCreditAcceptanceToken"><xsl:if test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:sellerPartyReference/@href"><xsl:value-of select="fpml:swbCreditIssuer"/></xsl:if></xsl:for-each></xsl:if></AllocationCreditAcceptanceIssuer_2><AllocationCreditAcceptanceToken_2><xsl:if test="fpml:swbPartyCreditAcceptanceToken"><xsl:for-each select="fpml:swbPartyCreditAcceptanceToken"><xsl:if test="fpml:partyReference/@href = /fpml:SWBML/fpml:swbAllocations/fpml:swbAllocation/fpml:sellerPartyReference/@href"><xsl:value-of select="fpml:swbToken"/></xsl:if></xsl:for-each></xsl:if></AllocationCreditAcceptanceToken_2><xsl:apply-templates select="$idm140368531918256-1/fpml:swbAllocations/fpml:swbAllocation/fpml:swbPartyClearingDetails"/><xsl:choose><xsl:when test="function-available('common:node-set')"><xsl:call-template name="outputAllocationReportingFields"><xsl:with-param name="reportingAllocationData" select="common:node-set($reportingAllocationData.rtf)"/><xsl:with-param name="partyIdentifiers" select="common:node-set($partyIdentifiers.rtf)"/></xsl:call-template></xsl:when><xsl:otherwise><xsl:call-template name="outputAllocationReportingFields"><xsl:with-param name="reportingAllocationData" select="$reportingAllocationData.rtf"/><xsl:with-param name="partyIdentifiers" select="$partyIdentifiers.rtf"/></xsl:call-template></xsl:otherwise></xsl:choose></Allocation></xsl:template><xsl:template name="EquitySwapDetails"><Tenor><xsl:call-template name="calculateTenor"><xsl:with-param name="startDate" select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:tradeHeader/fpml:tradeDate)"/><xsl:with-param name="endDate" select="string(/fpml:SWBML/fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></Tenor><InterestLegDrivenIndicator><xsl:choose><xsl:when test="not(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbInterestLegDriven)">false</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbInterestLegDriven"/></xsl:otherwise></xsl:choose></InterestLegDrivenIndicator><EquityFrontStub><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbStubControl/fpml:swbEquityFrontStub"/></EquityFrontStub><EquityEndStub><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbStubControl/fpml:swbEquityEndStub"/></EquityEndStub><InterestFrontStub><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbStubControl/fpml:swbInterestFrontStub"/></InterestFrontStub><InterestEndStub><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbStubControl/fpml:swbInterestEndStub"/></InterestEndStub><FixedRateIndicator><xsl:choose><xsl:when test="not(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFixedRateIndicator)">false</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFixedRateIndicator"/></xsl:otherwise></xsl:choose></FixedRateIndicator><DividendPaymentDates><xsl:variable name="dividendPaymentDates"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:dividendPaymentDate/fpml:dividendDateReference"/></xsl:variable><xsl:choose><xsl:when test="$dividendPaymentDates = 'CashSettlementPaymentDate' ">Cash Settlement Payment Date</xsl:when><xsl:when test="$dividendPaymentDates = 'SharePayment' ">Share Payment</xsl:when><xsl:when test="$dividendPaymentDates = 'RecordDate' ">Record Date</xsl:when><xsl:when test="$dividendPaymentDates = 'TerminationDate' ">Termination Date</xsl:when><xsl:when test="($docsType='EquitySwapAmericasPrivate' or $docsType='EquitySwapAEJPrivate' or $docsType='ISDA2009EquitySwapAmericas' or $docsType='ISDA2005EquitySwapAsiaExcludingJapanInterdealer' or $docsType='ISDA2009EquitySwapPanAsia' or $docsType='ISDA2004EquityAmericasInterdealer' or $docsType='EquitySwapPanAsiaPrivate') and $dividendPaymentDates = '' ">As Specified In Master Confirmation</xsl:when><xsl:when test="$docsType='EquitySwapEuropePrivate' and $dividendPaymentDates = '' ">Cash Settlement Payment Date</xsl:when><xsl:when test="$dividendPaymentDates = 'FloatingAmountPaymentDate' ">Floating Amount Payment Date</xsl:when><xsl:when test="$dividendPaymentDates = 'CashSettlePaymentDateExDiv' ">Cash Settlement Payment Date - Ex Dividend</xsl:when><xsl:when test="$dividendPaymentDates = 'CashSettlePaymentDateIssuerPayment' ">Cash Settlement Payment Date - Issuer Payment</xsl:when><xsl:when test="$dividendPaymentDates = 'ExDividendPaymentDate' ">Ex-Dividend Payment Date</xsl:when><xsl:when test="$dividendPaymentDates = 'ExDate' "><xsl:choose><xsl:when test="$docsType = 'EquitySwapEuropePrivate' and $productType ='Equity Share Swap'">Ex Payment Date</xsl:when><xsl:when test="$docsType = 'ISDA2010FairValueShareSwapEuropeanInterdealer' ">Ex-Dividend Payment Date</xsl:when><xsl:when test="$docsType = 'EmergingEquitySwapIndustry' and $productType = 'Equity Share Swap'">Ex Payment Date</xsl:when><xsl:when test="$docsType = 'EmergingEquitySwapEMEA' and $productType = 'Equity Share Swap'">Ex Payment Date</xsl:when><xsl:when test="$docsType = 'EmergingEquitySwapLATAM' and $productType = 'Equity Share Swap'">Ex Payment Date</xsl:when><xsl:when test="$docsType = 'ISDA2009EquityEuropeanInterdealer' and $productType = 'Equity Share Swap'">Ex Payment Date</xsl:when><xsl:otherwise>ExDate</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></DividendPaymentDates><DividendPaymentOffset><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:dividendPaymentDate/fpml:paymentDateOffset/fpml:periodMultiplier"/></DividendPaymentOffset><EswDividendAmount><xsl:variable name="eswDividendAmount"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:dividendAmount"/></xsl:variable><xsl:choose><xsl:when test="$eswDividendAmount = 'ExAmount'">ExAmount</xsl:when><xsl:when test="$eswDividendAmount = 'RecordAmount'">RecordAmount</xsl:when><xsl:when test="$eswDividendAmount = ''">AsPerMCA</xsl:when><xsl:when test="$eswDividendAmount = 'AsSpecifiedInMasterConfirmation'">AsPerMCA</xsl:when></xsl:choose></EswDividendAmount><EswDividendPeriod><xsl:variable name="eswDividendPeriod"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:dividendPeriod"/></xsl:variable><xsl:choose><xsl:when test="$eswDividendPeriod = 'FirstPeriod'">FirstPeriod</xsl:when><xsl:when test="$eswDividendPeriod = 'SecondPeriod'">SecondPeriod</xsl:when><xsl:when test="$eswDividendPeriod = ''">AsPerMCA</xsl:when></xsl:choose></EswDividendPeriod><DividendPercentage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer/fpml:dividendPayout/fpml:dividendPayoutRatio"/></DividendPercentage><DividendReinvestment><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:dividendReinvestment"/></DividendReinvestment><EswDeclaredCashDividendPercentage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:declaredCashDividendPercentage"/></EswDeclaredCashDividendPercentage><EswDeclaredCashEquivalentDividendPercentage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:declaredCashEquivalentDividendPercentage"/></EswDeclaredCashEquivalentDividendPercentage><EswDividendSettlementCurrency><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:determinationMethod"><xsl:variable name="dividendSettlementCurrencyDetermination"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:determinationMethod"/></xsl:variable><xsl:choose><xsl:when test="$dividendSettlementCurrencyDetermination = 'SettlementCurrency' ">Settlement Currency</xsl:when><xsl:when test="$dividendSettlementCurrencyDetermination = 'IssuerPaymentCurrency' ">Issuer Payment Currency</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></xsl:if></EswDividendSettlementCurrency><EswNonCashDividendTreatment><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:nonCashDividendTreatment"/></EswNonCashDividendTreatment><EswDividendComposition><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:dividendComposition"/></EswDividendComposition><EswSpecialDividends><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:dividendConditions/fpml:specialDividends"/></EswSpecialDividends><EswDividendValuationOffset><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:relativeDateSequence/fpml:dateOffset/fpml:periodMultiplier"/></EswDividendValuationOffset><EswDividendValuationFrequency><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:period)"/></xsl:call-template></EswDividendValuationFrequency><EswDividendInitialValuation><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:periodicDates/fpml:calculationStartDate/fpml:adjustableDate/fpml:unadjustedDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:periodicDates/fpml:calculationStartDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></EswDividendInitialValuation><EswDividendFinalValuation><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:periodicDates/fpml:calculationEndDate/fpml:adjustableDate/fpml:unadjustedDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:periodicDates/fpml:calculationEndDate/fpml:adjustableDate/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></EswDividendFinalValuation><EswDividendValuationDay><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:rollConvention"/></EswDividendValuationDay><EswDividendValuationCustomDatesInterim><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:dividendValuationDates/fpml:adjustableDates/fpml:unadjustedDate"><EswDividendValuationCustomDateInterim><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswDividendValuationCustomDateInterim></xsl:for-each></EswDividendValuationCustomDatesInterim><EswDividendValuationCustomDateFinal><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:adjustableDates/fpml:unadjustedDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:dividendValuationDates/fpml:adjustableDates/fpml:unadjustedDate)"/></xsl:call-template></xsl:if></EswDividendValuationCustomDateFinal><xsl:variable name="schedulingMethod"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSchedulingMethod"/></xsl:variable><EquityHolidayCentres><xsl:if test="$schedulingMethod!='ListDateEntry' or $schedulingMethod='' "><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></xsl:if><xsl:if test="$schedulingMethod='ListDateEntry' and not($schedulingMethod='') "><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:adjustableDates/fpml:dateAdjustments"><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></xsl:when><xsl:when test="($productType='Equity Share Swap' or $productType='Equity Index Swap') and fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessCenters/fpml:businessCenter"><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></xsl:when></xsl:choose></xsl:if></EquityHolidayCentres><OtherValuationBusinessCenters><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbOtherValuationBusinessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></OtherValuationBusinessCenters><EswFuturesPriceValuation><xsl:choose><xsl:when test="not(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:futuresPriceValuation)">false</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:futuresPriceValuation"/></xsl:otherwise></xsl:choose></EswFuturesPriceValuation><EswFpvFinalPriceElectionFallback><xsl:if test="$productType='Equity Index Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:fPVFinalPriceElectionFallback"/></xsl:if></EswFpvFinalPriceElectionFallback><EswDesignatedMaturity><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:indexTenor/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:indexTenor/fpml:period)"/></xsl:call-template></EswDesignatedMaturity><EswEquityValConvention><xsl:if test="$schedulingMethod='ListDateEntry' and not($schedulingMethod='') "><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessDayConvention = 'NotApplicable' ">NA</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessDayConvention != 'NotApplicable' "><xsl:value-of select="substring(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessDayConvention,1,4)"/></xsl:when><xsl:when test="($productType='Equity Share Swap' or $productType='Equity Index Swap') and fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessDayConvention = 'NotApplicable' ">NA</xsl:when><xsl:when test="($productType='Equity Share Swap' or $productType='Equity Index Swap') and fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessDayConvention != 'NotApplicable' "><xsl:value-of select="substring(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessDayConvention,1,4)"/></xsl:when></xsl:choose></xsl:if><xsl:if test="$schedulingMethod!='ListDateEntry' or $schedulingMethod='' "><xsl:value-of select="substring(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessDayConvention,1,4)"/></xsl:if></EswEquityValConvention><EswInterestFloatConvention><xsl:if test="$schedulingMethod='ListDateEntry' and not($schedulingMethod='') "><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessDayConvention = 'NotApplicable' ">NA</xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessDayConvention != 'NotApplicable' "><xsl:value-of select="substring(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessDayConvention,1,4)"/></xsl:if></xsl:if><xsl:if test="$schedulingMethod!='ListDateEntry' or $schedulingMethod='' "><xsl:value-of select="substring(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:periodicDates/fpml:calculationPeriodDatesAdjustments/fpml:businessDayConvention,1,4)"/></xsl:if></EswInterestFloatConvention><EswInterestFloatDayBasis><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:dayCountFraction"/></EswInterestFloatDayBasis><EswInterestFloatingRateIndex><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:floatingRateIndex"/></EswInterestFloatingRateIndex><EswInterestFixedRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:fixedRate"/></EswInterestFixedRate><EswInterestSpreadOverIndex><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:spreadSchedule/fpml:initialValue"/></EswInterestSpreadOverIndex><EswInterestSpreadOverIndexStep><EswInterestSpreadOverIndexStepValue><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:spreadSchedule/fpml:step"><xsl:value-of select="fpml:stepValue"/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></EswInterestSpreadOverIndexStepValue><EswInterestSpreadOverIndexStepDate><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:spreadSchedule/fpml:step"><xsl:value-of select="fpml:stepValue"/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></EswInterestSpreadOverIndexStepDate></EswInterestSpreadOverIndexStep><EswLocalJurisdiction><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:localJurisdiction = 'NotApplicable' ">Not Applicable</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:relevantJurisdiction = 'NotApplicable' ">Not Applicable</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:localJurisdiction"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:relevantJurisdiction"/></xsl:otherwise></xsl:choose></EswLocalJurisdiction><EswReferencePriceSource><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:fxFeature/fpml:crossCurrency/fpml:fxSpotRateSource/fpml:primaryRateSource/fpml:rateSource"/></EswReferencePriceSource><EswReferencePricePage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:fxFeature/fpml:crossCurrency/fpml:fxSpotRateSource/fpml:primaryRateSource/fpml:rateSourcePage"/></EswReferencePricePage><EswReferencePriceTime><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:fxFeature/fpml:crossCurrency/fpml:fxSpotRateSource/fpml:fixingTime/fpml:hourMinuteTime"/></EswReferencePriceTime><EswReferencePriceCity><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:fxFeature/fpml:crossCurrency/fpml:fxSpotRateSource/fpml:fixingTime/fpml:businessCenter"/></EswReferencePriceCity><EswNotionalAmount><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:notional/fpml:notionalAmount/fpml:amount"/></EswNotionalAmount><EswNotionalCurrency><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:notional/fpml:notionalAmount/fpml:currency"/><xsl:if test="not(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTranscationSupplement/fpml:returnLeg/fpml:notional/fpml:notionalAmount/fpml:currency)"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbNotionalCurrency"/></xsl:if></EswNotionalCurrency><EswOpenUnits><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer/fpml:openUnits"/></EswOpenUnits><EswInitialUnits><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:initialUnits"/></EswInitialUnits><FeeIn><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSpreadDetails/fpml:swbSpreadIn"/></FeeIn><FeeInOutIndicator><xsl:value-of select="string(boolean(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSpreadDetails))"/></FeeInOutIndicator><FeeOut><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSpreadDetails/fpml:swbSpreadOut"/></FeeOut><FinalPriceDefaultElection><xsl:variable name="finalPriceDefaultElection"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:determinationMethod"/></xsl:variable><xsl:choose><xsl:when test="$finalPriceDefaultElection = 'HedgeExecution' ">Hedge Execution</xsl:when><xsl:when test="$finalPriceDefaultElection = 'AsSpecifiedInMasterConfirmation' ">As Specified In Master Confirmation</xsl:when><xsl:otherwise><xsl:value-of select="$finalPriceDefaultElection"/></xsl:otherwise></xsl:choose></FinalPriceDefaultElection><FinalValuationDate><xsl:call-template name="formatDate"><xsl:with-param name="date"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:unadjustedDate"/></xsl:with-param></xsl:call-template></FinalValuationDate><FullyFundedAmount><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFullyFunded/fpml:amount"/></FullyFundedAmount><FullyFundedIndicator><xsl:value-of select="string(boolean(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFullyFunded))"/></FullyFundedIndicator><FullyFundedFixedRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFullyFunded/fpml:fixedRate"/></FullyFundedFixedRate><FullyFundedDayCountFract><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFullyFunded/fpml:dayCountFraction"/></FullyFundedDayCountFract><InitialPrice><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:initialPrice/fpml:netPrice/fpml:amount"/></InitialPrice><InitialPriceElection><xsl:variable name="initialPriceElection"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:initialPrice/fpml:determinationMethod"/></xsl:variable><xsl:choose><xsl:when test="$initialPriceElection = 'HedgeExecution' ">Hedge Execution</xsl:when><xsl:when test="$initialPriceElection = 'AgreedInitialPrice' ">Agreed Initial Price</xsl:when><xsl:otherwise><xsl:value-of select="$initialPriceElection"/></xsl:otherwise></xsl:choose></InitialPriceElection><EquityNotionalReset><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:notionalReset"/></EquityNotionalReset><EswReferenceInitialPrice><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbReferenceInitialPrice"/></EswReferenceInitialPrice><EswReferenceFXRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbReferenceFXRate"/></EswReferenceFXRate><PaymentDateOffset><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:paymentDates/fpml:paymentDateFinal/fpml:relativeDate/fpml:periodMultiplier"/><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swPaymentDateOffset"/></PaymentDateOffset><EswPaymentHolidayCentres><xsl:if test="$schedulingMethod='ListDateEntry' and not($schedulingMethod='') "><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:adjustableDates/fpml:dateAdjustments/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></xsl:if><xsl:if test="$schedulingMethod!='ListDateEntry' or $schedulingMethod='' "><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:paymentDates/fpml:paymentDateFinal/fpml:relativeDate/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:paymentDates/fpml:paymentDateFinal/fpml:adjustableDate/fpml:dateAdjustments/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></xsl:if></EswPaymentHolidayCentres><ReturnType><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:return/fpml:returnType"/></ReturnType><Synthetic><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFullyFunded">true</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSpreadDetails">true</xsl:when><xsl:otherwise>false</xsl:otherwise></xsl:choose></Synthetic><ValuationDay><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:rollConvention"/><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSchedulingMethod = 'ListDateEntry'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:rollConvention/fpml:returnLeg"/></xsl:if></ValuationDay><PaymentDay><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:rollConvention"/><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSchedulingMethod = 'ListDateEntry'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:rollConvention/fpml:interestLeg"/></xsl:if></PaymentDay><ValuationFrequency><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:periodicDates"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:period)"/></xsl:call-template></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSchedulingMethod = 'ListDateEntry'"><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swValuationDate/fpml:periodMultiplier"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swValuationDate/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swValuationDate/fpml:period)"/></xsl:call-template></xsl:if></xsl:if></ValuationFrequency><ValuationStartDate><xsl:call-template name="formatDate"><xsl:with-param name="date"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:effectiveDate/fpml:adjustableDate/fpml:unadjustedDate"/></xsl:with-param></xsl:call-template></ValuationStartDate><EswSchedulingMethod><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSchedulingMethod"/></EswSchedulingMethod><EswValuationDates><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleDates/fpml:swValuationDatesInterim/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each><xsl:if test="$schedulingMethod='ListDateEntry' "><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceInterim/fpml:valuationRules/fpml:valuationDates/fpml:adjustableDates/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:valuationPriceFinal/fpml:valuationRules/fpml:valuationDate/fpml:adjustableDate/fpml:unadjustedDate"/></xsl:with-param></xsl:call-template></EswUnadjustedDate></xsl:if></EswValuationDates><EswInterestLegPaymentDates><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleDates/fpml:swbInterestLegPaymentDates/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each><xsl:if test="$schedulingMethod='ListDateEntry' "><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestLegCalculationPeriodDates/fpml:interestLegPaymentDates/fpml:adjustableDates/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each></xsl:if></EswInterestLegPaymentDates><EswEquityLegPaymentDates><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleDates/fpml:swbEquityLegPaymentDates/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each><xsl:if test="$schedulingMethod='ListDateEntry'"><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:paymentDates/fpml:paymentDatesInterim/fpml:adjustableDates/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:rateOfReturn/fpml:paymentDates/fpml:paymentDateFinal/fpml:adjustableDate/fpml:unadjustedDate"/></xsl:with-param></xsl:call-template></EswUnadjustedDate></xsl:if></EswEquityLegPaymentDates><EswCompoundingDates><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleDates/fpml:swbCompoundingDates/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each><xsl:if test="$schedulingMethod='ListDateEntry' "><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:compounding/fpml:compoundingDates/fpml:adjustableDates/fpml:unadjustedDate"><EswUnadjustedDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(.)"/></xsl:call-template></EswUnadjustedDate></xsl:for-each></xsl:if></EswCompoundingDates><EswCompoundingMethod><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:compounding"><xsl:variable name="eswCompoundingMethod"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:compounding/fpml:compoundingMethod"/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:compoundingMethod"/></xsl:variable><xsl:choose><xsl:when test="$eswCompoundingMethod = 'Flat' ">F</xsl:when><xsl:when test="$eswCompoundingMethod = 'None' ">N</xsl:when><xsl:when test="$eswCompoundingMethod = 'Straight' ">S</xsl:when><xsl:when test="$eswCompoundingMethod = 'SpreadExclusive' ">E</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></xsl:if></EswCompoundingMethod><EswCompoundingFrequency><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:compounding "><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:compounding/fpml:compoundingDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:compounding/fpml:compoundingDates/fpml:periodicDates/fpml:calculationPeriodFrequency/fpml:period)"/></xsl:call-template></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbSchedulingMethod = 'ListDateEntry'"><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swCompoundingDate/fpml:periodMultiplier"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swCompoundingDate/fpml:periodMultiplier"/><xsl:call-template name="periodToLowerCase"><xsl:with-param name="period" select="string(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbScheduleFrequencies/fpml:swCompoundingDate/fpml:period)"/></xsl:call-template></xsl:if></xsl:if></EswCompoundingFrequency><EswCalculationMethod><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:calculationMethod or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationMethod"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:calculationMethod"/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationMethod"/></xsl:when><xsl:otherwise>NotApplicable</xsl:otherwise></xsl:choose></EswCalculationMethod><EswApplicableBusinessDays><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:applicableBusinessDays or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:applicableBusinessDays"><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:applicableBusinessDays/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each><xsl:for-each select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:applicableBusinessDays/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></xsl:if></EswApplicableBusinessDays><EswObservationMethod><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationShift or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:observationShift">ObservationPeriodShift</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:lockout or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:lockout">Lockout</xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:lookback or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:lookback">Lookback</xsl:when><xsl:otherwise>NotApplicable</xsl:otherwise></xsl:choose></EswObservationMethod><EswAdditionalBusinessDays><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationShift/fpml:additionalBusinessDays or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationShift/fpml:additionalBusinessDays"><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationShift/fpml:additionalBusinessDays/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each><xsl:for-each select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationShift/fpml:additionalBusinessDays/fpml:businessCenters/fpml:businessCenter"><xsl:value-of select="."/><xsl:if test="position() != last()">; </xsl:if></xsl:for-each></xsl:if></EswAdditionalBusinessDays><EswOffsetDays><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationShift/fpml:offsetDays or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationShift/fpml:offsetDays"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationShift/fpml:offsetDays"/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationShift/fpml:offsetDays"/></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:lockout/fpml:offsetDays or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:lockout/fpml:offsetDays"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:lockout/fpml:offsetDays"/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:lockout/fpml:offsetDays"/></xsl:if><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:lookback/fpml:offsetDays or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:lookback/fpml:offsetDays"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:lookback/fpml:offsetDays"/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:lookback/fpml:offsetDays"/></xsl:if></EswOffsetDays><EswObservationPeriod><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationShift/fpml:observationPeriodDates or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationShift/fpml:observationPeriodDates"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationShift/fpml:observationPeriodDates "/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationShift/fpml:observationPeriodDates"/></xsl:if></EswObservationPeriod><EswDailyCapRate><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationCapRate or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationCapRate"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationCapRate "/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationCapRate"/></xsl:if></EswDailyCapRate><EswDailyFloorRate><xsl:if test="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationFloorRate or fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationFloorRate"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:floatingRateCalculation/fpml:calculationParameters/fpml:observationFloorRate "/><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:observationFloorRate"/></xsl:if></EswDailyFloorRate><EswInterpolationMethod><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:interpolationMethod"/></EswInterpolationMethod><EswInterpolationPeriod><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:interestLeg/fpml:interestCalculation/fpml:interpolationPeriod"/></EswInterpolationPeriod><EswPaymentDaysOffset><xsl:if test="$productType='Equity Index Swap' or $productType='Equity Share Swap'"><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbPaymentDaysOffset"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbPaymentDaysOffset/fpml:periodMultiplier"/></xsl:if><xsl:if test="fpml:swShortFormTrade/fpml:swEquitySwapParameters"><xsl:if test="not(fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:swPaymentDaysOffset/fpml:periodMultiplier)"><xsl:value-of select="fpml:swShortFormTrade/fpml:swEquitySwapParameters/fpml:calculationParameters/fpml:swPaymentDaysOffset/fpml:periodMultiplier"/></xsl:if></xsl:if></xsl:if></EswPaymentDaysOffset><EswAveragingDatesIndicator><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAveragingDatesIndicator"/></EswAveragingDatesIndicator><EswADTVIndicator><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbADTVIndicator"/></EswADTVIndicator><EswLimitationPercentage><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer/fpml:averageDailyTradingVolume/fpml:limitationPercentage"/></EswLimitationPercentage><EswLimitationPeriod><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:returnLeg/fpml:underlyer/fpml:singleUnderlyer/fpml:averageDailyTradingVolume/fpml:limitationPeriod"/></EswLimitationPeriod><EswStockLoanRateIndicator><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbStockLoanRateIndicator"/></EswStockLoanRateIndicator><EswMaximumStockLoanRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbStockLoanRate/fpml:maximumStockLoanRate"/></EswMaximumStockLoanRate><EswInitialStockLoanRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbStockLoanRate/fpml:initialStockLoanRate"/></EswInitialStockLoanRate><EswOptionalEarlyTermination><xsl:choose><xsl:when test="not(fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:optionalEarlyTermination)">AsSpecifiedInMasterConfirmation</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:optionalEarlyTermination"/></xsl:otherwise></xsl:choose></EswOptionalEarlyTermination><EswBreakFundingRecovery><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:breakFundingRecovery"/></EswBreakFundingRecovery><EswBreakFeeElection><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:breakFeeElection"/></EswBreakFeeElection><EswBreakFeeRate><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:breakFeeRate"/></EswBreakFeeRate><EswFinalPriceFee><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFinalPriceFee"/></EswFinalPriceFee><EswFinalPriceFeeAmount><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFinalPriceFeeAmount/fpml:amount"/></EswFinalPriceFeeAmount><EswFinalPriceFeeCurrency><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbFinalPriceFeeAmount/fpml:currency"/></EswFinalPriceFeeCurrency><EswRightToIncrease><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbRightToIncrease"/></EswRightToIncrease><EswGrossPrice><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbGrossPrice"/></EswGrossPrice><EswApplicableRegion><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbApplicableRegion"/></EswApplicableRegion><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbDividendPercentageComponent"><EswDividendComponent><DividendPercentageComponentShare><xsl:value-of select="fpml:dividendPercentageComponentShare"/></DividendPercentageComponentShare><DividendPercentageComponent><xsl:value-of select="fpml:dividendPercentageComponent"/></DividendPercentageComponent></EswDividendComponent></xsl:for-each><EswEarlyFinalValuationDateElection><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbEarlyFinalValuationDateElection"/></EswEarlyFinalValuationDateElection><EswEarlyTerminationElectingParty><xsl:choose><xsl:when test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbEarlyTerminationElectingParty"><xsl:for-each select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbEarlyTerminationElectingParty"><PartyOccurrence><xsl:value-of select="./@href"/></PartyOccurrence></xsl:for-each></xsl:when><xsl:when test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbEarlyTerminationElectingPartyMethod"><PartyOccurrence><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbEarlyTerminationElectingPartyMethod"/></PartyOccurrence></xsl:when><xsl:otherwise/></xsl:choose></EswEarlyTerminationElectingParty><xsl:if test="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails"><xsl:for-each select="//fpml:noticePeriod"><xsl:if test="fpml:noticeParty/@href='partyA'"><NoticePeriodPtyA><xsl:value-of select="fpml:numberOfDays/fpml:periodMultiplier"/></NoticePeriodPtyA></xsl:if><xsl:if test="fpml:noticeParty/@href='partyB'"><NoticePeriodPtyB><xsl:value-of select="fpml:numberOfDays/fpml:periodMultiplier"/></NoticePeriodPtyB></xsl:if></xsl:for-each></xsl:if><EswInsolvencyFiling><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:insolvencyFiling"/></EswInsolvencyFiling><EswLossOfStockBorrow><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:lossOfStockBorrow"/></EswLossOfStockBorrow><EswIncreasedCostOfStockBorrow><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:extraordinaryEvents/fpml:additionalDisruptionEvents/fpml:increasedCostOfStockBorrow"/></EswIncreasedCostOfStockBorrow><EswBulletCompoundingSpread><xsl:if test="$docsType='EquitySwapAmericasPrivate' or $docsType='EquitySwapAEJPrivate' or $docsType='EquitySwapEuropePrivate' or $docsType='EquitySwapGlobalPrivate'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbBulletCompoundingSpread"/></xsl:if></EswBulletCompoundingSpread><EswAdditionalDisruptionEventIndicator><xsl:if test="$productType='Equity Index Swap' and $docsType='ISDA2009EquitySwapAmericas'"><xsl:choose><xsl:when test="not(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAdditionalDisruptionEventIndicator)">false</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbAdditionalDisruptionEventIndicator"/></xsl:otherwise></xsl:choose></xsl:if></EswAdditionalDisruptionEventIndicator><EswOverrideNotionalCalculation><xsl:if test="$productType='Equity Index Swap' or $productType='Equity Share Swap'"><xsl:choose><xsl:when test="not(fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbOverrideNotionalCalculation)">false</xsl:when><xsl:otherwise><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:swbExtendedTradeDetails/fpml:swbEquitySwapDetails/fpml:swbOverrideNotionalCalculation"/></xsl:otherwise></xsl:choose></xsl:if></EswOverrideNotionalCalculation><HedgingParty><xsl:for-each select="//fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:hedgingParty"><HedgingPartyOccurrence><xsl:value-of select="./@href"/></HedgingPartyOccurrence></xsl:for-each></HedgingParty><DeterminingParty><xsl:for-each select="//fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:determiningParty"><DeterminingPartyOccurrence><xsl:value-of select="./@href"/></DeterminingPartyOccurrence></xsl:for-each></DeterminingParty><MultipleExchangeIndexAnnex><xsl:if test="$productType='Equity Index Swap' or $productType='Equity Index Volatility Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:multipleExchangeIndexAnnexFallback"/></xsl:if></MultipleExchangeIndexAnnex><ComponentSecurityIndexAnnex><xsl:if test="$productType='Equity Index Swap'"><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade//fpml:componentSecurityIndexAnnexFallback"/></xsl:if></ComponentSecurityIndexAnnex><EswSpecifiedExchange><xsl:value-of select="fpml:swbStructuredTradeDetails/fpml:FpML/fpml:trade/fpml:equitySwapTransactionSupplement/fpml:extraordinaryEvents/fpml:specifiedExchangeId"/></EswSpecifiedExchange></xsl:template><xsl:template name="formatDate"><xsl:param name="date"/><xsl:variable name="month" select="string(substring($date,6,2))"/><xsl:value-of select="substring($date,9,2)"/>-<xsl:choose><xsl:when test="$month='01'">Jan</xsl:when><xsl:when test="$month='02'">Feb</xsl:when><xsl:when test="$month='03'">Mar</xsl:when><xsl:when test="$month='04'">Apr</xsl:when><xsl:when test="$month='05'">May</xsl:when><xsl:when test="$month='06'">Jun</xsl:when><xsl:when test="$month='07'">Jul</xsl:when><xsl:when test="$month='08'">Aug</xsl:when><xsl:when test="$month='09'">Sep</xsl:when><xsl:when test="$month='10'">Oct</xsl:when><xsl:when test="$month='11'">Nov</xsl:when><xsl:when test="$month='12'">Dec</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose>-<xsl:value-of select="substring($date,1,4)"/></xsl:template><xsl:template name="formatTime"><xsl:param name="time"/><xsl:choose><xsl:when test="$time='09:00:00'">9am</xsl:when><xsl:when test="$time='11:00:00'">11am</xsl:when><xsl:when test="$time='12:00:00'">12noon</xsl:when><xsl:when test="$time='12:30:00'">12.30pm</xsl:when><xsl:when test="$time='15:00:00'">3pm</xsl:when><xsl:when test="$time='00:00:00'">12midnight</xsl:when><xsl:when test="$time='01:00:00'">1am</xsl:when><xsl:when test="$time='02:00:00'">2am</xsl:when><xsl:when test="$time='03:00:00'">3am</xsl:when><xsl:when test="$time='04:00:00'">4am</xsl:when><xsl:when test="$time='05:00:00'">5am</xsl:when><xsl:when test="$time='06:00:00'">6am</xsl:when><xsl:when test="$time='07:00:00'">7am</xsl:when><xsl:when test="$time='08:00:00'">8am</xsl:when><xsl:when test="$time='10:00:00'">10am</xsl:when><xsl:when test="$time='11:30:00'">11.30am</xsl:when><xsl:when test="$time='13:00:00'">1pm</xsl:when><xsl:when test="$time='14:00:00'">2pm</xsl:when><xsl:when test="$time='14:10:00'">2.10pm</xsl:when><xsl:when test="$time='14:15:00'">2.15pm</xsl:when><xsl:when test="$time='14:30:00'">2.30pm</xsl:when><xsl:when test="$time='14:45:00'">2.45pm</xsl:when><xsl:when test="$time='15:15:00'">3.15pm</xsl:when><xsl:when test="$time='16:00:00'">4pm</xsl:when><xsl:when test="$time='16:30:00'">4.30pm</xsl:when><xsl:when test="$time='17:00:00'">5pm</xsl:when><xsl:when test="$time='18:00:00'">6pm</xsl:when><xsl:when test="$time='19:00:00'">7pm</xsl:when><xsl:when test="$time='20:00:00'">8pm</xsl:when><xsl:when test="$time='21:00:00'">9pm</xsl:when><xsl:when test="$time='22:00:00'">10pm</xsl:when><xsl:when test="$time='23:00:00'">11pm</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></xsl:template><xsl:template name="calculateTenor"><xsl:param name="startDate"/><xsl:param name="endDate"/><xsl:variable name="startDateMonth" select="string(number(substring($startDate,6,2)))"/><xsl:variable name="endDateMonth" select="string(number(substring($endDate,6,2)))"/><xsl:variable name="startDateYear" select="string(number(substring($startDate,1,4)))"/><xsl:variable name="endDateYear" select="string(number(substring($endDate,1,4)))"/><xsl:variable name="tenorMultiplier" select="string((($endDateYear - $startDateYear)*12) + ($endDateMonth - $startDateMonth))"/><xsl:choose><xsl:when test="$tenorMultiplier &gt; 1"><xsl:value-of select="concat($tenorMultiplier,'M')"/></xsl:when><xsl:otherwise>1M</xsl:otherwise></xsl:choose></xsl:template><xsl:template name="periodToLowerCase"><xsl:param name="period"/><xsl:choose><xsl:when test="$period='D' ">d</xsl:when><xsl:when test="$period='W' ">w</xsl:when><xsl:when test="$period='M' ">m</xsl:when><xsl:when test="$period='Y' ">y</xsl:when><xsl:when test="$period='T' ">t</xsl:when><xsl:otherwise/></xsl:choose></xsl:template></xsl:stylesheet>