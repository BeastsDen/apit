<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:common="http://exslt.org/common" xmlns:mwrpt="http://www.markitserv.com/swbml-extract-reporting.xsl" exclude-result-prefixes="common mwrpt" version="1.0"><xsl:import href="swbml-extract-reporting.xsl"/><xsl:variable name="SWBML" select="/SWBML"/><xsl:variable name="swbHeader" select="$SWBML/swbHeader"/><xsl:variable name="swaption" select="$SWBML/swbStructuredTradeDetails/FpML/trade/swaption"/><xsl:variable name="isPrimeBrokered"><xsl:choose><xsl:when test="/SWBML/swbGiveUp">1</xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyA"><xsl:choose><xsl:when test="/SWBML/swbGiveUp"><xsl:if test="starts-with(/SWBML//swbInterDealerTransaction/swbExecutingDealer/@href,'#')"><xsl:value-of select="substring-after(/SWBML//swbInterDealerTransaction/swbExecutingDealer/@href,'#')"/></xsl:if></xsl:when><xsl:otherwise>partyA</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyB"><xsl:choose><xsl:when test="/SWBML/swbGiveUp"><xsl:if test="starts-with(/SWBML//swbCustomerTransaction/swbCustomer/@href,'#')"><xsl:value-of select="substring-after(/SWBML//swbCustomerTransaction/swbCustomer/@href,'#')"/></xsl:if></xsl:when><xsl:otherwise>partyB</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyC"><xsl:choose><xsl:when test="/SWBML/swbGiveUp"><xsl:if test="starts-with(/SWBML//swbInterDealerTransaction/swbPrimeBroker/@href,'#')"><xsl:value-of select="substring-after(/SWBML//swbInterDealerTransaction/swbPrimeBroker/@href,'#')"/></xsl:if></xsl:when><xsl:otherwise>partyC</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyD"><xsl:choose><xsl:when test="/SWBML/swbGiveUp"><xsl:if test="starts-with(/SWBML//swbCustomerTransaction/swbPrimeBroker/@href,'#')"><xsl:value-of select="substring-after(/SWBML//swbCustomerTransaction/swbPrimeBroker/@href,'#')"/></xsl:if></xsl:when><xsl:otherwise>partyD</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyG"><xsl:choose><xsl:when test="/SWBML/swbGiveUp"><xsl:if test="starts-with(/SWBML//swbExecutingDealerCustomerTransaction/swbExecutingDealer/@href,'#')"><xsl:value-of select="substring-after(/SWBML//swbExecutingDealerCustomerTransaction/swbExecutingDealer/@href,'#')"/></xsl:if></xsl:when><xsl:otherwise>partyG</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="floatingLeg"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[1]/resetDates">1</xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="fixedLeg"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[1]/resetDates">2</xsl:when><xsl:otherwise>1</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="reportingData.rtf"><xsl:apply-templates select="/SWBML/swbTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:variable><xsl:variable name="brokerPrivateData.rtf"><xsl:variable name="broker1"><xsl:choose><xsl:when test="$idm140395484175248-4/otherPartyPayment[1]/receiverPartyReference"><xsl:value-of select="substring-after(/SWBML/swbStructuredTradeDetails/FpML/trade/otherPartyPayment[1]/receiverPartyReference/@href,'#')"/></xsl:when><xsl:otherwise>broker1</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="broker2"><xsl:choose><xsl:when test="$idm140395484175248-4/otherPartyPayment[2]/receiverPartyReference"><xsl:value-of select="substring-after(/SWBML/swbStructuredTradeDetails/FpML/trade/otherPartyPayment[2]/receiverPartyReference/@href,'#')"/></xsl:when><xsl:otherwise>broker2</xsl:otherwise></xsl:choose></xsl:variable><xsl:choose><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$broker1]"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$broker1]/node()" mode="mapReportingData"/></xsl:when><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$broker2]"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$broker2]/node()" mode="mapReportingData"/></xsl:when><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href='broker']"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href='broker']/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyAPrivateData.rtf"><xsl:choose><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$partyA]"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$partyA]/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="partyBPrivateData.rtf"><xsl:choose><xsl:when test="/SWBML/swbGiveUp"><xsl:choose><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$partyC]"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$partyC]/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><xsl:choose><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$partyB]"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails[swbPartyReference/@href=$partyB]/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="brokerPBPrivateData.rtf"><xsl:choose><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails[swbPartyReference/@href='broker']"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails[swbPartyReference/@href='broker']/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="pbPrivateData.rtf"><xsl:choose><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails[swbPartyReference/@href=$partyC]"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails[swbPartyReference/@href=$partyC]/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="clientPrivateData.rtf"><xsl:choose><xsl:when test="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails[swbPartyReference/@href=$partyB]"><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails[swbPartyReference/@href=$partyB]/node()" mode="mapReportingData"/></xsl:when><xsl:otherwise><xsl:apply-templates select="/SWBML/swbPrivatePartyTradeEventReportingDetails/swbPBClientTradePrivateReportingDetails/node()" mode="mapReportingData"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="extendedTradeDetails.rtf"><xsl:apply-templates select="$idm140395484131264-3/node()" mode="mapReportingData"/></xsl:variable><xsl:variable name="partyIdentifiers.rtf"><xsl:apply-templates select="$idm140395484175248-3/node()" mode="mapReportingData"/></xsl:variable><xsl:variable name="idm140395484175248-2" select="/SWBML/swbStructuredTradeDetails"/><xsl:variable name="idm140395484058384-2" select="/SWBML/swbHeader"/><xsl:variable name="idm140395484175248-3" select="$idm140395484175248-2/FpML"/><xsl:variable name="idm140395484131264-3" select="$idm140395484175248-2/swbExtendedTradeDetails"/><xsl:variable name="idm140395483349536-3" select="/SWBML/swbGiveUp/swbInterDealerTransaction"/><xsl:variable name="idm140395483348480-3" select="/SWBML/swbGiveUp/swbCustomerTransaction"/><xsl:variable name="idm140395483344208-3" select="/SWBML//swbStructuredTradeDetails"/><xsl:variable name="idm140395483223440-3" select="$idm140395484175248-2/swbTradePackageHeader"/><xsl:variable name="idm140395484175248-4" select="$idm140395484175248-3/trade"/><xsl:variable name="idm140395483634448-4" select="$idm140395484131264-3/swbEarlyTerminationProvision"/><xsl:variable name="idm140395483611856-4" select="$idm140395484131264-3/swbAssociatedBonds"/><xsl:variable name="idm140395483473712-4" select="$idm140395484131264-3/swbTradeHeader"/><xsl:variable name="idm140395483427808-4" select="$idm140395484131264-3/swbSettlementProvision"/><xsl:variable name="idm140395483344208-4" select="$idm140395483344208-3/FpML"/><xsl:variable name="idm140395484061024-5" select="$idm140395484175248-4/capFloor"/><xsl:variable name="idm140395483990720-5" select="$idm140395484175248-4/swaption"/><xsl:variable name="idm140395483495104-5" select="$idm140395484131264-3/swbCollateralizedCashPrice/settlementRateSource"/><xsl:variable name="idm140395483397360-5" select="$idm140395483427808-4/swbNonDeliverableSettlement"/><xsl:variable name="idm140395483344208-5" select="$idm140395483344208-4/trade"/><xsl:variable name="idm140395484175248-6" select="$idm140395484175248-4//swap"/><xsl:variable name="idm140395484062256-6" select="$idm140395484175248-4//fra"/><xsl:variable name="idm140395484061024-6" select="$idm140395484061024-5/capFloorStream"/><xsl:variable name="idm140395483495104-6" select="$idm140395483495104-5/informationSource"/><xsl:variable name="idm140395484061024-7" select="$idm140395484061024-6/calculationPeriodAmount"/><xsl:variable name="idm140395483918640-7" select="$idm140395484061024-6/paymentDates"/><xsl:variable name="idm140395483909472-7" select="$idm140395484061024-6/calculationPeriodDates"/><xsl:variable name="idm140395484061024-8" select="$idm140395484061024-7/calculation"/><xsl:variable name="idm140395483868736-9" select="$idm140395484061024-8/floatingRateCalculation"/><xsl:template match="/|comment()|processing-instruction()" mode="mapReportingData"><xsl:copy><xsl:apply-templates mode="mapReportingData"/></xsl:copy></xsl:template><xsl:template match="*" mode="mapReportingData"><xsl:element name="{local-name()}"><xsl:apply-templates select="@*|node()" mode="mapReportingData"/></xsl:element></xsl:template><xsl:template match="@*" mode="mapReportingData"><xsl:attribute name="{local-name()}"><xsl:value-of select="."/></xsl:attribute></xsl:template><xsl:template match="/"><xsl:apply-templates select="SWBML" mode="get-reporting-data"/></xsl:template><xsl:template match="/SWBML[function-available('common:node-set')]" mode="get-reporting-data"><xsl:apply-templates select="."><xsl:with-param name="reportingData" select="common:node-set($reportingData.rtf)"/><xsl:with-param name="brokerPrivateData" select="common:node-set($brokerPrivateData.rtf)"/><xsl:with-param name="partyAPrivateData" select="common:node-set($partyAPrivateData.rtf)"/><xsl:with-param name="partyBPrivateData" select="common:node-set($partyBPrivateData.rtf)"/><xsl:with-param name="brokerPBPrivateData" select="common:node-set($brokerPBPrivateData.rtf)"/><xsl:with-param name="pbPrivateData" select="common:node-set($pbPrivateData.rtf)"/><xsl:with-param name="clientPrivateData" select="common:node-set($clientPrivateData.rtf)"/><xsl:with-param name="extendedTradeDetails" select="common:node-set($extendedTradeDetails.rtf)"/></xsl:apply-templates></xsl:template><xsl:template match="/SWBML[not(function-available('common:node-set'))]" mode="get-reporting-data"><xsl:apply-templates select="."><xsl:with-param name="reportingData" select="$reportingData.rtf"/><xsl:with-param name="brokerPrivateData" select="$brokerPrivateData.rtf"/><xsl:with-param name="partyAPrivateData" select="$partyAPrivateData.rtf"/><xsl:with-param name="partyBPrivateData" select="$partyBPrivateData.rtf"/><xsl:with-param name="brokerPBPrivateData" select="$brokerPBPrivateData.rtf"/><xsl:with-param name="pbPrivateData" select="$pbPrivateData.rtf"/><xsl:with-param name="clientPrivateData" select="$clientPrivateData.rtf"/><xsl:with-param name="extendedTradeDetails" select="$extendedTradeDetails.rtf"/></xsl:apply-templates></xsl:template><xsl:template match="SWBML"><xsl:param name="reportingData"/><xsl:param name="brokerPrivateData"/><xsl:param name="partyAPrivateData"/><xsl:param name="partyBPrivateData"/><xsl:param name="brokerPBPrivateData"/><xsl:param name="pbPrivateData"/><xsl:param name="clientPrivateData"/><xsl:param name="extendedTradeDetails"/><Trade version="3-0"><SWBMLVersion><xsl:value-of select="/SWBML/@version"/></SWBMLVersion><xsl:variable name="productType" select="string(/SWBML/swbStructuredTradeDetails/swbProductType)"/><xsl:variable name="swapStream" select="$idm140395484175248-6/swapStream"/><xsl:variable name="floatingLegId" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/@id)"/><xsl:variable name="floatingStream" select="$swapStream[position() = $floatingLeg]"/><xsl:variable name="fixedStream" select="$swapStream[position()=$fixedLeg]"/><xsl:variable name="fixedLeg2"><xsl:choose><xsl:when test="$productType != 'Fixed Fixed Swap'"/><xsl:when test="$idm140395484175248-6/swapStream[1][@id='fixedLeg2']">1</xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="floatingLeg2"><xsl:choose><xsl:when test="$productType != 'Single Currency Basis Swap' and $productType != 'Cross Currency Basis Swap'"/><xsl:when test="$idm140395484175248-6/swapStream[1][@id='floatingLeg2']">1</xsl:when><xsl:otherwise>2</xsl:otherwise></xsl:choose><xsl:if test="$productType='Cross Currency IRS'"><xsl:value-of select="$floatingLeg"/></xsl:if></xsl:variable><xsl:variable name="floatingStream2" select="$swapStream[position()=$floatingLeg2]"/><xsl:variable name="fixedLegId" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$fixedLeg]/@id)"/><xsl:variable name="currency"><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/currency"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/notional/currency"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395484061024-8/notionalSchedule/notionalStepSchedule/currency"/></xsl:when></xsl:choose></xsl:variable><xsl:variable name="referenceCurrency" select="string(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbSettlementProvision/swbNonDeliverableSettlement/swbReferenceCurrency)"/><BrokerSubmitted>true</BrokerSubmitted><BrokerTradeId><xsl:value-of select="$idm140395484058384-2/swbBrokerTradeId"/></BrokerTradeId><TotalLegs/><BrokerLegId><xsl:value-of select="$idm140395484058384-2/swbBrokerLegId"/></BrokerLegId><ReplacementTradeId><xsl:value-of select="$idm140395484058384-2/swbReplacementTradeId/swbTradeId"/></ReplacementTradeId><ReplacementTradeIdType><xsl:value-of select="$idm140395484058384-2/swbReplacementTradeId/swbTradeIdType"/></ReplacementTradeIdType><ReplacementReason><xsl:value-of select="$idm140395484058384-2/swbReplacementTradeId/swbReplacementReason"/></ReplacementReason><StrategyType/><StrategyComment/><BrokerTradeVersionId><xsl:value-of select="$idm140395484058384-2/swbBrokerTradeVersionId"/></BrokerTradeVersionId><LinkedTradeId/><TradeSource><xsl:choose><xsl:when test="$idm140395484058384-2/swbTradeSource"><xsl:value-of select="$idm140395484058384-2/swbTradeSource"/></xsl:when><xsl:otherwise>Voice</xsl:otherwise></xsl:choose></TradeSource><xsl:for-each select="$idm140395484058384-2/swbVenueId"><VenueId><xsl:value-of select="."/></VenueId><xsl:for-each select="@swbVenueIdScheme"><xsl:call-template name="mwrpt:mapVenueIdScheme"/></xsl:for-each></xsl:for-each><MessageText><xsl:value-of select="$idm140395484131264-3/swbMessageText"/></MessageText><xsl:if test="not(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbClearingHouse/partyId)"><xsl:variable name="swbSettlementAgent" select="$idm140395484131264-3/swbSettlementAgent"/><SettlementAgency><xsl:value-of select="$swbSettlementAgent/swbSettlementAgency/partyId"/></SettlementAgency><SettlementAgencyModel><xsl:value-of select="$swbSettlementAgent/swbSettlementAgencyModel"/></SettlementAgencyModel></xsl:if><AllocatedTrade><xsl:value-of select="string(boolean(/SWBML/swbAllocations))"/></AllocatedTrade><xsl:if test="/SWBML/swbAllocations"><xsl:call-template name="swbAllocations"/></xsl:if><EmptyBlockTrade><xsl:value-of select="string(boolean(/SWBML/swbBlockTrade))"/></EmptyBlockTrade><PrimeBrokerTrade><xsl:value-of select="string(boolean(/SWBML/swbGiveUp))"/></PrimeBrokerTrade><ReversePrimeBrokerLegalEntities><xsl:if test="/SWBML/swbGiveUp"><xsl:if test="starts-with(/SWBML//swbCustomerTransaction/swbCustomer/@href,'#')"><xsl:value-of select="string(boolean(substring-after(/SWBML//swbCustomerTransaction/swbCustomer/@href,'#')='partyA'))"/></xsl:if></xsl:if></ReversePrimeBrokerLegalEntities><xsl:apply-templates select="$idm140395484058384-2/swbRecipient"/><PartyAId><xsl:attribute name="id"><xsl:value-of select="$partyA"/></xsl:attribute><xsl:value-of select="$idm140395484175248-4/party[@id=$partyA]/partyId"/></PartyAId><PartyAIdType><xsl:value-of select="$idm140395484175248-4/party[@id=$partyA]/partyId/@partyIdScheme"/></PartyAIdType><PartyAName><xsl:value-of select="$idm140395484175248-4/party[@id=$partyA]/partyName"/></PartyAName><PartyBId><xsl:attribute name="id"><xsl:value-of select="$partyB"/></xsl:attribute><xsl:value-of select="$idm140395484175248-4/party[@id=$partyB]/partyId"/></PartyBId><PartyBIdType><xsl:value-of select="$idm140395484175248-4/party[@id=$partyB]/partyId/@partyIdScheme"/></PartyBIdType><PartyBName><xsl:value-of select="$idm140395484175248-4/party[@id=$partyB]/partyName"/></PartyBName><PartyCId><xsl:if test="/SWBML/swbGiveUp"><xsl:attribute name="id"><xsl:value-of select="$partyC"/></xsl:attribute><xsl:value-of select="$idm140395484175248-4/party[@id=$partyC]/partyId"/></xsl:if></PartyCId><PartyCIdType><xsl:if test="/SWBML/swbGiveUp"><xsl:value-of select="$idm140395484175248-4/party[@id=$partyC]/partyId/@partyIdScheme"/></xsl:if></PartyCIdType><PartyCName><xsl:if test="/SWBML/swbGiveUp"><xsl:value-of select="$idm140395484175248-4/party[@id=$partyC]/partyName"/></xsl:if></PartyCName><PartyDId><xsl:if test="/SWBML/swbGiveUp"><xsl:attribute name="id"><xsl:value-of select="$partyD"/></xsl:attribute><xsl:value-of select="$idm140395484175248-4/party[@id=$partyD]/partyId"/></xsl:if></PartyDId><PartyDIdType><xsl:if test="/SWBML/swbGiveUp"><xsl:value-of select="$idm140395484175248-4/party[@id=$partyD]/partyId/@partyIdScheme"/></xsl:if></PartyDIdType><PartyDName><xsl:if test="/SWBML/swbGiveUp"><xsl:value-of select="$idm140395484175248-4/party[@id=$partyD]/partyName"/></xsl:if></PartyDName><PartyGId><xsl:if test="/SWBML/swbGiveUp"><xsl:attribute name="id"><xsl:value-of select="$partyG"/></xsl:attribute><xsl:value-of select="$idm140395484175248-4/party[@id=$partyG]/partyId"/></xsl:if></PartyGId><PartyGIdType><xsl:if test="/SWBML/swbGiveUp"><xsl:value-of select="$idm140395484175248-4/party[@id=$partyG]/partyId/@partyIdScheme"/></xsl:if></PartyGIdType><PartyGName><xsl:if test="/SWBML/swbGiveUp"><xsl:value-of select="$idm140395484175248-4/party[@id=$partyG]/partyName"/></xsl:if></PartyGName><BrokerAId><xsl:variable name="broker1" select="substring-after(/SWBML/swbStructuredTradeDetails/FpML/trade/otherPartyPayment[1]/receiverPartyReference/@href,'#')"/><xsl:attribute name="id"><xsl:value-of select="$broker1"/></xsl:attribute><xsl:value-of select="$idm140395484175248-3/party[@id=$broker1]/partyId"/></BrokerAId><BrokerBId><xsl:variable name="broker2" select="substring-after(/SWBML/swbStructuredTradeDetails/FpML/trade/otherPartyPayment[2]/receiverPartyReference/@href,'#')"/><xsl:attribute name="id"><xsl:value-of select="$broker2"/></xsl:attribute><xsl:value-of select="$idm140395484175248-3/party[@id=$broker2]/partyId"/></BrokerBId><NominalTerm><xsl:value-of select="$idm140395484131264-3/swbProductTerm/periodMultiplier"/><xsl:value-of select="$idm140395484131264-3/swbProductTerm/period"/></NominalTerm><FixedRatePayer><xsl:variable name="fixedPayer"><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/payerPartyReference/@href"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/buyerPartyReference/@href"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395484061024-6/receiverPartyReference/@href"/></xsl:when><xsl:when test="$productType='Swaption'"><xsl:value-of select="$idm140395483990720-5/buyerPartyReference/@href"/></xsl:when></xsl:choose></xsl:variable><xsl:choose><xsl:when test="$fixedPayer='#partyA'">A</xsl:when><xsl:when test="$fixedPayer='#partyB'">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></FixedRatePayer><FloatingRatePayer/><TradeDate><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/tradeHeader/tradeDate)"/></xsl:call-template></TradeDate><StartDate><xsl:variable name="startDate"><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/effectiveDate/unadjustedDate)"/></xsl:call-template></xsl:when><xsl:when test="$productType='FRA'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//fra/adjustedEffectiveDate)"/></xsl:call-template></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/></xsl:call-template></xsl:when></xsl:choose></xsl:variable><xsl:value-of select="$startDate"/></StartDate><FirstFixedPeriodStartDate><xsl:variable name="firstFixedPeriodStartDate"><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:variable name="fixedStartDate" select="string($fixedStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:variable name="floatStartDate" select="string($floatingStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:if test="($fixedStartDate != $floatStartDate)"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string($fixedStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/></xsl:call-template></xsl:if></xsl:if></xsl:variable><xsl:value-of select="$firstFixedPeriodStartDate"/></FirstFixedPeriodStartDate><FirstFloatPeriodStartDate><xsl:variable name="firstFloatPeriodStartDate"><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:variable name="fixedStartDate" select="string($fixedStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:variable name="floatStartDate" select="string($floatingStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:if test="($fixedStartDate != $floatStartDate)"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string($floatingStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/></xsl:call-template></xsl:if></xsl:when><xsl:when test="$productType='Single Currency Basis Swap'"><xsl:variable name="floatingStartDate" select="string($floatingStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:variable name="floating2StartDate" select="string($floatingStream2/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:if test="($floatingStartDate != $floating2StartDate)"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string($floatingStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/></xsl:call-template></xsl:if></xsl:when></xsl:choose></xsl:variable><xsl:value-of select="$firstFloatPeriodStartDate"/></FirstFloatPeriodStartDate><FirstFloatPeriodStartDate_2><xsl:variable name="firstFloatPeriodStartDate_2"><xsl:choose><xsl:when test="$productType='Single Currency Basis Swap'"><xsl:variable name="floatingStartDate" select="string($floatingStream/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:variable name="floating2StartDate" select="string($floatingStream2/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:if test="($floatingStartDate != $floating2StartDate)"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string($floatingStream2/calculationPeriodDates/effectiveDate/unadjustedDate)"/></xsl:call-template></xsl:if></xsl:when></xsl:choose></xsl:variable><xsl:value-of select="$firstFloatPeriodStartDate_2"/></FirstFloatPeriodStartDate_2><EndDate><xsl:variable name="endDate"><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/terminationDate/unadjustedDate)"/></xsl:call-template></xsl:when><xsl:when test="$productType='FRA'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//fra/adjustedTerminationDate)"/></xsl:call-template></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodDates/terminationDate/unadjustedDate)"/></xsl:call-template></xsl:when></xsl:choose></xsl:variable><xsl:value-of select="$endDate"/></EndDate><xsl:variable name="termPeriodMultiplier" select="string(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbProductTerm/periodMultiplier)"/><xsl:variable name="termPeriod" select="string(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbProductTerm/period)"/><xsl:variable name="fixPayFreqPeriod" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='fixedLeg']/paymentDates/paymentFrequency/period)"/><xsl:variable name="start" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/effectiveDate/unadjustedDate)"/><xsl:variable name="end" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/terminationDate/unadjustedDate)"/><xsl:variable name="isTermUnder1Y"><xsl:choose><xsl:when test="((number(substring($end,1,4)))=(number(substring($start,1,4))))"><xsl:choose><xsl:when test="(number(substring($start,6,2))&lt;number(substring($end,6,2)))">1</xsl:when><xsl:when test="(number(substring($start,6,2))=number(substring($end,6,2))) and (number(substring($start,9,2)) &lt; number(substring($end,9,2)))">1</xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><xsl:if test="((number(substring($end,1,4)) - number(substring($start,1,4)))=1)"><xsl:choose><xsl:when test="(number(substring($end,6,2))&lt;number(substring($start,6,2)))">1</xsl:when><xsl:when test="(number(substring($end,6,2))=number(substring($start,6,2))) and (number(substring($end,9,2)) &lt; number(substring($start,9,2)))">1</xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:if></xsl:otherwise></xsl:choose></xsl:variable><FixedPaymentFreq><xsl:choose><xsl:when test="$productType='OIS'"><xsl:choose><xsl:when test="$termPeriod = 'W' or ($isTermUnder1Y=1 and $fixPayFreqPeriod = 'Y')">1T</xsl:when><xsl:otherwise><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentFrequency/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentFrequency/period"/></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentFrequency/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentFrequency/period"/></xsl:if></xsl:otherwise></xsl:choose></FixedPaymentFreq><FloatPaymentFreq><xsl:choose><xsl:when test="$productType='OIS'"><xsl:choose><xsl:when test="$termPeriod = 'W' or ($isTermUnder1Y=1 and $fixPayFreqPeriod = 'Y')">1T</xsl:when><xsl:otherwise><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/paymentDates/paymentFrequency/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/paymentDates/paymentFrequency/period"/></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType = 'Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/paymentDates/paymentFrequency/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/paymentDates/paymentFrequency/period"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395483918640-7/paymentFrequency/periodMultiplier"/><xsl:value-of select="$idm140395483918640-7/paymentFrequency/period"/></xsl:when></xsl:choose></xsl:otherwise></xsl:choose></FloatPaymentFreq><FloatPaymentFreq_2/><FloatRollFreq><xsl:choose><xsl:when test="$productType='OIS'"><xsl:choose><xsl:when test="$termPeriod = 'W' or ($isTermUnder1Y=1 and $fixPayFreqPeriod = 'Y')">1T</xsl:when><xsl:otherwise><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/period"/></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType = 'Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/period"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395483909472-7/calculationPeriodFrequency/periodMultiplier"/><xsl:value-of select="$idm140395483909472-7/calculationPeriodFrequency/period"/></xsl:when></xsl:choose></xsl:otherwise></xsl:choose></FloatRollFreq><FloatRollFreq_2/><RollsType><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:variable name="rollConvention" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/rollConvention)"/><xsl:choose><xsl:when test="starts-with($rollConvention,'IMM')">IMM</xsl:when><xsl:otherwise>Standard</xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:variable name="rollConvention" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodDates/calculationPeriodFrequency/rollConvention)"/><xsl:choose><xsl:when test="starts-with($rollConvention,'IMM')">IMM</xsl:when><xsl:otherwise>Standard</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></RollsType><RollsMethod><xsl:if test="($productType='SingleCurrencyInterestRateSwap'or $productType='OIS') and ($currency='AUD' or $currency='NZD' or $currency='CAD')"><xsl:variable name="rollConvention" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/rollConvention)"/><xsl:choose><xsl:when test="starts-with($rollConvention,'IMM') and string-length($rollConvention)=6"><xsl:value-of select="substring($rollConvention,4,3)"/></xsl:when><xsl:when test="$rollConvention='IMM'">CME</xsl:when></xsl:choose></xsl:if></RollsMethod><RollDay><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption' or $productType='CapFloor'"><xsl:choose><xsl:when test="$productType='OIS'"><xsl:variable name="fixPayFreq"><xsl:choose><xsl:when test="$termPeriod = 'W' or ($isTermUnder1Y=1 and $fixPayFreqPeriod = 'Y')">1T</xsl:when><xsl:otherwise><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentFrequency/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentFrequency/period"/></xsl:otherwise></xsl:choose></xsl:variable><xsl:variable name="rollConvention" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/rollConvention)"/><xsl:choose><xsl:when test="starts-with($rollConvention,'IMM')">IMM</xsl:when><xsl:when test="$fixPayFreq='1T'">NONE</xsl:when><xsl:otherwise><xsl:value-of select="$rollConvention"/></xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:variable name="rollConvention" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodDates/calculationPeriodFrequency/rollConvention)"/><xsl:choose><xsl:when test="starts-with($rollConvention,'IMM')">IMM</xsl:when><xsl:otherwise><xsl:value-of select="$rollConvention"/></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><xsl:variable name="rollConvention" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/rollConvention)"/><xsl:choose><xsl:when test="starts-with($rollConvention,'IMM')">IMM</xsl:when><xsl:otherwise><xsl:value-of select="$rollConvention"/></xsl:otherwise></xsl:choose></xsl:otherwise></xsl:choose></xsl:if></RollDay><MonthEndRolls><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption' or $productType='CapFloor'"><xsl:variable name="rollConvention"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodDates/calculationPeriodFrequency/rollConvention"/><xsl:value-of select="$idm140395483909472-7/calculationPeriodFrequency/rollConvention"/></xsl:variable><xsl:value-of select="string(boolean($rollConvention='EOM'))"/></xsl:if></MonthEndRolls><FirstPeriodStartDate/><FirstPaymentDate/><LastRegularPaymentDate/><FixedRate><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/calculationPeriodAmount/calculation/fixedRateSchedule/initialValue"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/fixedRate"/></xsl:when></xsl:choose></FixedRate><initialPoints/><quotationStyle/><RecoveryRate/><FixedSettlement/><Strike><xsl:choose><xsl:when test="$productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395483868736-9/capRateSchedule"><xsl:value-of select="$idm140395483868736-9/capRateSchedule/initialValue"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395483868736-9/floorRateSchedule/initialValue"/></xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='Swaption'"><xsl:value-of select="$idm140395483990720-5/swap/swapStream[@id='fixedLeg']/calculationPeriodAmount/calculation/fixedRateSchedule/initialValue"/></xsl:when></xsl:choose></Strike><StrikePercentage/><StrikeDate/><Currency><xsl:value-of select="$currency"/></Currency><Currency_2/><Notional><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/initialValue"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/notional/amount"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395484061024-8/notionalSchedule/notionalStepSchedule/initialValue"/></xsl:when></xsl:choose></Notional><NotionalFloating/><Notional_2/><InitialNotional/><FixedAmount><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/calculationPeriodAmount/knownAmountSchedule/initialValue"/></FixedAmount><FixedAmountCurrency><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/calculationPeriodAmount/knownAmountSchedule/currency"/></FixedAmountCurrency><FixedDayBasis><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/calculationPeriodAmount/calculation/dayCountFraction"/></FixedDayBasis><FloatDayBasis><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/dayCountFraction"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/dayCountFraction"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395484061024-8/dayCountFraction"/></xsl:when></xsl:choose></FloatDayBasis><FloatDayBasis_2/><FixedConvention><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='fixedLeg']/paymentDates/paymentDatesAdjustments/businessDayConvention,1,4)"/></FixedConvention><FixedCalcPeriodDatesConvention><xsl:if test="$productType='OIS' or $productType='SingleCurrencyInterestRateSwap'"><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$fixedLeg]/calculationPeriodDates/ calculationPeriodDatesAdjustments/ businessDayConvention,1,4)"/></xsl:if></FixedCalcPeriodDatesConvention><FixedTerminationDateConvention><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='fixedLeg']/calculationPeriodDates/terminationDate/dateAdjustments/businessDayConvention,1,4)"/></xsl:if></FixedTerminationDateConvention><FloatConvention><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/paymentDates/paymentDatesAdjustments/businessDayConvention,1,4)"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/FpML/trade//fra/paymentDate/dateAdjustments/businessDayConvention,1,4)"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/paymentDates/paymentDatesAdjustments/businessDayConvention,1,4)"/></xsl:when></xsl:choose></FloatConvention><FloatCalcPeriodDatesConvention><xsl:if test="$productType='OIS' or $productType='SingleCurrencyInterestRateSwap'"><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/calculationPeriodDates/ calculationPeriodDatesAdjustments/businessDayConvention,1,4)"/></xsl:if></FloatCalcPeriodDatesConvention><FloatTerminationDateConvention><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select=" substring(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/terminationDate/dateAdjustments/businessDayConvention,1,4)"/></xsl:if></FloatTerminationDateConvention><FloatConvention_2/><FloatTerminationDateConvention_2/><FloatingRateIndex><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/floatingRateCalculation/floatingRateIndex"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/floatingRateIndex"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395483868736-9/floatingRateIndex"/></xsl:when><xsl:when test="$productType='Inflation Swap'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/inflationRateCalculation/floatingRateIndex"/></xsl:when></xsl:choose></FloatingRateIndex><FloatingRateIndex_2/><InflationLag><xsl:if test="$productType='Inflation Swap'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/inflationRateCalculation/inflationLag/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/inflationRateCalculation/inflationLag/period"/></xsl:if></InflationLag><IndexSource><xsl:if test="$productType='Inflation Swap'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/inflationRateCalculation/indexSource"/></xsl:if></IndexSource><InterpolationMethod><xsl:if test="$productType='Inflation Swap'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/inflationRateCalculation/interpolationMethod"/></xsl:if></InterpolationMethod><InitialIndexLevel><xsl:if test="$productType='Inflation Swap'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/inflationRateCalculation/initialIndexLevel"/></xsl:if></InitialIndexLevel><RelatedBond/><IndexTenor1><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs"><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[1]/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[1]/indexTenor/period"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/indexTenor[1]/periodMultiplier"/><xsl:value-of select="$idm140395484062256-6/indexTenor[1]/period"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395484061024-6/stubCalculationPeriodAmount/initialStub/floatingRate/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484061024-6/stubCalculationPeriodAmount/initialStub/floatingRate/indexTenor/period"/></xsl:when><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount//floatingRate[1]/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount//floatingRate[1]/indexTenor/period"/></xsl:when></xsl:choose></IndexTenor1><IndexTenor1_2/><LinearInterpolation><xsl:choose><xsl:when test="$productType='FRA'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade//fra/indexTenor[2]))"/></xsl:when><xsl:when test="$productType='SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[2]))"/></xsl:when><xsl:when test="($productType='SingleCurrencyInterestRateSwap' or $productType='Swaption') and /SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount//floatingRate[1]"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount//floatingRate[2]))"/></xsl:when><xsl:when test="$productType='CapFloor' and /SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate[1]"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate[2]))"/></xsl:when></xsl:choose></LinearInterpolation><LinearInterpolation_2/><NoStubLinearInterpolation><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbNoStubLinearInterpolation[@href=concat('#',$floatingLegId)]))"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:variable name="capFloorFloatingLegId" select="$idm140395484061024-6/@id"/><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbNoStubLinearInterpolation[@href=concat('#',$capFloorFloatingLegId)]))"/></xsl:when></xsl:choose></NoStubLinearInterpolation><NoStubLinearInterpolation2/><IndexTenor2><xsl:choose><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/indexTenor[2]/periodMultiplier"/><xsl:value-of select="$idm140395484062256-6/indexTenor[2]/period"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395484175248-4//capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate[2]/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-4//capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate[2]/indexTenor/period"/></xsl:when></xsl:choose><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs"><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[2]/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[2]/indexTenor/period"/></xsl:when><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount//floatingRate[2]/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount//floatingRate[2]/indexTenor/period"/></xsl:when></xsl:choose></IndexTenor2><IndexTenor2_2/><InitialInterpolationIndex><xsl:choose><xsl:when test="$productType = 'SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs and count(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate)=2 and /SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[1]/floatingRateIndex != /SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[2]/floatingRateIndex"><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[1]/floatingRateIndex"/></xsl:when><xsl:when test="($productType = 'SingleCurrencyInterestRateSwap' or $productType = 'Swaption') and count(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate)=2 and /SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[1]/floatingRateIndex != /SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[2]/floatingRateIndex"><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub/floatingRate[1]/floatingRateIndex"/></xsl:when><xsl:when test="count(/SWBML/swbStructuredTradeDetails/FpML/trade//capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate)=2 and /SWBML/swbStructuredTradeDetails/FpML/trade//capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate[1]/floatingRateIndex != /SWBML/swbStructuredTradeDetails/FpML/trade//capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate[2]/floatingRateIndex"><xsl:value-of select="$idm140395484175248-4//capFloor/capFloorStream/stubCalculationPeriodAmount//floatingRate[1]/floatingRateIndex"/></xsl:when></xsl:choose></InitialInterpolationIndex><InitialInterpolationIndex_2/><CMSCalcAgent/><SpreadOverIndex><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='CapFloor' or $productType='Swaption'"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/floatingRateCalculation/spreadSchedule/initialValue"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/floatingRateCalculation/spreadSchedule/initialValue"/></xsl:when><xsl:when test="$idm140395483868736-9/spreadSchedule/initialValue"><xsl:value-of select="$idm140395483868736-9/spreadSchedule/initialValue"/></xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:if></SpreadOverIndex><SpreadOverIndex_2/><FirstFixingRate><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[@id='floatingLeg']/stubCalculationPeriodAmount/initialStub/stubRate"><xsl:variable name="initialRate" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/stubCalculationPeriodAmount/initialStub/stubRate)"/><xsl:choose><xsl:when test="number($initialRate) = 0"/><xsl:otherwise><xsl:value-of select="$initialRate"/></xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/floatingRateCalculation/initialRate"><xsl:variable name="initialRate" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/floatingRateCalculation/initialRate)"/><xsl:choose><xsl:when test="number($initialRate) = 0"/><xsl:otherwise><xsl:value-of select="$initialRate"/></xsl:otherwise></xsl:choose></xsl:when></xsl:choose></xsl:if></FirstFixingRate><FirstFixingRate_2/><FixingDaysOffset><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/resetDates/fixingDates/periodMultiplier"/></xsl:when><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/fixingDateOffset/periodMultiplier"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="$idm140395484061024-6/resetDates/fixingDates/periodMultiplier"/></xsl:when></xsl:choose></FixingDaysOffset><FixingDaysOffset_2/><FixingHolidayCentres><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[@id='floatingLeg']/resetDates/fixingDates/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:when test="$productType='FRA'"><xsl:apply-templates select="$idm140395484062256-6/fixingDateOffset/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:apply-templates select="$idm140395484061024-6/resetDates/fixingDates/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when></xsl:choose></FixingHolidayCentres><FixingHolidayCentres_2/><ResetInArrears><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/resetDates[resetRelativeTo='CalculationPeriodEndDate']))"/></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/resetDates[resetRelativeTo='CalculationPeriodEndDate']))"/></xsl:when></xsl:choose></ResetInArrears><ResetInArrears_2/><FirstFixingDifferent><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/resetDates/initialFixingDate))"/></xsl:if></FirstFixingDifferent><FirstFixingDifferent_2/><FirstFixingDaysOffset><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/resetDates/initialFixingDate/periodMultiplier"/></xsl:if></FirstFixingDaysOffset><FirstFixingDaysOffset_2/><FirstFixingHolidayCentres><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[@id='floatingLeg']/resetDates/initialFixingDate/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:if></FirstFixingHolidayCentres><FirstFixingHolidayCentres_2/><PaymentHolidayCentres><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[@id='floatingLeg']/paymentDates/paymentDatesAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:when test="$productType='FRA'"><xsl:apply-templates select="$idm140395484062256-6/paymentDate/dateAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:apply-templates select="$idm140395483918640-7/paymentDatesAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when></xsl:choose></PaymentHolidayCentres><PaymentHolidayCentres_2><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentDatesAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:if></PaymentHolidayCentres_2><PaymentLag><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption' or $productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[@id='floatingLeg']/paymentDates/paymentDaysOffset"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/paymentDates/paymentDaysOffset/periodMultiplier"/></xsl:when><xsl:when test="$idm140395483918640-7/paymentDaysOffset"><xsl:value-of select="$idm140395483918640-7/paymentDaysOffset/periodMultiplier"/></xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:if></PaymentLag><PaymentLag_2><xsl:if test="$productType='OIS' or $productType='SingleCurrencyInterestRateSwap'"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentDaysOffset"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='fixedLeg']/paymentDates/paymentDaysOffset/periodMultiplier"/></xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:if></PaymentLag_2><RollHolidayCentres><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[position()=$floatingLeg]/calculationPeriodDates/calculationPeriodDatesAdjustments/businessDayConvention != 'NONE'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/calculationPeriodDates/calculationPeriodDatesAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:when test="$idm140395484175248-6/swapStream[position()=$floatingLeg]/calculationPeriodDates/terminationDate/dateAdjustments/businessDayConvention != 'NONE'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/calculationPeriodDates/terminationDate/dateAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:otherwise><xsl:apply-templates select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/calculationPeriodDates/effectiveDate/dateAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395483909472-7/calculationPeriodDatesAdjustments/businessDayConvention = 'NONE'"><xsl:apply-templates select="$idm140395483918640-7/paymentDatesAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:otherwise><xsl:apply-templates select="$idm140395483909472-7/calculationPeriodDatesAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:otherwise></xsl:choose></xsl:when></xsl:choose></RollHolidayCentres><RollHolidayCentres_2><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[position()=$fixedLeg]/calculationPeriodDates/calculationPeriodDatesAdjustments/businessDayConvention != 'NONE'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[position()=$fixedLeg]/calculationPeriodDates/calculationPeriodDatesAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:when test="$idm140395484175248-6/swapStream[position()=$fixedLeg]/calculationPeriodDates/terminationDate/dateAdjustments/businessDayConvention != 'NONE'"><xsl:apply-templates select="$idm140395484175248-6/swapStream[position()=$fixedLeg]/calculationPeriodDates/terminationDate/dateAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:when><xsl:otherwise><xsl:apply-templates select="$idm140395484175248-6/swapStream[position()=$fixedLeg]/calculationPeriodDates/effectiveDate/dateAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:otherwise></xsl:choose></xsl:if></RollHolidayCentres_2><AdjustFixedStartDate><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:variable name="effDateBusDayConv" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$fixedLeg]/calculationPeriodDates/effectiveDate/dateAdjustments/businessDayConvention)"/><xsl:choose><xsl:when test="$effDateBusDayConv='NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:if></AdjustFixedStartDate><AdjustFloatStartDate><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:variable name="effDateBusDayConv" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/calculationPeriodDates/effectiveDate/dateAdjustments/businessDayConvention)"/><xsl:choose><xsl:when test="$effDateBusDayConv='NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:variable name="effDateBusDayConv" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodDates/effectiveDate/dateAdjustments/businessDayConvention)"/><xsl:choose><xsl:when test="$effDateBusDayConv='NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></AdjustFloatStartDate><AdjustFloatStartDate_2/><AdjustRollEnd><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption' or $productType='CapFloor'"><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:variable name="fixedCalcPeriodBusDayConv" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='fixedLeg']/calculationPeriodDates/calculationPeriodDatesAdjustments/businessDayConvention)"/><xsl:choose><xsl:when test="$fixedCalcPeriodBusDayConv='NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:if></xsl:if></AdjustRollEnd><AdjustFloatRollEnd><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[position()=$floatingLeg]/calculationPeriodDates/calculationPeriodDatesAdjustments/businessDayConvention = 'NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395483909472-7/calculationPeriodDatesAdjustments/businessDayConvention = 'NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></AdjustFloatRollEnd><AdjustFloatRollEnd_2/><AdjustFixedFinalRollEnd><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:variable name="termDateBusDayConv" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='fixedLeg']/calculationPeriodDates/terminationDate/dateAdjustments/businessDayConvention)"/><xsl:choose><xsl:when test="$termDateBusDayConv='NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:if></AdjustFixedFinalRollEnd><AdjustFinalRollEnd><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:variable name="termDateBusDayConv" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodDates/terminationDate/dateAdjustments/businessDayConvention)"/><xsl:choose><xsl:when test="$termDateBusDayConv='NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:variable name="termDateBusDayConv" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodDates/terminationDate/dateAdjustments/businessDayConvention)"/><xsl:choose><xsl:when test="$termDateBusDayConv='NONE'">false</xsl:when><xsl:otherwise>true</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></AdjustFinalRollEnd><AdjustFinalRollEnd_2/><CompoundingMethod><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:variable name="compoundingMethod" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/compoundingMethod)"/><xsl:choose><xsl:when test="$compoundingMethod='Flat'">F</xsl:when><xsl:when test="$compoundingMethod='Straight'">S</xsl:when><xsl:when test="$compoundingMethod='SpreadExclusive'">E</xsl:when><xsl:otherwise>N</xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:variable name="compoundingMethod" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodAmount/calculation/compoundingMethod)"/><xsl:choose><xsl:when test="$compoundingMethod='Flat'">F</xsl:when><xsl:when test="$compoundingMethod='Straight'">S</xsl:when><xsl:when test="$compoundingMethod='SpreadExclusive'">E</xsl:when><xsl:otherwise>N</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></CompoundingMethod><CompoundingMethod_2/><AveragingMethod/><AveragingMethod_2/><FloatingRateMultiplier/><FloatingRateMultiplier_2/><DesignatedMaturity><xsl:if test="$productType='SingleCurrencyInterestRateSwap'"><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/floatingRateCalculation/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-6/swapStream[@id='floatingLeg']/calculationPeriodAmount/calculation/floatingRateCalculation/indexTenor/period"/></xsl:if><xsl:if test="$productType='CapFloor'"><xsl:value-of select="$idm140395483868736-9/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395483868736-9/indexTenor/period"/></xsl:if></DesignatedMaturity><DesignatedMaturity_2/><ResetFreq/><ResetFreq_2/><WeeklyRollConvention/><WeeklyRollConvention_2/><RateCutOffDays/><RateCutOffDays_2/><InitialExchange/><FinalExchange/><MarkToMarket/><IntermediateExchange/><FallbackBondApplicable/><CalculationMethod/><CalculationStyle/><FinalPriceExchangeCalc/><SpreadCalculationMethod/><CouponRate/><Maturity/><RelatedBondValue/><RelatedBondID/><MTMRateSource/><MTMRateSourcePage/><MTMFixingDate/><MTMFixingHolidayCentres/><MTMFixingTime/><MTMLocation/><MTMCutoffTime/><CalculationPeriodDays><xsl:choose><xsl:when test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/calculationPeriodNumberOfDays"/></xsl:when><xsl:when test="$productType='SingleCurrencyInterestRateSwap' and $referenceCurrency='BRL'"><xsl:value-of select="$idm140395484131264-3/swbFutureValue/calculationPeriodNumberOfDays"/></xsl:when></xsl:choose></CalculationPeriodDays><FraDiscounting><xsl:if test="$productType='FRA'"><xsl:value-of select="$idm140395484062256-6/fraDiscounting"/></xsl:if></FraDiscounting><NoBreak><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption' or $productType='CapFloor' or $productType='OIS'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbNoEarlyTerminationProvision))"/></xsl:if></NoBreak><HasBreak><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'or $productType='CapFloor' or $productType='OIS'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbEarlyTerminationProvision))"/></xsl:if></HasBreak><BreakType><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'or $productType='CapFloor' or $productType='OIS'"><xsl:choose><xsl:when test="$idm140395483634448-4/swbOptionalEarlyTermination">OM</xsl:when><xsl:when test="$idm140395483634448-4/swbMandatoryEarlyTerminationDate">M</xsl:when><xsl:when test="$idm140395483634448-4/swbMandatoryEarlyTermination">M</xsl:when></xsl:choose></xsl:if></BreakType><BreakFirstDate><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'or $productType='CapFloor' or $productType='OIS'"><xsl:choose><xsl:when test="$idm140395483634448-4/swbOptionalEarlyTermination/swbOptionalEarlyTerminationDate"><xsl:value-of select="$idm140395483634448-4/swbOptionalEarlyTermination/swbOptionalEarlyTerminationDate/periodMultiplier"/><xsl:value-of select="$idm140395483634448-4/swbOptionalEarlyTermination/swbOptionalEarlyTerminationDate/period"/></xsl:when><xsl:when test="$idm140395483634448-4/swbMandatoryEarlyTermination/swbMandatoryEarlyTerminationDate"><xsl:value-of select="$idm140395483634448-4/swbMandatoryEarlyTermination/swbMandatoryEarlyTerminationDate/periodMultiplier"/><xsl:value-of select="$idm140395483634448-4/swbMandatoryEarlyTermination/swbMandatoryEarlyTerminationDate/period"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395483634448-4/swbMandatoryEarlyTerminationDate/periodMultiplier"/><xsl:value-of select="$idm140395483634448-4/swbMandatoryEarlyTerminationDate/period"/></xsl:otherwise></xsl:choose></xsl:if></BreakFirstDate><BreakFrequency><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'or $productType='CapFloor' or $productType='OIS'"><xsl:value-of select="$idm140395483634448-4/swbOptionalEarlyTermination/swbOptionalEarlyTerminationFrequency/periodMultiplier"/><xsl:value-of select="$idm140395483634448-4/swbOptionalEarlyTermination/swbOptionalEarlyTerminationFrequency/period"/></xsl:if></BreakFrequency><BreakOverride><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'or $productType='CapFloor' or $productType='OIS'"><xsl:choose><xsl:when test="$idm140395483634448-4/swbBreakOverrideFirstDate">true</xsl:when><xsl:when test="$idm140395483634448-4/swbMandatoryEarlyTermination/swbBreakOverrideFirstDate">true</xsl:when><xsl:otherwise>false</xsl:otherwise></xsl:choose></xsl:if></BreakOverride><BreakDate><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='Swaption'or $productType='CapFloor' or $productType='OIS'"><xsl:if test="$idm140395483634448-4/swbMandatoryEarlyTermination/swbBreakOverrideFirstDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbEarlyTerminationProvision/swbMandatoryEarlyTermination/swbBreakOverrideFirstDate)"/></xsl:call-template></xsl:if></xsl:if></BreakDate><ExchangeUnderlying><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbAssociatedBonds))"/></xsl:if></ExchangeUnderlying><SpreadCurrency/><SwapSpread><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:value-of select="$idm140395483611856-4/swbNegotiatedSpreadRate"/></xsl:if></SwapSpread><BondId1><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=1]/swbBondId"/></BondId1><BondName1><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=1]/swbBondName"/></BondName1><BondAmount1><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=1]/swbBondFaceAmount"/></BondAmount1><BondPriceType1><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=1]/swbPriceType"/></BondPriceType1><BondPrice1><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=1]/swbBondPrice"/></BondPrice1><BondId2><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=2]/swbBondId"/></BondId2><BondName2><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=2]/swbBondName"/></BondName2><BondAmount2><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=2]/swbBondFaceAmount"/></BondAmount2><BondPriceType2><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=2]/swbPriceType"/></BondPriceType2><BondPrice2><xsl:value-of select="$idm140395483611856-4/swbBondDetails[position()=2]/swbBondPrice"/></BondPrice2><StubAt><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption' or $productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395484131264-3/swbStubPosition"><xsl:value-of select="$idm140395484131264-3/swbStubPosition"/></xsl:when><xsl:when test="SWBML/swbStructuredTradeDetails/FpML/trade/swaption/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub">End</xsl:when><xsl:when test="$idm140395483990720-5/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/initialStub">Start</xsl:when><xsl:otherwise>Start</xsl:otherwise></xsl:choose></xsl:if></StubAt><FixedStub><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:choose><xsl:when test="$idm140395484131264-3/swbStubLength [@href=concat('#',$fixedLegId)]"><xsl:value-of select="$idm140395484131264-3/swbStubLength [@href=concat('#',$fixedLegId)]"/></xsl:when><xsl:otherwise>Short</xsl:otherwise></xsl:choose></xsl:if></FixedStub><FloatStub><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:choose><xsl:when test="$idm140395484131264-3/swbStubLength [@href=concat('#',$floatingLegId)]"><xsl:value-of select="$idm140395484131264-3/swbStubLength [@href=concat('#',$floatingLegId)]"/></xsl:when><xsl:otherwise>Short</xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395484131264-3/swbStubLength"><xsl:value-of select="$idm140395484131264-3/swbStubLength"/></xsl:when><xsl:otherwise>Short</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></FloatStub><FloatStub_2/><FrontAndBackStubs><xsl:if test="$idm140395484131264-3/swbFrontAndBackStubs">true</xsl:if></FrontAndBackStubs><FixedBackStub><xsl:value-of select="$idm140395484131264-3/swbFrontAndBackStubs/swbStubLength[@href=$fixedLegId]"/></FixedBackStub><FloatBackStub><xsl:value-of select="$idm140395484131264-3/swbFrontAndBackStubs/swbStubLength[@href=$floatingLegId]"/></FloatBackStub><BackStubIndexTenor1><xsl:if test="$productType='SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs"><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[1]/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[1]/indexTenor/period"/></xsl:if></BackStubIndexTenor1><BackStubIndexTenor2><xsl:if test="$productType='SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs"><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[2]/indexTenor/periodMultiplier"/><xsl:value-of select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[2]/indexTenor/period"/></xsl:if></BackStubIndexTenor2><BackStubLinearInterpolation><xsl:if test="$productType='SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs and /SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[1]"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[2]))"/></xsl:if></BackStubLinearInterpolation><BackStubInitialInterpIndex><xsl:if test="$productType = 'SingleCurrencyInterestRateSwap' and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbFrontAndBackStubs and count(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate)=2 and /SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[1]/floatingRateIndex != /SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[2]/floatingRateIndex"><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$floatingLeg]/stubCalculationPeriodAmount/finalStub/floatingRate[1]/floatingRateIndex"/></xsl:if></BackStubInitialInterpIndex><NoBackStubLinearInterpolation><xsl:if test="$idm140395484131264-3/swbFrontAndBackStubs/swbNoStubLinearInterpolation">true</xsl:if></NoBackStubLinearInterpolation><FirstFixedRegPdStartDate><xsl:if test="$idm140395484175248-4/swap/swapStream[position()=$fixedLeg]/calculationPeriodDates/firstRegularPeriodStartDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$fixedLeg]/calculationPeriodDates/firstRegularPeriodStartDate)"/></xsl:call-template></xsl:if></FirstFixedRegPdStartDate><FirstFloatRegPdStartDate><xsl:if test="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/calculationPeriodDates/firstRegularPeriodStartDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/calculationPeriodDates/firstRegularPeriodStartDate)"/></xsl:call-template></xsl:if></FirstFloatRegPdStartDate><LastFixedRegPdEndDate><xsl:if test="$idm140395484175248-4/swap/swapStream[position()=$fixedLeg]/calculationPeriodDates/lastRegularPeriodEndDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$fixedLeg]/calculationPeriodDates/lastRegularPeriodEndDate)"/></xsl:call-template></xsl:if></LastFixedRegPdEndDate><LastFloatRegPdEndDate><xsl:if test="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/calculationPeriodDates/lastRegularPeriodEndDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/calculationPeriodDates/lastRegularPeriodEndDate)"/></xsl:call-template></xsl:if></LastFloatRegPdEndDate><MasterAgreement><xsl:value-of select="$idm140395484131264-3/swbMasterAgreementType"/></MasterAgreement><ProductType><xsl:choose><xsl:when test="$productType='SingleCurrencyInterestRateSwap'">Single Currency Interest Rate Swap</xsl:when><xsl:otherwise><xsl:value-of select="$productType"/></xsl:otherwise></xsl:choose></ProductType><OptionType><xsl:choose><xsl:when test="$productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395483868736-9/capRateSchedule  and /SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/capFloorStream/calculationPeriodAmount/calculation/floatingRateCalculation/floorRateSchedule">Cap Floor Straddle</xsl:when><xsl:when test="$idm140395483868736-9/capRateSchedule">Cap</xsl:when><xsl:when test="$idm140395483868736-9/floorRateSchedule">Floor</xsl:when></xsl:choose></xsl:when><xsl:when test="$productType='Swaption'"><xsl:variable name="straddle" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/swaptionStraddle)"/><xsl:variable name="swaptionBuyer" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/buyerPartyReference/@href)"/><xsl:variable name="swapFixedPayer" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade//swap/swapStream[@id='fixedLeg']/payerPartyReference/@href)"/><xsl:choose><xsl:when test="$straddle='true'">Straddle</xsl:when><xsl:when test="$swaptionBuyer=$swapFixedPayer">Payers</xsl:when><xsl:otherwise>Receivers</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></OptionType><OptionExpirationDate><xsl:if test="$productType='Swaption'"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/europeanExercise/expirationDate/adjustableDate/unadjustedDate)"/></xsl:call-template></xsl:if></OptionExpirationDate><OptionHolidayCentres><xsl:if test="$productType='Swaption'"><xsl:apply-templates select="$idm140395483990720-5/europeanExercise/expirationDate/adjustableDate/dateAdjustments/businessCenters"/></xsl:if></OptionHolidayCentres><OptionEarliestTime><xsl:if test="$productType='Swaption'"><xsl:call-template name="formatTime"><xsl:with-param name="time" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/europeanExercise/earliestExerciseTime/hourMinuteTime)"/></xsl:call-template></xsl:if></OptionEarliestTime><OptionExpiryTime><xsl:if test="$productType='Swaption'"><xsl:call-template name="formatTime"><xsl:with-param name="time" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/europeanExercise/expirationTime/hourMinuteTime)"/></xsl:call-template></xsl:if></OptionExpiryTime><OptionSpecificExpiryTime/><OptionLocation><xsl:if test="$productType='Swaption'"><xsl:value-of select="$idm140395483990720-5/europeanExercise/expirationTime/businessCenter"/></xsl:if></OptionLocation><OptionCalcAgent><xsl:if test="$productType='Swaption' and ((/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/calculationAgentPartyReference) or (/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/calculationAgent))"><xsl:choose><xsl:when test="count(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/calculationAgentPartyReference) = 2">Joint</xsl:when><xsl:when test="$idm140395483990720-5/calculationAgentPartyReference/@href = /SWBML/swbStructuredTradeDetails/FpML/trade/swaption/buyerPartyReference/@href">Buyer</xsl:when><xsl:when test="$idm140395483990720-5/calculationAgentPartyReference/@href = /SWBML/swbStructuredTradeDetails/FpML/trade/swaption/sellerPartyReference/@href">Seller</xsl:when><xsl:when test="$idm140395483990720-5/calculationAgent/calculationAgentParty[.='AsSpecifiedInMasterAgreement']">As Specified in Master Agreement</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></xsl:if></OptionCalcAgent><OptionAutomaticExercise><xsl:if test="$productType='Swaption'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/exerciseProcedure/automaticExercise))"/></xsl:if></OptionAutomaticExercise><OptionThreshold><xsl:if test="$productType='Swaption'"><xsl:value-of select="$idm140395483990720-5/exerciseProcedure/automaticExercise/thresholdRate"/></xsl:if></OptionThreshold><ManualExercise><xsl:if test="$productType='Swaption'"><xsl:value-of select="$idm140395483990720-5/exerciseProcedure/manualExercise/fallbackExercise"/></xsl:if></ManualExercise><OptionWrittenExerciseConf><xsl:if test="$productType='Swaption'"><xsl:value-of select="$idm140395483990720-5/exerciseProcedure/followUpConfirmation"/></xsl:if></OptionWrittenExerciseConf><OptionSettlement><xsl:if test="$productType='Swaption'"><xsl:choose><xsl:when test="$idm140395483990720-5/cashSettlement">Cash</xsl:when><xsl:otherwise>Physical</xsl:otherwise></xsl:choose></xsl:if></OptionSettlement><OptionCashSettlementMethod><xsl:if test="$productType='Swaption'"><xsl:choose><xsl:when test="$swaption/cashSettlement/cashPriceMethod">Cash Price</xsl:when><xsl:when test="$swaption/cashSettlement/cashPriceAlternateMethod">Cash Price - Alternate Method</xsl:when><xsl:when test="$swaption/cashSettlement/parYieldCurveAdjustedMethod ">Par Yield Curve - Adjusted</xsl:when><xsl:when test="$swaption/cashSettlement/zeroCouponYieldAdjustedMethod ">Zero Coupon Yield - Adjusted</xsl:when><xsl:when test="$swaption/cashSettlement/parYieldCurveUnadjustedMethod ">Par Yield Curve - Unadjusted</xsl:when><xsl:when test="$idm140395484131264-3/swbCollateralizedCashPrice">Collateralized Cash Price</xsl:when></xsl:choose></xsl:if></OptionCashSettlementMethod><OptionCashSettlementQuotationRate><xsl:if test="$productType='Swaption'"><xsl:choose><xsl:when test="$idm140395484131264-3/swbCollateralizedCashPrice"><xsl:value-of select="$idm140395484131264-3/swbCollateralizedCashPrice/quotationRateType"/></xsl:when><xsl:otherwise><xsl:value-of select="$swaption/cashSettlement//quotationRateType"/></xsl:otherwise></xsl:choose></xsl:if></OptionCashSettlementQuotationRate><OptionCashSettlementRateSource><xsl:if test="$productType='Swaption'"><xsl:choose><xsl:when test="$idm140395483495104-6/rateSourcePage"><xsl:variable name="pageString" select="' Page '"/><xsl:value-of select="$idm140395483495104-6/rateSource"/><xsl:value-of select="$pageString"/><xsl:value-of select="$idm140395483495104-6/rateSourcePage"/></xsl:when><xsl:when test="$idm140395483495104-6/rateSource[.='ISDA']">ISDA Source</xsl:when><xsl:when test="$idm140395483495104-6/rateSource[.='ICESWAP']">ICESWAP</xsl:when><xsl:when test="$idm140395483495104-6/rateSource[.='TOKYOSWAP']">Tokyo Swap Rate</xsl:when><xsl:when test="$idm140395483495104-6/rateSource[.='Reference Banks']">Reference Banks</xsl:when><xsl:when test="$swaption/cashSettlement//settlementRateSource/informationSource/rateSourcePage"><xsl:variable name="pageString" select="' Page '"/><xsl:value-of select="$swaption/cashSettlement//settlementRateSource/informationSource/rateSource"/><xsl:value-of select="$pageString"/><xsl:value-of select="$swaption/cashSettlement//settlementRateSource/informationSource/rateSourcePage"/></xsl:when><xsl:when test="$swaption/cashSettlement//settlementRateSource/informationSource/rateSource[.='ISDA']">ISDA Source</xsl:when><xsl:when test="$swaption/cashSettlement//settlementRateSource/informationSource/rateSource[.='ICESWAP']">ICESWAP Rate</xsl:when><xsl:when test="$swaption/cashSettlement//settlementRateSource/informationSource/rateSource[.='TOKYOSWAP']">Tokyo Swap Rate</xsl:when><xsl:when test="$swaption/cashSettlement//settlementRateSource/informationSource/rateSource[.='ReferenceBanks'] or $swaption/cashSettlement//settlementRateSource/informationSource/rateSource[.='Reference Banks']">Reference Banks</xsl:when><xsl:when test="$swaption/cashSettlement/cashPriceMethod or $swaption/cashSettlement/cashPriceAlternateMethod or $swaption/cashSettlement//cashSettlementReferenceBanks">Reference Banks</xsl:when></xsl:choose></xsl:if></OptionCashSettlementRateSource><OptionCashSettlementReferenceBanks><xsl:if test="$productType='Swaption'"><xsl:choose><xsl:when test="$idm140395483495104-5/cashSettlementReferenceBanks"><xsl:apply-templates select="$idm140395483495104-5/cashSettlementReferenceBanks"/></xsl:when><xsl:when test="$swaption/cashSettlement//cashSettlementReferenceBanks"><xsl:apply-templates select="$swaption/cashSettlement//cashSettlementReferenceBanks"/></xsl:when><xsl:when test="$swaption/cashSettlement">Agreed on exercise</xsl:when><xsl:otherwise/></xsl:choose></xsl:if></OptionCashSettlementReferenceBanks><ClearedPhysicalSettlement><xsl:if test="$productType='Swaption'"><xsl:value-of select="string(boolean(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbClearedPhysicalSettlement = 'true'))"/></xsl:if></ClearedPhysicalSettlement><UnderlyingSwapClearingHouse><xsl:value-of select="$idm140395483473712-4/swbPredeterminedClearerForUnderlyingSwap"/></UnderlyingSwapClearingHouse><PricedToClearCCP><xsl:if test="$productType='Swaption' or $productType='OIS' or $productType='FRA' or $productType='ZC Inflation Swap' or $productType='Fixed Fixed Swap' or $productType='SingleCurrencyInterestRateSwap' or $productType='Single Currency Basis Swap' or $productType='Cross Currency IRS' or $productType='Cross Currency Basis Swap'"><xsl:value-of select="$idm140395483473712-4/swbPricedToClearCCP/partyId"/></xsl:if></PricedToClearCCP><AgreedDiscountRate><xsl:if test="$productType='Swaption'"><xsl:value-of select="$idm140395484131264-3/swbAgreedDiscountRate"/></xsl:if></AgreedDiscountRate><Premium><Currency/><Amount><xsl:choose><xsl:when test="$productType='CapFloor'"><xsl:choose><xsl:when test="$idm140395484061024-5/additionalPayment[1]"><xsl:value-of select="$idm140395484061024-5/additionalPayment[1]/paymentAmount/amount"/></xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:when><xsl:when test="$productType='Swaption'"><xsl:choose><xsl:when test="$idm140395483990720-5/premium"><xsl:value-of select="$idm140395483990720-5/premium/paymentAmount/amount"/></xsl:when><xsl:otherwise>0</xsl:otherwise></xsl:choose></xsl:when></xsl:choose></Amount><Date><xsl:choose><xsl:when test="$productType='CapFloor'"><xsl:if test="$idm140395484061024-5/additionalPayment[1]"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/capFloor/additionalPayment[1]/paymentDate/unadjustedDate)"/></xsl:call-template></xsl:if></xsl:when><xsl:when test="$productType='Swaption'"><xsl:if test="$idm140395483990720-5/premium"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/swaption/premium/paymentDate/unadjustedDate)"/></xsl:call-template></xsl:if></xsl:when></xsl:choose></Date></Premium><PremiumHolidayCentres><xsl:if test="$productType='Swaption'"><xsl:apply-templates select="$idm140395483990720-5/premium/paymentDate/dateAdjustments/businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:if></PremiumHolidayCentres><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:apply-templates select="$idm140395484131264-3/swbAssociatedFuture"/></xsl:if><DocsType/><DocsSubType/><OptionsComponentSecurityIndexAnnex/><OptionHedgingDisruption/><OptionLossOfStockBorrow/><OptionMaximumStockLoanRate/><OptionIncreasedCostOfStockBorrow/><OptionInitialStockLoanRate/><OptionIncreasedCostOfHedging/><OptionForeignOwnershipEvent/><OptionEntitlement/><ContractualDefinitions><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='CapFloor' or $productType='Swaption' or $productType='FRA'"><xsl:value-of select="$idm140395484131264-3/swbContractualDefinitions"/></xsl:if></ContractualDefinitions><RestructuringCreditEvent/><CalculationAgentCity/><RefEntName/><RefEntStdId/><REROPairStdId/><RefOblRERole/><RefOblSecurityIdType/><RefOblSecurityId/><BloombergID/><RefOblMaturity/><RefOblCoupon/><RefOblPrimaryObligor/><BorrowerNames/><FacilityType/><CreditAgreementDate/><IsSecuredList/><DesignatedPriority/><OptionalEarlyTermination/><ReferencePrice/><ReferencePolicy/><PaymentDelay/><StepUpProvision/><WACCapInterestProvision/><InterestShortfallCapIndicator/><InterestShortfallCompounding/><InterestShortfallCapBasis/><InterestShortfallRateSource/><MortgagePaymentFrequency/><MortgageFinalMaturity/><MortgageOriginalAmount/><MortgageInitialFactor/><MortgageSector/><IndexName/><IndexId/><IndexSeries/><IndexVersion/><IndexAnnexDate/><IndexTradedRate/><UpfrontFee/><UpfrontFeeAmount/><UpfrontFeeDate/><UpfrontFeePayer/><AttachmentPoint/><ExhaustionPoint/><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='CapFloor'"><xsl:apply-templates select="$idm140395484175248-4//additionalPayment"/></xsl:if><EquityRic/><OptionQuantity/><OptionExpiryMonth/><OptionExpiryYear/><Price/><OptionStyle/><ExchangeLookAlike/><AdjustmentMethod/><RelatedExchange/><MasterConfirmationDate/><Multiplier/><SettlementCurrency><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395483427808-4/swbSettlementCurrency"/></xsl:if></SettlementCurrency><SettlementCurrency_2/><SettlementDateOffset/><SettlementType/><FxDeterminationMethod/><ReferencePriceSource/><ReferencePricePage/><ReferencePriceTime/><ReferencePriceCity/><ReferenceCurrency><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$referenceCurrency"/></xsl:if></ReferenceCurrency><ReferenceCurrency_2/><DcRequired/><DcEventTypeA/><DcRic/><DcDescription/><DcExpiryMonth/><DcExpiryYear/><DcQuantity/><DcPrice/><DcCurrency/><DcDelta/><DcExpiryDate/><DcFuturesCode/><DcOffshoreCross/><DcOffshoreCrossLocation/><DcExchangeID/><DcDeltaOptionQuantity/><AveragingInOut/><AveragingDateTimes><AveragingDate/></AveragingDateTimes><MarketDisruption/><AveragingFrequency/><AveragingStartDate/><AveragingEndDate/><ReferenceFXRate/><HedgeLevel/><Basis/><ImpliedLevel/><PremiumPercent/><StrikePercent/><BaseNotional/><BreakOutTrade/><SplitCollateral/><OpenUnits/><DeclaredCashDividendPercentage/><DeclaredCashEquivalentDividendPercentage/><DividendPayer/><DividendReceiver/><DividendPeriods><DividendPeriod><DividendPeriodId/><UnadjustedStartDate/><UnadjustedEndDate/><PaymentDateReference/><FixedStrike/><DividendValuationDateReference/><DividendValuationDate/></DividendPeriod></DividendPeriods><SpecialDividends/><MaterialDividend/><FixedPayer/><FixedReceiver/><FixedPeriods><FixedPayment><DivSwapFixedAmount/><DivSwapFixedDateOffset/><DivSwapFixedDateRelativeTo/></FixedPayment></FixedPeriods><VegaNotional/><ExpectedN/><ExpectedNOverride/><VarianceAmount/><VarianceStrikePrice/><VolatilityStrikePrice/><VarianceCapIndicator/><VarianceCapFactor/><ObservationStartDate/><ValuationDate/><InitialSharePriceOrIndexLevel/><ClosingSharePriceOrClosingIndexLevelIndicator/><FuturesPriceValuation/><AllDividends/><SettlementCurrencyVegaNotional/><VegaFxRate/><IndependentAmount><Payer/><Currency/><Amount/></IndependentAmount><xsl:apply-templates select="$idm140395484175248-4/otherPartyPayment"/><SettlementRateOption><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS' or $productType='Swaption'"><xsl:value-of select="$idm140395483397360-5/swbSettlementRateOption"/></xsl:if></SettlementRateOption><SettlementRateOption_2/><FxFixingAdjustableDate><xsl:value-of select="$idm140395483397360-5/swbFxFixingSchedule/unadjustedDate"/></FxFixingAdjustableDate><FxFixingPeriod><xsl:value-of select="$idm140395483397360-5/swbFxFixingDate/periodMultiplier"/></FxFixingPeriod><FxFixingDayConvention><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:value-of select="substring(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbSettlementProvision/swbNonDeliverableSettlement//businessDayConvention,1,4)"/></xsl:if></FxFixingDayConvention><FxFixingCentres><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:apply-templates select="$idm140395483397360-5//businessCenters"><xsl:sort select="."/></xsl:apply-templates></xsl:if></FxFixingCentres><FxFixingPeriod_2/><FxFixingDayConvention_2/><FxFixingCentres_2/><CalcAgentA><xsl:if test="$referenceCurrency='BRL'"><xsl:choose><xsl:when test="$idm140395484175248-4/calculationAgent/calculationAgentParty[.='AsSpecifiedInMasterAgreement']">As Specified in Master Agreement</xsl:when><xsl:when test="count(/SWBML/swbStructuredTradeDetails/FpML/trade/calculationAgent/calculationAgentPartyReference)=2">Joint</xsl:when><xsl:otherwise/></xsl:choose></xsl:if></CalcAgentA><DefaultSettlementMethod/><SettlementPriceDefaultElectionMethod/><SettlementMethodElectionDate/><SettlementMethodElectingParty/><NotionalFutureValue><xsl:if test="$referenceCurrency='BRL'"><xsl:value-of select="$idm140395484131264-3/swbFutureValue/swbNotionalFutureValue/amount"/></xsl:if></NotionalFutureValue><NotionalSchedule><xsl:if test="$productType='SingleCurrencyInterestRateSwap' or $productType='OIS'"><xsl:for-each select="$idm140395484175248-4/swap/swapStream[position()=$fixedLeg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step"><xsl:call-template name="formatNotionalSchedule"><xsl:with-param name="position" select="string(position())"/><xsl:with-param name="leg" select="string($fixedLeg)"/></xsl:call-template></xsl:for-each><xsl:if test="not(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$fixedLeg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step)"><xsl:for-each select="$idm140395484175248-4/swap/swapStream[position()=$fixedLeg]/calculationPeriodAmount/calculation/fixedRateSchedule/step"><xsl:call-template name="formatNotionalSchedule"><xsl:with-param name="position" select="string(position())"/><xsl:with-param name="leg" select="string($fixedLeg)"/></xsl:call-template></xsl:for-each></xsl:if><xsl:for-each select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step"><xsl:call-template name="formatNotionalSchedule"><xsl:with-param name="position" select="string(position())"/><xsl:with-param name="leg" select="string($floatingLeg)"/></xsl:call-template></xsl:for-each><xsl:if test="not(/SWBML/swbStructuredTradeDetails/FpML/trade/swap/swapStream[position()=$floatingLeg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step)"><xsl:for-each select="$idm140395484175248-4/swap/swapStream[position()=$floatingLeg]/calculationPeriodAmount/calculation/floatingRateCalculation/spreadSchedule/step"><xsl:call-template name="formatNotionalSchedule"><xsl:with-param name="position" select="string(position())"/><xsl:with-param name="leg" select="string($floatingLeg)"/></xsl:call-template></xsl:for-each></xsl:if></xsl:if></NotionalSchedule><DispLegs><DispLeg><DispLegId/><DispLegVersionId/><DispLegPayer/><DispLegReceiver/><DispEquityRic/><DispEquityRelEx/><DispVegaNotional/><DispExpectedN/><DispSettlementDateOffset/><DispVarianceAmount/><DispShareVarCurrency/><DispVarianceStrikePrice/><DispVarianceCapIndicator/><DispVarianceCapFactor/><DispVegaNotionalAmount/><DispObservationStartDate/><DispValuationDate/><DispInitialLevel/><DispClosingLevelIndicator/><DispFuturesPriceValuation/><DispAllDividends/></DispLeg></DispLegs><DispLegsSW><DispLegSW><DispCorrespondingLeg/><DispVolatilityStrikePrice/><DispHolidayDates/><DispExpectedNOverride/><DispShareWeight/></DispLegSW></DispLegsSW><BalanceOfPeriod/><BulletIndicator/><BulletFirstContractMonth/><BulletLastContractMonth/><BulletContractYear/><BulletContractTradingDay/><ClearingVenue/><ClientClearing><xsl:value-of select="$idm140395483473712-4/swbClientClearing"/></ClientClearing><ExternalInteropabilityId><xsl:value-of select="$idm140395483473712-4/swbExternalInteropabilityId"/></ExternalInteropabilityId><InteropNettingString><xsl:value-of select="$idm140395483473712-4/swbInteropNettingString"/></InteropNettingString><AutoSendForClearing><xsl:value-of select="$idm140395483473712-4/swbAutoSendForClearing"/></AutoSendForClearing><ASICMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='ASIC']/swbMandatoryClearingIndicator"/></ASICMandatoryClearingIndicator><PBEBTradeASICMandatoryClearingIndicator><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='ASIC']/swbMandatoryClearingIndicator"/></PBEBTradeASICMandatoryClearingIndicator><PBClientTradeASICMandatoryClearingIndicator><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='ASIC']/swbMandatoryClearingIndicator"/></PBClientTradeASICMandatoryClearingIndicator><CANMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='CAN']/swbMandatoryClearingIndicator"/></CANMandatoryClearingIndicator><CANClearingExemptIndicator1PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></CANClearingExemptIndicator1PartyId><CANClearingExemptIndicator1Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[1]/swbExemption"/></CANClearingExemptIndicator1Value><CANClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395483344208-5/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></CANClearingExemptIndicator2PartyId><CANClearingExemptIndicator2Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[2]/swbExemption"/></CANClearingExemptIndicator2Value><PBEBTradeCANMandatoryClearingIndicator><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='CAN']/swbMandatoryClearingIndicator"/></PBEBTradeCANMandatoryClearingIndicator><PBEBTradeCANClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBEBTradeCANClearingExemptIndicator1PartyId><PBEBTradeCANClearingExemptIndicator1Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[1]/swbExemption"/></PBEBTradeCANClearingExemptIndicator1Value><PBEBTradeCANClearingExemptIndicator2PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBEBTradeCANClearingExemptIndicator2PartyId><PBEBTradeCANClearingExemptIndicator2Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[2]/swbExemption"/></PBEBTradeCANClearingExemptIndicator2Value><PBClientTradeCANMandatoryClearingIndicator><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='CAN']/swbMandatoryClearingIndicator"/></PBClientTradeCANMandatoryClearingIndicator><PBClientTradeCANClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBClientTradeCANClearingExemptIndicator1PartyId><PBClientTradeCANClearingExemptIndicator1Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[1]/swbExemption"/></PBClientTradeCANClearingExemptIndicator1Value><PBClientTradeCANClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBClientTradeCANClearingExemptIndicator2PartyId><PBClientTradeCANClearingExemptIndicator2Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='CAN']/swbPartyExemption[2]/swbExemption"/></PBClientTradeCANClearingExemptIndicator2Value><ESMAMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='ESMA']/swbMandatoryClearingIndicator"/></ESMAMandatoryClearingIndicator><ESMAClearingExemptIndicator1PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></ESMAClearingExemptIndicator1PartyId><ESMAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[1]/swbExemption"/></ESMAClearingExemptIndicator1Value><ESMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395483344208-5/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></ESMAClearingExemptIndicator2PartyId><ESMAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[2]/swbExemption"/></ESMAClearingExemptIndicator2Value><PBEBTradeESMAMandatoryClearingIndicator><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='ESMA']/swbMandatoryClearingIndicator"/></PBEBTradeESMAMandatoryClearingIndicator><PBEBTradeESMAClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBEBTradeESMAClearingExemptIndicator1PartyId><PBEBTradeESMAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[1]/swbExemption"/></PBEBTradeESMAClearingExemptIndicator1Value><PBEBTradeESMAClearingExemptIndicator2PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBEBTradeESMAClearingExemptIndicator2PartyId><PBEBTradeESMAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[2]/swbExemption"/></PBEBTradeESMAClearingExemptIndicator2Value><PBClientTradeESMAMandatoryClearingIndicator><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='ESMA']/swbMandatoryClearingIndicator"/></PBClientTradeESMAMandatoryClearingIndicator><PBClientTradeESMAClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBClientTradeESMAClearingExemptIndicator1PartyId><PBClientTradeESMAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[1]/swbExemption"/></PBClientTradeESMAClearingExemptIndicator1Value><PBClientTradeESMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBClientTradeESMAClearingExemptIndicator2PartyId><PBClientTradeESMAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='ESMA']/swbPartyExemption[2]/swbExemption"/></PBClientTradeESMAClearingExemptIndicator2Value><FCAMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='FCA']/swbMandatoryClearingIndicator"/></FCAMandatoryClearingIndicator><FCAClearingExemptIndicator1PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></FCAClearingExemptIndicator1PartyId><FCAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[1]/swbExemption"/></FCAClearingExemptIndicator1Value><FCAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395483344208-5/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></FCAClearingExemptIndicator2PartyId><FCAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[2]/swbExemption"/></FCAClearingExemptIndicator2Value><PBEBTradeFCAMandatoryClearingIndicator><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='FCA']/swbMandatoryClearingIndicator"/></PBEBTradeFCAMandatoryClearingIndicator><PBEBTradeFCAClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBEBTradeFCAClearingExemptIndicator1PartyId><PBEBTradeFCAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[1]/swbExemption"/></PBEBTradeFCAClearingExemptIndicator1Value><PBEBTradeFCAClearingExemptIndicator2PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBEBTradeFCAClearingExemptIndicator2PartyId><PBEBTradeFCAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[2]/swbExemption"/></PBEBTradeFCAClearingExemptIndicator2Value><PBClientTradeFCAMandatoryClearingIndicator><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='FCA']/swbMandatoryClearingIndicator"/></PBClientTradeFCAMandatoryClearingIndicator><PBClientTradeFCAClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBClientTradeFCAClearingExemptIndicator1PartyId><PBClientTradeFCAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[1]/swbExemption"/></PBClientTradeFCAClearingExemptIndicator1Value><PBClientTradeFCAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBClientTradeFCAClearingExemptIndicator2PartyId><PBClientTradeFCAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='FCA']/swbPartyExemption[2]/swbExemption"/></PBClientTradeFCAClearingExemptIndicator2Value><HKMAMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='HKMA']/swbMandatoryClearingIndicator"/></HKMAMandatoryClearingIndicator><HKMAClearingExemptIndicator1PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></HKMAClearingExemptIndicator1PartyId><HKMAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[1]/swbExemption"/></HKMAClearingExemptIndicator1Value><HKMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395483344208-5/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></HKMAClearingExemptIndicator2PartyId><HKMAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[2]/swbExemption"/></HKMAClearingExemptIndicator2Value><PBEBTradeHKMAMandatoryClearingIndicator><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='HKMA']/swbMandatoryClearingIndicator"/></PBEBTradeHKMAMandatoryClearingIndicator><PBEBTradeHKMAClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBEBTradeHKMAClearingExemptIndicator1PartyId><PBEBTradeHKMAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[1]/swbExemption"/></PBEBTradeHKMAClearingExemptIndicator1Value><PBEBTradeHKMAClearingExemptIndicator2PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBEBTradeHKMAClearingExemptIndicator2PartyId><PBEBTradeHKMAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[2]/swbExemption"/></PBEBTradeHKMAClearingExemptIndicator2Value><PBClientTradeHKMAMandatoryClearingIndicator><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='HKMA']/swbMandatoryClearingIndicator"/></PBClientTradeHKMAMandatoryClearingIndicator><PBClientTradeHKMAClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBClientTradeHKMAClearingExemptIndicator1PartyId><PBClientTradeHKMAClearingExemptIndicator1Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[1]/swbExemption"/></PBClientTradeHKMAClearingExemptIndicator1Value><PBClientTradeHKMAClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBClientTradeHKMAClearingExemptIndicator2PartyId><PBClientTradeHKMAClearingExemptIndicator2Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='HKMA']/swbPartyExemption[2]/swbExemption"/></PBClientTradeHKMAClearingExemptIndicator2Value><JFSAMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='JFSA']/swbMandatoryClearingIndicator"/></JFSAMandatoryClearingIndicator><CFTCMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbMandatoryClearingIndicator"/></CFTCMandatoryClearingIndicator><CFTCClearingExemptIndicator1PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></CFTCClearingExemptIndicator1PartyId><CFTCClearingExemptIndicator1Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[1]/swbExemption"/></CFTCClearingExemptIndicator1Value><CFTCClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395483344208-5/party[@id=substring-after(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></CFTCClearingExemptIndicator2PartyId><CFTCClearingExemptIndicator2Value><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[2]/swbExemption"/></CFTCClearingExemptIndicator2Value><CFTCInterAffiliateExemption><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbInterAffiliateExemption"/></CFTCInterAffiliateExemption><PBEBTradeCFTCMandatoryClearingIndicator><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbMandatoryClearingIndicator"/></PBEBTradeCFTCMandatoryClearingIndicator><PBEBTradeCFTCClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBEBTradeCFTCClearingExemptIndicator1PartyId><PBEBTradeCFTCClearingExemptIndicator1Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[1]/swbExemption"/></PBEBTradeCFTCClearingExemptIndicator1Value><PBEBTradeCFTCClearingExemptIndicator2PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbInterDealerTransaction/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBEBTradeCFTCClearingExemptIndicator2PartyId><PBEBTradeCFTCClearingExemptIndicator2Value><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[2]/swbExemption"/></PBEBTradeCFTCClearingExemptIndicator2Value><PBEBTradeCFTCInterAffiliateExemption><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbInterAffiliateExemption"/></PBEBTradeCFTCInterAffiliateExemption><PBClientTradeCFTCMandatoryClearingIndicator><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbMandatoryClearingIndicator"/></PBClientTradeCFTCMandatoryClearingIndicator><PBClientTradeCFTCClearingExemptIndicator1PartyId><xsl:value-of select=" /SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[1]/partyReference/@href,'#')]/partyId"/></PBClientTradeCFTCClearingExemptIndicator1PartyId><PBClientTradeCFTCClearingExemptIndicator1Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[1]/swbExemption"/></PBClientTradeCFTCClearingExemptIndicator1Value><PBClientTradeCFTCClearingExemptIndicator2PartyId><xsl:value-of select="$idm140395484175248-4/party[@id=substring-after(/SWBML/swbGiveUp/swbCustomerTransaction/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[2]/partyReference/@href,'#')]/partyId"/></PBClientTradeCFTCClearingExemptIndicator2PartyId><PBClientTradeCFTCClearingExemptIndicator2Value><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbPartyExemption[2]/swbExemption"/></PBClientTradeCFTCClearingExemptIndicator2Value><PBClientTradeCFTCInterAffiliateExemption><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='DoddFrank']/swbInterAffiliateExemption"/></PBClientTradeCFTCInterAffiliateExemption><MASMandatoryClearingIndicator><xsl:value-of select="$idm140395483473712-4/swbMandatoryClearing[swbJurisdiction='MAS']/swbMandatoryClearingIndicator"/></MASMandatoryClearingIndicator><PBEBTradeMASMandatoryClearingIndicator><xsl:value-of select="$idm140395483349536-3/swbMandatoryClearing[swbJurisdiction='MAS']/swbMandatoryClearingIndicator"/></PBEBTradeMASMandatoryClearingIndicator><PBClientTradeMASMandatoryClearingIndicator><xsl:value-of select="$idm140395483348480-3/swbMandatoryClearing[swbJurisdiction='MAS']/swbMandatoryClearingIndicator"/></PBClientTradeMASMandatoryClearingIndicator><ClearingHouseId><xsl:value-of select="$idm140395483473712-4/swbClearingHouse/partyId"/></ClearingHouseId><IntendedClearingHouse><xsl:value-of select="$idm140395483473712-4/swbClearingHouse/partyId"/></IntendedClearingHouse><TraderId/><TraderId_2/><xsl:if test="$idm140395483473712-4/swbExecutingBroker and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbClearingClient and /SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbClientClearing='true' and not(/SWBML/swbStructuredTradeDetails/swbExtendedTradeDetails/swbTradeHeader/swbDisplayPartyLegalEntity) and $isPrimeBrokered='0'"><ExecutingBroker><xsl:value-of select="$partyA"/></ExecutingBroker><ClearingClient><xsl:value-of select="$partyB"/></ClearingClient></xsl:if><ClientClearingBroker/><PartyAClearingBroker/><PartyBClearingBroker/><DisplayPartyLE_Party/><DisplayPartyLE_Value/><ClearingNettingParty/><ClearingNettingString/><ClearingNettingParty_2/><ClearingNettingString_2/><CommodityReferencePrice/><CommodityReferencePrice_2/><CommonPricing/><DeliveryDates/><DeliveryDates_2/><DeliveryLocation/><FloatCalculationFrequency/><FloatCalculationFrequency_2/><PhysicalCommodity/><PhysicalElectricityProduct/><PhysicalElectricityForceMajeure/><PhysicalGasDeliveryType/><ForwardUnderlyer/><FuturesRollConvention/><FuturesRollConvention_2/><LoadShape/><LoadShape_2/><NotionalLots/><NotionalQuantity/><NotionalQuantity_2/><PricingDayType/><PricingDayType_2/><PricingFrequency/><PricingFrequency_2/><PricingHolidayCentres/><PricingHolidayCentres_2/><PricingLagInterval/><PricingLagInterval_2/><PricingLagSkipInterval/><PricingLagSkipInterval_2/><PricingRange/><PricingRange_2/><SettlementDaysConvention/><SettlementDaysType/><SpecifiedPrice/><SpecifiedPrice_2/><UnitFrequency/><Units/><Units_2/><ValueDate/><ModifiedEquityDelivery/><SettledEntityMatrixSource/><SettledEntityMatrixDate/><AdditionalTerms/><Rule15A-6/><xsl:call-template name="outputCommonReportingFields"><xsl:with-param name="reportingData" select="$reportingData"/><xsl:with-param name="brokerPrivateData" select="$brokerPrivateData"/><xsl:with-param name="partyAPrivateData" select="$partyAPrivateData"/><xsl:with-param name="partyBPrivateData" select="$partyBPrivateData"/><xsl:with-param name="brokerPBPrivateData" select="$brokerPBPrivateData"/><xsl:with-param name="pbPrivateData" select="$pbPrivateData"/><xsl:with-param name="clientPrivateData" select="$clientPrivateData"/></xsl:call-template><xsl:for-each select="$idm140395484175248-2/swbBusinessConductDetails/swbMidMarketPrice"><xsl:choose><xsl:when test="swbUnit | swbAmount | swbCurrency"><MidMarketPriceType><xsl:value-of select="swbUnit"/></MidMarketPriceType><MidMarketPriceValue><xsl:value-of select="swbAmount"/></MidMarketPriceValue><xsl:choose><xsl:when test="swbUnit='Price'"><MidMarketPriceCurrency><xsl:value-of select="swbCurrency"/></MidMarketPriceCurrency></xsl:when><xsl:otherwise><IntentToBlankMidMarketCurrency>true</IntentToBlankMidMarketCurrency></xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise><IntentToBlankMidMarketPrice>true</IntentToBlankMidMarketPrice></xsl:otherwise></xsl:choose></xsl:for-each><xsl:call-template name="brokerProvidedOrderDetails"><xsl:with-param name="extendedTradeDetails" select="$extendedTradeDetails"/></xsl:call-template><xsl:call-template name="brokerProvidedPackageDetails"><xsl:with-param name="extendedTradeDetails" select="$extendedTradeDetails"/></xsl:call-template><xsl:variable name="swbTradeHeader" select="$idm140395483473712-4"/><AutoProcessing><xsl:value-of select="$swbTradeHeader/swbAutoProcessing"/></AutoProcessing><AnonymousTrade><xsl:value-of select="$swbTradeHeader/swbAnonymousTrade"/></AnonymousTrade><GCOffsettingID><xsl:value-of select="$swbTradeHeader/swbOffsettingTradeId"/></GCOffsettingID><CompressionType><xsl:value-of select="$swbTradeHeader/swbCompressionType"/></CompressionType><xsl:for-each select="$swbTradeHeader/swbPartyExecutionMethod"><xsl:if test="partyReference/@href = 'partyA'"><GCExecutionMethodParty_1><xsl:value-of select="partyReference/@href"/></GCExecutionMethodParty_1><GCExecutionMethodToken_1><xsl:value-of select="swbExecutionMethod"/></GCExecutionMethodToken_1></xsl:if></xsl:for-each><xsl:for-each select="$swbTradeHeader/swbPartyExecutionMethod"><xsl:if test="partyReference/@href = 'partyB'"><GCExecutionMethodParty_2><xsl:value-of select="partyReference/@href"/></GCExecutionMethodParty_2><GCExecutionMethodToken_2><xsl:value-of select="swbExecutionMethod"/></GCExecutionMethodToken_2></xsl:if></xsl:for-each><OTVConfirmation><xsl:value-of select="$swbTradeHeader/swbOTVConfirmation"/></OTVConfirmation><IntroducingBroker><xsl:if test="$idm140395483473712-4/swbPartyIntroducingBroker"><xsl:for-each select="$idm140395483473712-4/swbPartyIntroducingBroker"><xsl:if test="partyReference/@href = 'partyA'"><xsl:value-of select="swbIntroducingBroker"/></xsl:if></xsl:for-each></xsl:if></IntroducingBroker><IntroducingBroker_2><xsl:if test="$idm140395483473712-4/swbPartyIntroducingBroker"><xsl:for-each select="$idm140395483473712-4/swbPartyIntroducingBroker"><xsl:if test="partyReference/@href = 'partyB'"><xsl:value-of select="swbIntroducingBroker"/></xsl:if></xsl:for-each></xsl:if></IntroducingBroker_2><OriginatingEvent><xsl:value-of select="$idm140395483473712-4/swbOriginatingEvent"/></OriginatingEvent><PackageIdentifierNamespace><xsl:value-of select="$idm140395483223440-3/swbPackageIdentifier/swbIssuer"/></PackageIdentifierNamespace><PackageIdentifierId><xsl:value-of select="$idm140395483223440-3/swbPackageIdentifier/swbTradeId"/></PackageIdentifierId><PackageSize><xsl:value-of select="$idm140395483223440-3/swbSize"/></PackageSize><PackageCreditParty><xsl:if test="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="partyReference/@href = 'partyA'"><xsl:value-of select="$idm140395483223440-3/swbPartyCreditAcceptanceToken/partyReference/@href"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395483223440-3/swbPartyCreditAcceptanceToken/partyReference/@href"/></xsl:otherwise></xsl:choose></xsl:for-each></xsl:if></PackageCreditParty><PackageCreditIssuer><xsl:if test="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="partyReference/@href = 'partyA'"><xsl:value-of select="$idm140395483223440-3/swbPartyCreditAcceptanceToken/swbCreditIssuer"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395483223440-3/swbPartyCreditAcceptanceToken/swbCreditIssuer"/></xsl:otherwise></xsl:choose></xsl:for-each></xsl:if></PackageCreditIssuer><PackageCreditToken><xsl:if test="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="partyReference/@href = 'partyA'"><xsl:value-of select="$idm140395483223440-3/swbPartyCreditAcceptanceToken/swbToken"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395483223440-3/swbPartyCreditAcceptanceToken/swbToken"/></xsl:otherwise></xsl:choose></xsl:for-each></xsl:if></PackageCreditToken><PackageCreditParty_2><xsl:if test="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="partyReference/@href = 'partyB'"><xsl:value-of select="partyReference/@href"/></xsl:when><xsl:otherwise><xsl:value-of select="partyReference/@href"/></xsl:otherwise></xsl:choose></xsl:for-each></xsl:if></PackageCreditParty_2><PackageCreditIssuer_2><xsl:if test="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="partyReference/@href = 'partyB'"><xsl:value-of select="swbCreditIssuer"/></xsl:when><xsl:otherwise><xsl:value-of select="swbCreditIssuer"/></xsl:otherwise></xsl:choose></xsl:for-each></xsl:if></PackageCreditIssuer_2><PackageCreditToken_2><xsl:if test="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:for-each select="$idm140395483223440-3/swbPartyCreditAcceptanceToken"><xsl:choose><xsl:when test="partyReference/@href = 'partyB'"><xsl:value-of select="swbToken"/></xsl:when><xsl:otherwise><xsl:value-of select="swbToken"/></xsl:otherwise></xsl:choose></xsl:for-each></xsl:if></PackageCreditToken_2></Trade></xsl:template><xsl:template match="cashSettlementReferenceBanks"><xsl:for-each select="referenceBank"><xsl:value-of select="referenceBankId"/><xsl:if test="../referenceBank[last()]!=.">; </xsl:if></xsl:for-each></xsl:template><xsl:template match="additionalPayment"><xsl:variable name="paymentType" select="string(paymentType)"/><xsl:choose><xsl:when test="$paymentType='Premium'"><xsl:call-template name="premium"/></xsl:when><xsl:otherwise><xsl:call-template name="additionalPayment"/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="businessCenters"><xsl:for-each select="businessCenter"><xsl:apply-templates select="."/><xsl:if test="../businessCenter[last()]!=.">; </xsl:if></xsl:for-each></xsl:template><xsl:template match="swbRecipient"><Recipient><Id><xsl:value-of select="./@id"/></Id><xsl:variable name="party" select="string(partyReference/@href)"/><Party><xsl:choose><xsl:when test="$party='#partyA'">A</xsl:when><xsl:when test="$party='#partyB'">B</xsl:when><xsl:when test="$party='#partyC'">C</xsl:when><xsl:when test="$party='#partyD'">D</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Party><UserName><xsl:value-of select="swbUserName"/></UserName><TradingBook><xsl:value-of select="swbTradingBookId"/></TradingBook><ExecutionMode/></Recipient></xsl:template><xsl:template name="formatNotionalSchedule"><xsl:param name="position"/><xsl:param name="leg"/><xsl:choose><xsl:when test="$leg=$floatingLeg"><FloatLegNotionalStep><FloatRollDates><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step[position()= $position]/stepDate"><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step[position()= $position]/stepDate"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/floatingRateCalculation/spreadSchedule/step[position()= $position]/stepDate"/></xsl:otherwise></xsl:choose></FloatRollDates><FloatNotionals><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step[position()= $position]/stepValue"/></FloatNotionals><FloatSpreads><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/floatingRateCalculation/spreadSchedule/step[position()= $position]/stepValue"/></FloatSpreads></FloatLegNotionalStep></xsl:when><xsl:when test="$leg=$fixedLeg"><FixedLegNotionalStep><FixedPaymentDates><xsl:choose><xsl:when test="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step[position()= $position]/stepDate"><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step[position()= $position]/stepDate"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/fixedRateSchedule/step[position()= $position]/stepDate"/></xsl:otherwise></xsl:choose></FixedPaymentDates><FixedNotionals><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/notionalSchedule/notionalStepSchedule/step[position()= $position]/stepValue"/></FixedNotionals><FixedRates><xsl:value-of select="$idm140395484175248-6/swapStream[position()=$leg]/calculationPeriodAmount/calculation/fixedRateSchedule/step[position()= $position]/stepValue"/></FixedRates></FixedLegNotionalStep></xsl:when></xsl:choose></xsl:template><xsl:template name="additionalPayment"><AdditionalPayment><Payer><xsl:variable name="payer" select="string(payerPartyReference/@href)"/><xsl:choose><xsl:when test="$payer='#partyA'">A</xsl:when><xsl:when test="$payer='#partyB'">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Payer><Reason><xsl:value-of select="paymentType"/></Reason><Currency><xsl:value-of select="paymentAmount/currency"/></Currency><Amount><xsl:value-of select="paymentAmount/amount"/></Amount><Date><xsl:if test="paymentDate/unadjustedDate"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(paymentDate/unadjustedDate)"/></xsl:call-template></xsl:if></Date><Convention><xsl:value-of select="substring(paymentDate/dateAdjustments/businessDayConvention,1,4)"/></Convention><Holidays><xsl:apply-templates select="paymentDate/dateAdjustments/businessCenters"/></Holidays></AdditionalPayment></xsl:template><xsl:template name="premium"/><xsl:template match="otherPartyPayment"><Brokerage><Payer><xsl:variable name="payer" select="string(payerPartyReference/@href)"/><xsl:choose><xsl:when test="$payer='#partyA'">A</xsl:when><xsl:when test="$payer='#partyB'">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Payer><Currency><xsl:choose><xsl:when test="paymentAmount/currency='XXX' and paymentAmount/amount='0'"/><xsl:otherwise><xsl:value-of select="paymentAmount/currency"/></xsl:otherwise></xsl:choose></Currency><Amount><xsl:choose><xsl:when test="paymentAmount/currency='XXX' and paymentAmount/amount='0'"/><xsl:otherwise><xsl:value-of select="paymentAmount/amount"/></xsl:otherwise></xsl:choose></Amount><Broker><xsl:variable name="version" select="string(/SWBML/@version)"/><xsl:if test="$version='2-0' or $version='3-0'"><xsl:variable name="broker" select="string(receiverPartyReference/@href)"/><xsl:value-of select="$idm140395484175248-4/party[@id=substring($broker,2)]/partyId"/></xsl:if></Broker><BrokerTradeId><xsl:variable name="version" select="string(/SWBML/@version)"/><xsl:choose><xsl:when test="$version='2-0' or $version='3-0'"><xsl:variable name="party" select="string(payerPartyReference/@href)"/><xsl:value-of select="$idm140395484175248-4/tradeHeader/partyTradeIdentifier/partyReference[@href=$party]/../tradeId"/></xsl:when><xsl:otherwise><xsl:value-of select="$idm140395484058384-2/swbBrokerTradeId"/></xsl:otherwise></xsl:choose></BrokerTradeId></Brokerage></xsl:template><xsl:template match="swbAssociatedFuture"><AssociatedFuture><Party><xsl:variable name="party" select="string(@href)"/><xsl:choose><xsl:when test="$party='#partyA'">A</xsl:when><xsl:when test="$party='#partyB'">B</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></Party><AssociatedFutureName><xsl:value-of select="swbFutureName"/></AssociatedFutureName><AssociatedFutureQuantity><xsl:value-of select="swbQuantity"/></AssociatedFutureQuantity><AssociatedFutureMaturity><xsl:if test="swbMaturity"><xsl:call-template name="formatDate"><xsl:with-param name="date" select="string(swbMaturity)"/></xsl:call-template></xsl:if></AssociatedFutureMaturity><AssociatedFutureDescription><xsl:value-of select="swbDescription"/></AssociatedFutureDescription><AssociatedFuturePrice><xsl:value-of select="swbPrice"/></AssociatedFuturePrice></AssociatedFuture></xsl:template><xsl:template match="allocatedNotional"><AllocatedNotional><Currency><xsl:value-of select="currency"/></Currency><Amount><xsl:value-of select="amount"/></Amount></AllocatedNotional><AllocatedNumberOfOptions/><AllocatedVegaNotional/><AllocatedVarianceAmount/><AllocatedUnits/></xsl:template><xsl:template match="independentAmount"><AllocationIndependentAmount><Payer><xsl:value-of select="payerPartyReference/@href"/></Payer><Currency><xsl:value-of select="paymentDetail/paymentAmount/currency"/></Currency><Amount><xsl:value-of select="paymentDetail/paymentAmount/amount"/></Amount></AllocationIndependentAmount></xsl:template><xsl:template match="swbAllocation/otherPartyPayment"><AllocationOtherPartyPayment><Payer><xsl:value-of select="payerPartyReference/@href"/></Payer><Receiver><xsl:value-of select="receiverPartyReference/@href"/></Receiver><Currency><xsl:choose><xsl:when test="paymentAmount/currency='XXX' and paymentAmount/amount='0'"/><xsl:otherwise><xsl:value-of select="paymentAmount/currency"/></xsl:otherwise></xsl:choose></Currency><Amount><xsl:choose><xsl:when test="paymentAmount/currency='XXX' and paymentAmount/amount='0'"/><xsl:otherwise><xsl:value-of select="paymentAmount/amount"/></xsl:otherwise></xsl:choose></Amount></AllocationOtherPartyPayment></xsl:template><xsl:template name="swbAllocations"><xsl:apply-templates select="/SWBML/swbAllocations/swbAllocation"/></xsl:template><xsl:template match="swbAllocation"><xsl:variable name="reportingAllocationData.rtf"><xsl:apply-templates select="swbAllocationReportingDetails/node()" mode="mapReportingData"/></xsl:variable><Allocation><xsl:choose><xsl:when test="/SWBML/swbAllocations/swbAllocation/payerPartyReference"><xsl:variable name="PayerRef" select="string(payerPartyReference/@href)"/><xsl:variable name="ReceiverRef" select="string(receiverPartyReference/@href)"/><xsl:variable name="PayerBIC" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after($PayerRef,'#')]/partyId)"/><xsl:variable name="ReceiverBIC" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after($ReceiverRef,'#')]/partyId)"/><Payer><xsl:value-of select="$PayerBIC"/></Payer><Receiver><xsl:value-of select="$ReceiverBIC"/></Receiver></xsl:when><xsl:otherwise><xsl:variable name="BuyerRef" select="string(buyerPartyReference/@href)"/><xsl:variable name="SellerRef" select="string(sellerPartyReference/@href)"/><xsl:variable name="BuyerBIC" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after($BuyerRef,'#')]/partyId)"/><xsl:variable name="SellerBIC" select="string(/SWBML/swbStructuredTradeDetails/FpML/trade/party[@id=substring-after($SellerRef,'#')]/partyId)"/><Buyer><xsl:value-of select="$BuyerBIC"/></Buyer><Seller><xsl:value-of select="$SellerBIC"/></Seller></xsl:otherwise></xsl:choose><swbStreamReference><xsl:value-of select="swbStreamReference/@href"/></swbStreamReference><xsl:apply-templates select="allocatedNotional"/><xsl:apply-templates select="independentAmount"/><swbBrokerTradeId><xsl:value-of select="swbBrokerTradeId"/></swbBrokerTradeId><xsl:apply-templates select="otherPartyPayment"/><AllocationClearingBroker><ClientClearingBroker/><EBClearingBroker/></AllocationClearingBroker><AllocationPartyAClearingBroker/><AllocationPartyBClearingBroker/><AllocationPayerClearingBroker/><AllocationReceiverClearingBroker/><AllocationNettingParty/><AllocationNettingString/><AllocationNettingParty_2/><AllocationNettingString_2/><xsl:choose><xsl:when test="function-available('common:node-set')"><xsl:call-template name="outputAllocationReportingFields"><xsl:with-param name="reportingAllocationData" select="common:node-set($reportingAllocationData.rtf)"/><xsl:with-param name="partyIdentifiers" select="common:node-set($partyIdentifiers.rtf)"/></xsl:call-template></xsl:when><xsl:otherwise><xsl:call-template name="outputAllocationReportingFields"><xsl:with-param name="reportingAllocationData" select="$reportingAllocationData.rtf"/><xsl:with-param name="partyIdentifiers" select="$partyIdentifiers.rtf"/></xsl:call-template></xsl:otherwise></xsl:choose></Allocation></xsl:template><xsl:template name="formatDate"><xsl:param name="date"/><xsl:variable name="month" select="string(substring($date,6,2))"/><xsl:value-of select="substring($date,9,2)"/>-<xsl:choose><xsl:when test="$month='01'">Jan</xsl:when><xsl:when test="$month='02'">Feb</xsl:when><xsl:when test="$month='03'">Mar</xsl:when><xsl:when test="$month='04'">Apr</xsl:when><xsl:when test="$month='05'">May</xsl:when><xsl:when test="$month='06'">Jun</xsl:when><xsl:when test="$month='07'">Jul</xsl:when><xsl:when test="$month='08'">Aug</xsl:when><xsl:when test="$month='09'">Sep</xsl:when><xsl:when test="$month='10'">Oct</xsl:when><xsl:when test="$month='11'">Nov</xsl:when><xsl:when test="$month='12'">Dec</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose>-<xsl:value-of select="substring($date,1,4)"/></xsl:template><xsl:template name="formatTime"><xsl:param name="time"/><xsl:choose><xsl:when test="$time='09:00:00'">9am</xsl:when><xsl:when test="$time='09:30:00'">9:30am</xsl:when><xsl:when test="$time='11:00:00'">11am</xsl:when><xsl:when test="$time='11:30:00'">11:30am</xsl:when><xsl:when test="$time='12:00:00'">12noon</xsl:when><xsl:when test="$time='15:00:00'">3pm</xsl:when><xsl:when test="$time='15:30:00'">3:30pm</xsl:when><xsl:when test="$time='00:00:00'">12midnight</xsl:when><xsl:when test="$time='01:00:00'">1am</xsl:when><xsl:when test="$time='02:00:00'">2am</xsl:when><xsl:when test="$time='03:00:00'">3am</xsl:when><xsl:when test="$time='04:00:00'">4am</xsl:when><xsl:when test="$time='05:00:00'">5am</xsl:when><xsl:when test="$time='06:00:00'">6am</xsl:when><xsl:when test="$time='07:00:00'">7am</xsl:when><xsl:when test="$time='08:00:00'">8am</xsl:when><xsl:when test="$time='10:00:00'">10am</xsl:when><xsl:when test="$time='10:30:00'">10:30am</xsl:when><xsl:when test="$time='12:30:00'">12:30pm</xsl:when><xsl:when test="$time='13:00:00'">1pm</xsl:when><xsl:when test="$time='13:30:00'">1:30pm</xsl:when><xsl:when test="$time='14:00:00'">2pm</xsl:when><xsl:when test="$time='14:30:00'">2:30pm</xsl:when><xsl:when test="$time='16:00:00'">4pm</xsl:when><xsl:when test="$time='16:30:00'">4:30pm</xsl:when><xsl:when test="$time='17:00:00'">5pm</xsl:when><xsl:when test="$time='18:00:00'">6pm</xsl:when><xsl:when test="$time='19:00:00'">7pm</xsl:when><xsl:when test="$time='20:00:00'">8pm</xsl:when><xsl:when test="$time='21:00:00'">9pm</xsl:when><xsl:when test="$time='22:00:00'">10pm</xsl:when><xsl:when test="$time='23:00:00'">11pm</xsl:when><xsl:otherwise>???</xsl:otherwise></xsl:choose></xsl:template></xsl:stylesheet>